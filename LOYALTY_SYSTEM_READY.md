# ๐ ูุธุงู ุงูููุงุก ูุงูููุงุท - ุฌุงูุฒ ุงูุขู!

## โ ุชู ุงูุฅูุฌุงุฒ

### 1. ุฎุฏูุฉ ุงูููุงุก ุงููุงููุฉ
```typescript
// โ ูู src/lib/loyalty-service.ts
- ูุณุจ ุงูููุงุท
- ุงุณุชุฎุฏุงู ุงูููุงุท
- ุญุณุงุจ ุงูููุงุท ูู ุงููุดุชุฑูุงุช
- ุชุญููู ุงูููุงุท ูุฎุตู
- ููุงูุขุช ุชููุงุฆูุฉ
- ูุณุชููุงุช VIP (Bronze, Silver, Gold, Platinum)
```

### 2. APIs ุงูุฌุงูุฒุฉ

#### ุงุณุชุจุฏุงู ุงูููุงุท
```bash
POST /api/loyalty/redeem
Body: { points: 100, orderId?: string }
Response: { discount: 10, remaining: 400 }
```

#### ูุนูููุงุช ุงูููุงุท
```bash
GET /api/loyalty/redeem
Response: {
  current: 500,
  earned: 1000,
  redeemed: 500,
  tier: { name: 'ูุถู ๐ฅ', ... },
  redemptionOptions: [...]
}
```

#### ุชุงุฑูุฎ ุงูููุงุท
```bash
GET /api/loyalty/history?limit=50
Response: { history: [...], total: 50 }
```

---

## ๐ ุทุฑู ูุณุจ ุงูููุงุท

### 1. ูู ุงููุดุชุฑูุงุช
```typescript
// ูู 1 ุฌููู = 1 ููุทุฉ
const points = LoyaltyService.calculatePointsFromPurchase(500); // 500 ููุทุฉ
```

### 2. ุงูุทูุจ ุงูุฃูู
```typescript
// ุชููุงุฆูุงู 50 ููุทุฉ ุนูู ุฃูู ุทูุจ
await LoyaltyService.rewardFirstOrder(userId);
```

### 3. ุงูุชููููุงุช
```typescript
// 5 ููุงุท ููุชูููู + 5 ููุตูุฑุฉ
await LoyaltyService.rewardReview(userId, hasImages: true); // 10 ููุงุท
```

### 4. ุงูุฅุญุงูุฉ
```typescript
// 100 ููุทุฉ ููููุญูู + 50 ููููุญุงู
await LoyaltyService.rewardReferral(referrerId, refereeId);
```

### 5. ุนูุฏ ุงููููุงุฏ
```typescript
// 100 ููุทุฉ ูุฏูุฉ
await LoyaltyService.rewardBirthday(userId);
```

### 6. ุฅูุฌุงุฒุงุช ุงูููุงุก
```typescript
// ููุงูุฃุฉ ูู 10 ุทูุจุงุช
await LoyaltyService.rewardLoyalty(userId, 10); // 100 ููุทุฉ
```

---

## ๐ ูุณุชููุงุช VIP

### ุจุฑููุฒู ๐ฅ (0-499 ููุทุฉ)
- ุฎุตู 5% ุนูู ุงูุทูุจ ุงูุฃูู
- ููุงุท ุนูู ูู ุนูููุฉ ุดุฑุงุก

### ูุถู ๐ฅ (500-1999 ููุทุฉ)
- ุฎุตู 10% ุนูู ููุชุฌุงุช ูุฎุชุงุฑุฉ
- ุดุญู ูุฌุงูู ููุทูุจุงุช +500 ุฌ

### ุฐูุจู โญ (2000-4999 ููุทุฉ)
- ุฎุตู 15% ุนูู ุฌููุน ุงูููุชุฌุงุช
- ุดุญู ูุฌุงูู ููุทูุจุงุช +300 ุฌ
- ุนุฑูุถ ุญุตุฑูุฉ

### ุจูุงุชููู ๐ (5000+ ููุทุฉ)
- ุฎุตู 20% ุนูู ุฌููุน ุงูููุชุฌุงุช
- ุดุญู ูุฌุงูู ุฏุงุฆูุงู
- ูุตูู ูุจูุฑ ููุนุฑูุถ
- ุฏุนู ุฐูุจู VIP

---

## ๐ฐ ุฎูุงุฑุงุช ุงูุงุณุชุจุฏุงู

| ุงูููุงุท | ุงูุฎุตู | ุงููููุฉ |
|--------|-------|--------|
| 100    | 10 ุฌ  | โญ     |
| 250    | 30 ุฌ  | โญโญ   |
| 500    | 75 ุฌ  | โญโญโญ |
| 1000   | 200 ุฌ | ๐     |
| 2000   | 500 ุฌ | ๐๐   |

---

## ๐ ูุซุงู ูุงูู

### ุนููู ุฌุฏูุฏ
```typescript
// 1. ุงูุชุณุฌูู
// ุฑุตูุฏ: 0 ููุทุฉ

// 2. ุฃูู ุทูุจ (500 ุฌ)
await LoyaltyService.rewardFirstOrder(userId);     // +50
const points = calculatePointsFromPurchase(500);    // +500
// ุฑุตูุฏ: 550 ููุทุฉ โ

// 3. ุชูููู ุงูููุชุฌ ูุน ุตูุฑุฉ
await LoyaltyService.rewardReview(userId, true);   // +10
// ุฑุตูุฏ: 560 ููุทุฉ

// 4. ุงูุงุณุชุจุฏุงู (100 ููุทุฉ = 10 ุฌ ุฎุตู)
await LoyaltyService.redeemPoints(userId, 100, 'ุฎุตู ุนูู ุงูุทูุจ');
// ุฑุตูุฏ: 460 ููุทุฉ
// ุญุตู ุนูู ุฎุตู 10 ุฌููู โ
```

---

## ๐ง ุงูุชูุงูู ูุน ุงูุทูุจุงุช

### ุนูุฏ ุฅูุดุงุก ุทูุจ
```typescript
// ูู OrderService.createOrder()
const points = LoyaltyService.calculatePointsFromPurchase(orderTotal);
await LoyaltyService.earnPoints(
  customerId,
  points,
  'PURCHASE',
  `ุดุฑุงุก ุจูููุฉ ${orderTotal} ุฌููู`,
  orderId
);
```

### ุนูุฏ ุงูุชูููู
```typescript
// ูู ReviewService
const hasImages = review.images && review.images.length > 0;
await LoyaltyService.rewardReview(userId, hasImages);
```

---

## ๐ฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูููุชุฑุญุฉ

### ุตูุญุฉ ููุงุทู
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ููุงุทู                        โ
โ 560 ููุทุฉ                        โ
โ ุงููุณุชูู: ูุถู ๐ฅ                 โ
โ ุชุญุชุงุฌ 1440 ููุทุฉ ูููุณุชูู ุงูุฐูุจู โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุฎุตู ูุชุงุญ: 56 ุฌููู               โ
โ                                  โ
โ [ุงุณุชุจุฏุงู ุงูููุงุท]                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุทุฑู ูุณุจ ุงูููุงุท                 โ
โ                                  โ
โ ๐ ุชุณูู: 1 ุฌ = 1 ููุทุฉ          โ
โ โญ ุชูููู: 5-10 ููุงุท             โ
โ ๐ฅ ุฅุญุงูุฉ: 100 ููุทุฉ              โ
โ ๐ ุนูุฏ ูููุงุฏ: 100 ููุทุฉ          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุชุงุฑูุฎ ุงูููุงุท                    โ
โ                                  โ
โ ุงูููู                            โ
โ +500 ๐ ุดุฑุงุก ุจูููุฉ 500 ุฌ         โ
โ                                  โ
โ ุฃูุณ                              โ
โ +10 โญ ุชูููู ููุชุฌ ูุน ุตูุฑุฉ        โ
โ                                  โ
โ ููุฐ 3 ุฃูุงู                       โ
โ -100 ๐ณ ุงุณุชุจุฏุงู ุจุฎุตู 10 ุฌ        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ูููุทูุฑูู:
1. โ ุฏูุฌ LoyaltyService ูู OrderService
2. โ ุฅุถุงูุฉ ูุงุฌูุฉ ููุงุทู ูู ุงูู Profile
3. โณ ุฅุถุงูุฉ badge ูููุณุชููุงุช
4. โณ ุฅุดุนุงุฑุงุช ุนูุฏ ูุณุจ ุงูููุงุท

### ููุชุณููู:
1. โณ ุญููุฉ ุชุนุฑูู ุจูุธุงู ุงูููุงุท
2. โณ ุนุฑูุถ ุฎุงุตุฉ ุญุณุจ ุงููุณุชูู
3. โณ ูุณุงุจูุงุช ููุณุจ ููุงุท ุฅุถุงููุฉ

---

## ๐ ุงูุจุฏุก ุงูุขู

```bash
# 1. ุชุฃูุฏ ูู Schema ูุญุชูู ุนูู PointTransaction
npx prisma db push

# 2. ุงุณุชุฎุฏู ุงูุฎุฏูุฉ ูู ุงูููุฏ
import { LoyaltyService } from '@/lib/loyalty-service';

# 3. ุงุฎุชุจุฑ APIs
curl http://localhost:3000/api/loyalty/redeem
```

**ูุธุงู ุงูููุงุก ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**
