import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

// ุฃุณูุงุก ูุตุฑูุฉ ูุชููุนุฉ
const egyptianNames = [
  'ูุญูุฏ ุฃุญูุฏ', 'ุฃุญูุฏ ูุญููุฏ', 'ูุงุทูุฉ ุญุณู', 'ูุฑูู ุนูู', 'ุนูุฑ ุฎุงูุฏ',
  'ููุฑ ุงูุฏูู', 'ูุงุณููู ูุญูุฏ', 'ุณุงุฑุฉ ุฅุจุฑุงููู', 'ุฎุงูุฏ ููุณู', 'ูุฏู ุนุจุฏุงูุฑุญูู',
  'ุนุจุฏุงููู ุณุนูุฏ', 'ููู ูุชุญู', 'ุฑูู ุญุณูู', 'ุทุงุฑู ุนุงุฏู', 'ุฏููุง ุตูุงุญ',
  'ูุฑูู ูููุฏ', 'ููู ูุญููุฏ', 'ููุณู ูุญูุฏ', 'ูุจุฉ ูุญููุฏ', 'ุนุงุฏู ุตูุงุญ',
  'ุดููุงุก ุฃุญูุฏ', 'ูููุฏ ูุญูุฏ', 'ุณุงูู ุญุณู', 'ูุฏู ุฃุญูุฏ', 'ุญุณุงู ุงูุฏูู',
  'ุฅุณูุงู ูุญูุฏ', 'ุฑุงููุง ุญุณู', 'ูุญููุฏ ุนูู', 'ูููุงุก ุณุนูุฏ', 'ุชุงูุฑ ุญุณูู',
];

// ุชุนูููุงุช ูุชููุนุฉ ููุตุฑูุฉ
const egyptianComments = [
  'ุงูููุชุฌ ููุชุงุฒ ุฌุฏุงู ูุงูุฌูุฏุฉ ุนุงููุฉุ ูุณุชุงูู ูู ูุฑุด!',
  'ูุงุดุงุก ุงููู ุชุจุงุฑู ุงูููุ ุงูููุชุฌ ูุงูุฎุฏูุฉ ูู ุงูููุฉ!',
  'ุชุฌุฑุจุฉ ุฑุงุฆุนุฉ ูู ุงูุทูุจ ููุชูุตููุ ุดูุฑุงู ุฌุฏุงู!',
  'ุงูููุงุณ ูุธุจูุท 100% ูุงูุฎุงูุฉ ูุงุนูุฉ ุฌุฏุงู!',
  'ุงูุชุนุงูู ุฑุงูู ุฌุฏุงู ูุฎุฏูุฉ ุนููุงุก ููุชุงุฒุฉ!',
  'ุงูููุชุฌ ูุงู ุชููุนุงุชู ุจูุชูุฑ! ุฌูุฏุฉ ูุฎุงูุฉ ูุชูุตูู ุณุฑูุน!',
  'ุฑุจูุง ูุจุงุฑู ูู ุดุบูููุ ุงูููุชุฌ ูุงูุชุนุงูู ูู ุงูููุฉ!',
  'ูุตู ุจุณุฑุนุฉ ุงูุจุฑู ูุงูุชุบููู ูุญุชุฑู ุฌุฏุงู!',
  'ุงููููุฉ ููุงุจู ุงูุณุนุฑ ููุชุงุฒุฉ ุฌุฏุงูุ ูุณุชุญู ุงูุชุฌุฑุจุฉ!',
  'ูุงุดุงุก ุงููู ุงูุฎุงูุฉ ูุงุฎุฑุฉ ูุงูุชูุตูู ุฏููู ุฌุฏุงู!',
  'ุงูููุชุฌ ุฌููู ุฌุฏุงู ูุฌูุฏุฉ ุนุงููุฉุ ูุณุชุงูู ูู ุงููุฌูู!',
  'ุฑุงุถู ุฌุฏุงู ุนู ุงูููุชุฌ ูุงูุฎุฏูุฉุ ุญุงุทูุจ ุชุงูู ุฃููุฏ!',
  'ุชุฌุฑุจุฉ ุชุณูู ุฑุงุฆุนุฉุ ุงูููุชุฌ ุฃุฌูู ูู ุงูุตูุฑ ููุงู!',
  'ูู ุญุงุฌุฉ ุชูุงู! ุงูููุชุฌ ูุงูุชูุตูู ูุงูุชุนุงูู ููู ููุชุงุฒ!',
  'ุชุฌุฑุจุฉ ูุงุฌุญุฉ ุจูู ุงูููุงููุณ! ุดูุฑุงู ูุฅูู ุงูุฃูุงู!',
  'ุงูููุชุฌ ููุชุงุฒ ุฌุฏุงู! ุฑุดุญุชู ููู ุตุญุงุจู ูุนุงุฆูุชู!',
  'ุงูุฎุงูุฉ ุฌูููุฉ ูุงูุณุนุฑ ููุงุณุจ ุฌุฏุงูุ ูุชุดูุฑูู!',
  'ุงูููุชุฌ ูู ุงููุณุชูู ูููู ุงูุชููุนุงุช ุจุตุฑุงุญุฉ!',
  'ุชุณููู ุณุฑูุน ูููุชุฌ ููุชุงุฒุ ุฃูู ุดูุฑ!',
  'ุฌูุฏุฉ ุนุงููุฉ ุฌุฏุงู ูุงูุณุนุฑ ุญููุ ุฃููุฏ ูุฑุฌุน ุฃุทูุจ ุชุงูู!',
];

// ุฏุงูุฉ ููุญุตูู ุนูู ุฑูู ุนุดูุงุฆู
function getRandomInt(min: number, max: number): number {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

// ุฏุงูุฉ ููุญุตูู ุนูู ุงุณู ุนุดูุงุฆู
function getRandomName(): string {
  return egyptianNames[getRandomInt(0, egyptianNames.length - 1)];
}

// ุฏุงูุฉ ููุญุตูู ุนูู ุชุนููู ุนุดูุงุฆู
function getRandomComment(): string {
  return egyptianComments[getRandomInt(0, egyptianComments.length - 1)];
}

// ุฏุงูุฉ ููุญุตูู ุนูู ุชูููู ุนุดูุงุฆู (3-5 ูุฌูู ุจุฃุบูุจูุฉ ููู 5)
function getRandomRating(): number {
  const rand = Math.random();
  if (rand < 0.7) return 5; // 70% ุฎูุณ ูุฌูู
  if (rand < 0.9) return 4; // 20% ุฃุฑุจุน ูุฌูู
  return 3; // 10% ุซูุงุซ ูุฌูู
}

async function main() {
  try {
    console.log('๐ฆ ุฌุงุฑู ุฌูุจ ุงูููุชุฌุงุช...\n');

    // ุฌูุจ ูู ุงูููุชุฌุงุช
    const products = await prisma.product.findMany({
      select: {
        id: true,
        name: true,
        nameAr: true,
      },
    });

    if (products.length === 0) {
      console.log('โ๏ธ ูุง ุชูุฌุฏ ููุชุฌุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช!');
      return;
    }

    console.log(`โ ุชู ุงูุนุซูุฑ ุนูู ${products.length} ููุชุฌ\n`);

    // ุฌูุจ ุฃู ุฅูุดุงุก ูุณุชุฎุฏู ูููู ููุชููููุงุช
    let reviewUser = await prisma.user.findFirst({
      where: { email: 'reviews@remostore.net' },
    });

    if (!reviewUser) {
      reviewUser = await prisma.user.create({
        data: {
          email: 'reviews@remostore.net',
          name: 'ุนููู ูุชุฌุฑ ุฑููู',
          role: 'CUSTOMER',
        },
      });
      console.log('โ ุชู ุฅูุดุงุก ูุณุชุฎุฏู ุงูุชููููุงุช\n');
    }

    let totalReviews = 0;

    // ุฅุถุงูุฉ ุชููููุงุช ููู ููุชุฌ
    for (const product of products) {
      const reviewsCount = getRandomInt(3, 6); // ูู 3 ุฅูู 6 ุชููููุงุช ููู ููุชุฌ
      const usedNames = new Set<string>();

      console.log(`๐ ุฅุถุงูุฉ ${reviewsCount} ุชูููู ููููุชุฌ: ${product.nameAr || product.name}`);

      for (let i = 0; i < reviewsCount; i++) {
        // ุงูุชุฃูุฏ ูู ุนุฏู ุชูุฑุงุฑ ุงูุฃุณูุงุก ููููุชุฌ ุงููุงุญุฏ
        let name = getRandomName();
        while (usedNames.has(name)) {
          name = getRandomName();
        }
        usedNames.add(name);

        const rating = getRandomRating();
        const comment = getRandomComment();

        await prisma.review.create({
          data: {
            productId: product.id,
            userId: reviewUser.id,
            rating,
            comment: `${name}: ${rating}โญ - "${comment}"`,
            isApproved: true,
            pointsAwarded: 5,
          },
        });

        console.log(`   โ ${name}: ${rating}โญ - "${comment.substring(0, 50)}..."`);
        totalReviews++;
      }

      console.log('');
    }

    console.log(`\n๐ ุชู ุฅุถุงูุฉ ${totalReviews} ุชูููู ุจูุฌุงุญ!`);
    console.log(`๐ ูู ${products.length} ููุชุฌ`);
    console.log(`๐ฅ ุจุฃุณูุงุก ูุตุฑูุฉ ูุชููุนุฉ ููุฎุชููุฉ\n`);

  } catch (error) {
    console.error('โ ุญุฏุซ ุฎุทุฃ:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

main()
  .catch((e) => {
    console.error(e);
    process.exit(1);
  });
