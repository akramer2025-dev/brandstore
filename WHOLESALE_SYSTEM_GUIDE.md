# ๐ผ ูุธุงู ุงูุจูุน ุจุงูุฌููุฉ ููุดุฑูุงุก - ุฏููู ุงูุงุณุชุฎุฏุงู ุงููุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุชูุงูู ููุจูุน ุจุงูุฌููุฉ ูุชูุญ ููุดุฑูุงุก ุดุฑุงุก ุงูููุชุฌุงุช ุจุฃุณุนุงุฑ ูุฎูุถุฉ (ุฎุตู 20%) ุนูุฏ ุงูุดุฑุงุก ุจูููุงุช ูุจูุฑุฉ.

---

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฅุถุงูุฉ ุญูู `wholesalePrice` (ุณุนุฑ ุงูุฌููุฉ) ูุฌุฏูู ุงูููุชุฌุงุช
- โ ุฅุถุงูุฉ ุญูู `minWholesaleQuantity` (ุงูุญุฏ ุงูุฃุฏูู ููุดุฑุงุก ุจุงูุฌููุฉ - ุงูุชุฑุงุถู: 6 ูุทุน)
- โ ุชุญุฏูุซ 77 ููุชุฌ ุจุฃุณุนุงุฑ ุฌููุฉ ุชููุงุฆูุฉ (80% ูู ุณุนุฑ ุงููุทุนุฉ)

### 2. ุตูุงุญูุงุช ุงูุดุฑูุงุก
- โ ุฅุถุงูุฉ ุตูุงุญูุฉ `canSellWholesale` ูู `partnerStaffPermissions` (JSON field)
- โ ุฅูุดุงุก ุดุฑูู ุชุฌุฑูุจู ูุน ุงูุตูุงุญูุฉ ุงูููุนููุฉ

### 3. ุงูุณูุฑูุจุชุงุช ุงููุณุงุนุฏุฉ
- โ `update-wholesale-prices.ts` - ุชุญุฏูุซ ุฃุณุนุงุฑ ุงูุฌููุฉ ููู ุงูููุชุฌุงุช
- โ `activate-wholesale-for-partners.ts` - ุชูุนูู ุงูุตูุงุญูุฉ ููุดุฑูุงุก ุงูููุฌูุฏูู
- โ `create-demo-partner.ts` - ุฅูุดุงุก ุดุฑูู ุชุฌุฑูุจู ููุงุฎุชุจุงุฑ

---

## ๐ค ุญุณุงุจ ุงูุดุฑูู ุงูุชุฌุฑูุจู

### ูุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู:
```
ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: partner@remostore.net
ูููุฉ ุงููุฑูุฑ: partner123
```

### ุงูุตูุงุญูุงุช:
- โ ุงูุจูุน ุจุณุนุฑ ุงูุฌููุฉ (ุฎุตู 20%)
- โ ุงูุญุฏ ุงูุฃุฏูู ููุดุฑุงุก: 6 ูุทุน ูู ูู ููุชุฌ
- โ ูุดุงูุฏุฉ ุงูุชูุงุฑูุฑ ูุงูุฃุฑุจุงุญ
- โ ุฑุฃุณ ูุงู: 50,000 ุฌููู
- โ ูุณุจุฉ ุงููุณุงููุฉ: 30%

---

## ๐ฐ ููู ูุนูู ุงููุธุงูุ

### ููุนููุงุก ุงูุนุงุฏููู:
1. ูุดุชุฑูู ุจุงูุณุนุฑ ุงูุนุงุฏู (ุณุนุฑ ุงููุทุนุฉ)
2. ูููููู ุดุฑุงุก ุฃู ูููุฉ (1 ูุทุนุฉ ุฃู ุฃูุซุฑ)
3. ูุซุงู: ููุชุฌ ุจู 100 ุฌููู = ูุฏูุน 100 ุฌููู

### ููุดุฑูุงุก (Wholesale):
1. ูุดุชุฑูู ุจุณุนุฑ ุงูุฌููุฉ (ุฎุตู 20%)
2. ุงูุญุฏ ุงูุฃุฏูู: 6 ูุทุน ูู ูู ููุชุฌ
3. ูุซุงู: ููุชุฌ ุณุนุฑู 100 ุฌููู:
   - ุณุนุฑ ุงูุฌููุฉ: 80 ุฌููู
   - ุนูุฏ ุดุฑุงุก 10 ูุทุน: 800 ุฌููู ุจุฏูุงู ูู 1000 ุฌููู
   - ุงูููุฑ: 200 ุฌููู
   - ูููู ุจูุนูุง ุจู 100 ุฌููู ูููุทุนุฉ
   - **ุงูุฑุจุญ ุงูุฅุฌูุงูู: 200 ุฌููู**

---

## ๐ ุฅุญุตุงุฆูุงุช ุงููุธุงู

### ุงูููุชุฌุงุช ุงููุชุงุญุฉ:
- **77 ููุชุฌ** ูุชุงุญ ููุจูุน ุจุงูุฌููุฉ
- **ูุชูุณุท ุงูุณุนุฑ ุงูุนุงุฏู:** 2,355 ุฌููู
- **ูุชูุณุท ุณุนุฑ ุงูุฌููุฉ:** 1,884 ุฌููู
- **ูุชูุณุท ุงูุฎุตู:** 20% (471 ุฌููู)

### ุฃูุซูุฉ ุนูู ุงูููุชุฌุงุช:

| ุงูููุชุฌ | ุณุนุฑ ุงููุทุนุฉ | ุณุนุฑ ุงูุฌููุฉ | ุงูููุฑ/ูุทุนุฉ | ุฑุจุญ ุนูู 10 ูุทุน |
|--------|------------|-----------|-----------|----------------|
| ุฌูุงุจูุฉ ูุทููุฉ | 500 ุฌ | 400 ุฌ | 100 ุฌ | 1,000 ุฌ |
| ุงุณุฏุงู | 380 ุฌ | 304 ุฌ | 76 ุฌ | 760 ุฌ |
| ุจุฑูุงู | 185 ุฌ | 148 ุฌ | 37 ุฌ | 370 ุฌ |
| ุณูุณูุฉ ุงุณุชุงููุณ | 60 ุฌ | 48 ุฌ | 12 ุฌ | 120 ุฌ |
| ุฑูุฌ ูุท | 35 ุฌ | 28 ุฌ | 7 ุฌ | 70 ุฌ |

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุฎุทูุงุช ุงูุจูุน ููุดุฑูู:

1. **ุชุณุฌูู ุงูุฏุฎูู:**
   ```
   https://www.remostore.net/auth/signin
   Email: partner@remostore.net
   Password: partner123
   ```

2. **ุงุฎุชูุงุฑ ุงูููุชุฌุงุช:**
   - ุชุตูุญ ุงูููุชุฌุงุช ุงููุชุงุญุฉ
   - ุณุชุธูุฑ ููุดุฑูู ุงูุฃุณุนุงุฑ ุจุดูู ุชููุงุฆู:
     - ุณุนุฑ ุงููุทุนุฉ (ููุนููุงุก)
     - ุณุนุฑ ุงูุฌููุฉ (ููุดุฑูู)

3. **ุฅุถุงูุฉ ููุณูุฉ:**
   - ุงุฎุชุฑ ุงููููุฉ (ูุฌุจ ุฃู ุชููู 6 ุฃู ุฃูุซุฑ)
   - ุณูุชู ุชุทุจูู ุณุนุฑ ุงูุฌููุฉ ุชููุงุฆูุงู
   - ุฅุฐุง ูุงูุช ุงููููุฉ ุฃูู ูู 6ุ ุณูุธูุฑ ุชูุจูู

4. **ุฅุชูุงู ุงูุทูุจ:**
   - ุฑุงุฌุน ุงูุณูุฉ
   - ุชุฃูุฏ ูู ุงูุฃุณุนุงุฑ ูุงููููุงุช
   - ุฃููู ุนูููุฉ ุงูุดุฑุงุก

5. **ุงูุจูุน ููุนููุงุก:**
   - ุจูุน ุงูููุชุฌุงุช ููุนููุงุก ุจุงูุณุนุฑ ุงูุนุงุฏู
   - ุงุญุชูุธ ุจุงููุฑู ูุฑุจุญ

---

## ๐๏ธ ุงูุชุทุจูู ุงูุชููู (ูููุทูุฑูู)

### 1. ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

```prisma
model Product {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  price              Float      // ุณุนุฑ ุงููุทุนุฉ ุงูุนุงุฏู
  wholesalePrice     Float?     // ุณุนุฑ ุงูุฌููุฉ (80% ูู ุงูุณุนุฑ ุงูุนุงุฏู)
  minWholesaleQuantity Int @default(6) // ุงูุญุฏ ุงูุฃุฏูู ููุดุฑุงุก ุจุงูุฌููุฉ
  // ... ุจุงูู ุงูุญููู
}

model User {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  partnerId          String?    // ูุนุฑู ุงูุดุฑูู
  partnerStaffPermissions Json? // ุตูุงุญูุงุช ุงูุดุฑูู:
  // {
  //   "canSellWholesale": true,
  //   "wholesaleMinQuantity": 6,
  //   "canViewReports": true
  // }
  // ... ุจุงูู ุงูุญููู
}
```

### 2. ููุทู ุงูุณุนุฑ (Price Logic)

```typescript
// ูู API ุฃู Component
function getProductPrice(product, user, quantity) {
  // ุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู
  const isPartner = user?.partnerId && 
                    user?.partnerStaffPermissions?.canSellWholesale;
  
  // ุชุญูู ูู ุงููููุฉ
  const meetsMinQuantity = quantity >= (product.minWholesaleQuantity || 6);
  
  // ุญุฏุฏ ุงูุณุนุฑ ุงูููุงุณุจ
  if (isPartner && meetsMinQuantity && product.wholesalePrice) {
    return product.wholesalePrice; // ุณุนุฑ ุงูุฌููุฉ
  }
  
  return product.price; // ุณุนุฑ ุงููุทุนุฉ ุงูุนุงุฏู
}
```

### 3. ุชุนุฏููุงุช ูุทููุจุฉ ูู ุงูููุฏ

#### ุฃ) API ุงูููุชุฌุงุช (`/api/products/[id]`)
```typescript
// ุฅุถุงูุฉ ูุนูููุงุช ุงูุณุนุฑ ููู Response
{
  ...product,
  displayPrice: getProductPrice(product, session.user, quantity),
  isWholesaleEligible: session.user?.partnerStaffPermissions?.canSellWholesale,
  wholesalePrice: product.wholesalePrice,
  minWholesaleQuantity: product.minWholesaleQuantity,
}
```

#### ุจ) ุตูุญุฉ ุงูููุชุฌ (`/products/[id]`)
```tsx
// ุนุฑุถ ุงูุณุนุฑ ุงูููุงุณุจ
{user?.partnerStaffPermissions?.canSellWholesale && product.wholesalePrice ? (
  <div className="space-y-2">
    <div className="text-sm text-gray-500 line-through">
      ุณุนุฑ ุงููุทุนุฉ: {product.price} ุฌููู
    </div>
    <div className="text-2xl font-bold text-green-600">
      ุณุนุฑ ุงูุฌููุฉ: {product.wholesalePrice} ุฌููู
    </div>
    <div className="text-xs text-gray-600">
      ุงูุญุฏ ุงูุฃุฏูู: {product.minWholesaleQuantity} ูุทุน
    </div>
  </div>
) : (
  <div className="text-2xl font-bold">
    {product.price} ุฌููู
  </div>
)}
```

#### ุฌ) ุงูุณูุฉ (`/cart`)
```typescript
// ุญุณุงุจ ุงูุณุนุฑ ุงูุฅุฌูุงูู
const calculateTotal = (cartItems, user) => {
  return cartItems.reduce((total, item) => {
    const price = getProductPrice(item.product, user, item.quantity);
    return total + (price * item.quantity);
  }, 0);
};
```

---

## ๐ SQL Queries ุงููููุฏุฉ

### ุนุฑุถ ุฌููุน ุงูุดุฑูุงุก:
```sql
SELECT 
  u.name,
  u.email,
  pc.partnerName,
  pc.capitalAmount,
  u."partnerStaffPermissions"
FROM users u
JOIN partner_capitals pc ON u."partnerId" = pc.id
WHERE u."partnerId" IS NOT NULL;
```

### ุนุฑุถ ุงูููุชุฌุงุช ุจุฃุณุนุงุฑ ุงูุฌููุฉ:
```sql
SELECT 
  "nameAr",
  price as "ุณุนุฑ_ุงููุทุนุฉ",
  "wholesalePrice" as "ุณุนุฑ_ุงูุฌููุฉ",
  (price - "wholesalePrice") as "ุงูููุฑ",
  "minWholesaleQuantity" as "ุงูุญุฏ_ุงูุฃุฏูู"
FROM products
WHERE "wholesalePrice" IS NOT NULL
ORDER BY (price - "wholesalePrice") DESC
LIMIT 10;
```

### ุฅุญุตุงุฆูุงุช ุงูุฃุฑุจุงุญ ุงููุญุชููุฉ:
```sql
SELECT 
  AVG(price - "wholesalePrice") as "ูุชูุณุท_ุงูุฑุจุญ_ูููุทุนุฉ",
  SUM(price - "wholesalePrice") as "ุฅุฌูุงูู_ุงูุฑุจุญ_ุงููุญุชูู",
  COUNT(*) as "ุนุฏุฏ_ุงูููุชุฌุงุช"
FROM products
WHERE "wholesalePrice" IS NOT NULL;
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุชุฑุญุฉ

### ููุฒุงุช ุฅุถุงููุฉ ูููู ุฅุถุงูุชูุง:

1. **ุชูุงุฑูุฑ ุงูุดุฑูุงุก:**
   - ุตูุญุฉ dashboard ููุดุฑูู
   - ุนุฑุถ ุงููุจูุนุงุช ูุงูุฃุฑุจุงุญ
   - ุชุชุจุน ุงููุฎุฒูู

2. **ุฏุฑุฌุงุช ุงูุดุฑูุงุก:**
   - ุดุฑูู ุจุฑููุฒู: 6 ูุทุน (ุฎุตู 20%)
   - ุดุฑูู ูุถู: 12 ูุทุนุฉ (ุฎุตู 25%)
   - ุดุฑูู ุฐูุจู: 24 ูุทุนุฉ (ุฎุตู 30%)

3. **ุทูุจุงุช ุงูุดุฑูุงุก ุงููุฎุตุตุฉ:**
   - ุทูุจ ูููุงุช ูุจูุฑุฉ ูุฎุตุตุฉ
   - ุชูุงูุถ ุนูู ุงูุฃุณุนุงุฑ
   - ุฎุตููุงุช ููุณููุฉ

4. **ูุธุงู ุงูุนูููุงุช:**
   - ุญุณุงุจ ุนูููุฉ ุชููุงุฆูุฉ ููุดุฑูู ุนูู ูู ุจูุน
   - ุชุญููู ุงูุฃุฑุจุงุญ ุดูุฑูุงู
   - ุชูุงุฑูุฑ ูุงููุฉ ููุตูุฉ

---

## ๐ฏ ููุฎุต ุณุฑูุน

| ุงูุนูุตุฑ | ุงูุชูุงุตูู |
|--------|---------|
| **ุงููุฏู** | ุชูููู ุงูุดุฑูุงุก ูู ุงูุจูุน ุจุฃุณุนุงุฑ ุฌููุฉ ูุฎูุถุฉ |
| **ุงูุฎุตู** | 20% (ูุงุจู ููุชุฎุตูุต) |
| **ุงูุญุฏ ุงูุฃุฏูู** | 6 ูุทุน ููู ููุชุฌ |
| **ุนุฏุฏ ุงูููุชุฌุงุช** | 77 ููุชุฌ ูุชุงุญ |
| **ุงูุดุฑูู ุงูุชุฌุฑูุจู** | partner@remostore.net / partner123 |
| **ูุชูุณุท ุงูุฑุจุญ** | 471 ุฌููู ููู ููุชุฌ (ูู ุงููุชูุณุท) |

---

## โ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ (FAQ)

**ุณ: ูู ูููู ููุดุฑูู ุงูุดุฑุงุก ุจูููุฉ ุฃูู ูู 6ุ**  
ุฌ: ูุนูุ ููู ุณูุฏูุน ุณุนุฑ ุงููุทุนุฉ ุงูุนุงุฏู.

**ุณ: ููู ูุชู ุญุณุงุจ ุณุนุฑ ุงูุฌููุฉุ**  
ุฌ: ุชููุงุฆูุงู 80% ูู ุณุนุฑ ุงููุทุนุฉุ ููููู ุชุฎุตูุตู ููู ููุชุฌ.

**ุณ: ูู ูููู ููุดุฑูู ุฑุคูุฉ ุฃุณุนุงุฑ ุงูุฌููุฉ ูุจู ุชุณุฌูู ุงูุฏุฎููุ**  
ุฌ: ูุงุ ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจ ุดุฑูู ูุฑุคูุฉ ุฃุณุนุงุฑ ุงูุฌููุฉ.

**ุณ: ููู ุฃุถูู ุดุฑูู ุฌุฏูุฏุ**  
ุฌ: ุงุณุชุฎุฏู ุณูุฑูุจุช `create-demo-partner.ts` ุฃู ูู ููุญุฉ ุงูุชุญูู.

**ุณ: ูู ูููู ุชุฎุตูุต ุงูุฎุตู ููู ุดุฑููุ**  
ุฌ: ุญุงููุงู ุงูุฎุตู ููุญุฏ (20%)ุ ููู ูููู ุชุทููุฑู ูุงุญูุงู.

---

## ๐ ุงูุฏุนู ุงูููู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ๐ง Email: support@remostore.net
- ๐ฑ WhatsApp: [ุฑูู ุงูุฏุนู]
- ๐ ุงููููุน: https://www.remostore.net

---

**ุชู ุงูุชุญุฏูุซ:** 19 ูุจุฑุงูุฑ 2026  
**ุงูุฅุตุฏุงุฑ:** 1.0.0
