import { NextRequest, NextResponse } from "next/server";
import { auth } from "@/lib/auth";

export async function POST(req: NextRequest) {
  try {
    const session = await auth();

    if (!session || session.user?.role !== "ADMIN") {
      return NextResponse.json({ error: "ุบูุฑ ูุตุฑุญ" }, { status: 401 });
    }

    const { type, campaigns, analytics, orders, metrics } = await req.json();

    let analysis = "";

    switch (type) {
      case "optimize_roas":
        analysis = optimizeROAS(campaigns, metrics);
        break;
      case "reduce_cpa":
        analysis = reduceCPA(campaigns, metrics);
        break;
      case "increase_conversion":
        analysis = increaseConversion(campaigns, metrics);
        break;
      case "better_targeting":
        analysis = betterTargeting(campaigns);
        break;
      case "creative_analysis":
        analysis = creativeAnalysis(campaigns);
        break;
      case "scaling_plan":
        analysis = scalingPlan(campaigns, metrics);
        break;
      default:
        analysis = "ููุน ุงูุชุญููู ุบูุฑ ูุนุฑูู";
    }

    return NextResponse.json({ analysis });
  } catch (error) {
    console.error("Media Buyer AI Analysis Error:", error);
    return NextResponse.json({ error: "ูุดู ุงูุชุญููู" }, { status: 500 });
  }
}

function optimizeROAS(campaigns: any[], metrics: any) {
  const currentROAS = metrics.roas;
  const topCampaigns = campaigns.filter(c => c.roi >= 200).sort((a, b) => b.roi - a.roi);
  const poorCampaigns = campaigns.filter(c => c.roi < 100);

  return `๐ฏ **ุงุณุชุฑุงุชูุฌูุฉ ุชุญุณูู ROAS**

๐ **ุงููุถุน ุงูุญุงูู:**
- ROAS ุงูุญุงูู: ${currentROAS.toFixed(2)}x
${currentROAS < 2 ? "- โ๏ธ ุฃูู ูู ุงููุณุชูู ุงููุทููุจ (ุงููุฏู: 3x+)" : ""}
${currentROAS >= 3 ? "- โ ุฃุฏุงุก ููุชุงุฒ! ุงุณุชูุฑ ูุทููุฑ" : ""}

๐ **ุฎุทุฉ ุงูุชุญุณูู (5 ุฎุทูุงุช):**

**1๏ธโฃ ุฃุนุฏ ุชูุฒูุน ุงูููุฒุงููุฉ ููุฑุงู:**
${topCampaigns.length > 0 ? `
โ ุญููุงุช ุนุงููุฉ ุงูุฃุฏุงุก (ROI 200%+):
${topCampaigns.slice(0, 3).map((c, i) => `
   ${i + 1}. "${c.name}": ROI ${c.roi.toFixed(0)}%
      โ ุฒูุฏ ุงูููุฒุงููุฉ ูู ${c.budget.toFixed(0)} ุฌ ุฅูู ${(c.budget * 1.5).toFixed(0)} ุฌ
      โ ุนุงุฆุฏ ูุชููุน: ${((c.budget * 1.5) * (c.roi / 100)).toFixed(0)} ุฌ`).join('\n')}
` : ""}

${poorCampaigns.length > 0 ? `
โ ุญููุงุช ุถุนููุฉ (ROI < 100%):
${poorCampaigns.map(c => `   - "${c.name}": ROI ${c.roi.toFixed(0)}% โ ุฃููููุง ููุฑุงู`).join('\n')}
   โ ูููุฑ ${poorCampaigns.reduce((sum, c) => sum + c.budget, 0).toFixed(0)} ุฌ ูู ุงูููุฒุงููุฉ ุงูููุฏุฑุฉ
` : ""}

**2๏ธโฃ ุญุณูู Audience Targeting:**
- ุงุณุชุฎุฏู **Lookalike Audiences** ูู ุฃูุถู 1% ูู ุนููุงุฆู
- ุงุณุชุจุนุฏ:
  โข ูู ุงุดุชุฑู ุฎูุงู ุขุฎุฑ 30 ููู (ูุง ุฏุงุนู ูุงุณุชูุฏุงููู)
  โข ุงููุฆุงุช ุงูุนูุฑูุฉ ุฐุงุช ROAS ุฃูู ูู 2x
  โข ุงูููุงุทู ุงูุฌุบุฑุงููุฉ ุถุนููุฉ ุงูุฃุฏุงุก

**3๏ธโฃ ุงุณุชุฎุฏู Bid Strategies ุงูุฐููุฉ:**
- Facebook: Target ROAS (ุงุถุจุทู ุนูู ${(currentROAS * 1.3).toFixed(1)}x)
- Google: Maximize Conversion Value
- TikTok: Cost Cap Bidding

**4๏ธโฃ ุญุณูู Landing Page:**
- ุณุฑุนุฉ ุงูุชุญููู ุฃูู ูู 2 ุซุงููุฉ
- ุฒุฑ "ุงุดุชุฑู ุงูุขู" ูุงุถุญ ูุจุงุฑุฒ
- Trust Signals (ูุฑุงุฌุนุงุชุ ุดูุงุฏุงุชุ ุถูุงู ุงูุงุณุชุฑุฌุงุน)
- One-Click Checkout
- ุนุฑุถ ูุงุถุญ: "ูููุฑ 500 ุฌ" ุฃูุถู ูู "ุฎุตู 30%"

**5๏ธโฃ ุงุณุชุฑุงุชูุฌูุฉ Retargeting:**
- ุงุณุชูุฏู ูู ุฃุถุงู ููุณูุฉ ููู ูุดุชุฑู (ROAS 4-6x ูุชููุน)
- ุงุณุชูุฏู ูู ุดุงูุฏ ุงูููุชุฌ (ROAS 3-4x ูุชููุน)
- Dynamic Product Ads ุชุนุฑุถ ุงูููุชุฌ ุงูุฐู ุดุงูุฏู

๐ **ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุฒูุงุฏุฉ ROAS ูู ${currentROAS.toFixed(2)}x ุฅูู ${(currentROAS * 1.5).toFixed(2)}x
- ุชูููุฑ 20-30% ูู ุงูููุฒุงููุฉ ุงูููุฏุฑุฉ
- ุฒูุงุฏุฉ ุงูุฅูุฑุงุฏุงุช ุจูุณุจุฉ 40-60%

โฑ๏ธ **ุงูุฌุฏูู ุงูุฒููู:**
- ุงูุฃุณุจูุน 1: ุฃุนุฏ ุชูุฒูุน ุงูููุฒุงููุฉ + ุฃููู ุงูุญููุงุช ุงูุถุนููุฉ
- ุงูุฃุณุจูุน 2: ูุนูู Lookalike Audiences + ุญุณูู Landing Page
- ุงูุฃุณุจูุน 3-4: ููุณ ุงููุชุงุฆุฌ ูุทููุฑ

๐ก **ูุตูุญุฉ ุฐูุจูุฉ:**
ุฑูุฒ 80% ูู ุงูููุฒุงููุฉ ุนูู ุงูุญููุงุช ุงูุชู ุชุญูู ROAS 3x+ุ ู20% ููุชุฌุฑุจุฉ ูุงูุงุฎุชุจุงุฑ`;
}

function reduceCPA(campaigns: any[], metrics: any) {
  const currentCPA = metrics.cpa;

  return `๐ฐ **ุฎุทุฉ ุชูููู CPA (ุชูููุฉ ุงูุงูุชุณุงุจ)**

๐ **ุงููุถุน ุงูุญุงูู:**
- CPA ุงูุญุงูู: ${currentCPA.toFixed(0)} ุฌ
- ุงููุฏู: ${(currentCPA * 0.7).toFixed(0)} ุฌ (ุชุฎููุถ 30%)

๐ฏ **ุงุณุชุฑุงุชูุฌูุฉ 7 ุฎุทูุงุช:**

**1๏ธโฃ ุญุณูู Quality Score (Google Ads):**
- ุงุณุชุฎุฏู ูููุงุช ููุชุงุญูุฉ ูุญุฏุฏุฉ ุฌุฏุงู
- ุงุฌุนู ุงูุฅุนูุงู ูุทุงุจู ุงููููุฉ ุงูููุชุงุญูุฉ 100%
- ุญุณูู CTR (ูู 1% ุฒูุงุฏุฉ = 10% ุชูููู CPC)
- Landing Page ุณุฑูุนุฉ ูุฐุงุช ุตูุฉ

**2๏ธโฃ ุงุณุชูุฏู "Warm Audiences" ุฃููุงู:**
ุญุณุจ ุงูุชูููุฉ (ูู ุงูุฃุฑุฎุต ููุฃุบูู):
1. ๐ฅ ูู ุฃุถุงู ููุณูุฉ (CPA: ${(currentCPA * 0.3).toFixed(0)} ุฌ)
2. ๐ฅ ูู ุฒุงุฑ ุงููููุน (CPA: ${(currentCPA * 0.5).toFixed(0)} ุฌ)
3. ๐ฅ Lookalike 1% (CPA: ${(currentCPA * 0.7).toFixed(0)} ุฌ)
4. โ๏ธ Cold Audience (CPA: ${(currentCPA * 1.5).toFixed(0)} ุฌ)

**3๏ธโฃ ุงุณุชุฎุฏู ุงูุงุณุชุจุนุงุฏุงุช (Exclusions):**
- ูู ุงุดุชุฑู ุฎูุงู ุขุฎุฑ 30 ููู
- ุงูููุงูุน ุฐุงุช ุฌูุฏุฉ ููุฎูุถุฉ
- ุงููููุงุช ุงูุณูุจูุฉ (ูุซู: "ูุฌุงูู"ุ "ุชูุฒูู")
- Placements ุถุนููุฉ ุงูุฃุฏุงุก

**4๏ธโฃ ุญุณูู ููุช ุงููุดุฑ:**
- ุฑูุฒ 60% ูู ุงูููุฒุงููุฉ ูู ุงูุฃููุงุช ุงูุฐูุจูุฉ (4-11 ูุณุงุกู)
- ููู ุงูุฅููุงู ูู ุฃููุงุช CPA ุงููุฑุชูุน (12-6 ุตุจุงุญุงู)

**5๏ธโฃ A/B Test ุงูุนูุงููู:**
โ ุณูุก: "ุชุณูู ุงูุขู"
โ ุฌูุฏ: "ููุฑ 500 ุฌ ุงูููู ููุท!"

ุงูุนูุงููู ุงูุฌูุฏุฉ ุชุฒูุฏ CTR ุจูุณุจุฉ 40% = ุชูููู CPA ุจูุณุจุฉ 25%

**6๏ธโฃ ุงุณุชุฎุฏู Offers ูููุฉ:**
ุจุฏูุงู ูู: "ุฎุตู 20%"
ุงุณุชุฎุฏู:
- "ุงุดุชุฑู 2 ูุงุญุตู ุนูู ุงูุซุงูุซ ูุฌุงูุงู"
- "ุดุญู ูุฌุงูู + ูุฏูุฉ"
- "ุถูุงู ุงุณุชุฑุฌุงุน ุงููุงู 30 ููู"

**7๏ธโฃ ุญุณูู Checkout Flow:**
ูู ุฎุทูุฉ ุฅุถุงููุฉ = ุฎุณุงุฑุฉ 20% ูู ุงูุนููุงุก
- One-Click Checkout
- Guest Checkout (ุจุฏูู ุชุณุฌูู)
- Auto-fill ุงูุนููุงู
- ุฎูุงุฑุงุช ุฏูุน ูุชุนุฏุฏุฉ

๐ **ูุซุงู ุนููู:**
ุงููุถุน ุงูุญุงูู:
- 1000 ููุฑุฉ ร 10 ุฌ CPC = 10,000 ุฌ
- 50 ุชุญููู
- CPA = 200 ุฌ

ุจุนุฏ ุงูุชุญุณูู:
- 1000 ููุฑุฉ ร 7 ุฌ CPC = 7,000 ุฌ (ุจุณุจุจ Quality Score)
- 70 ุชุญููู (ุจุณุจุจ Landing Page ุฃูุถู)
- CPA = 100 ุฌ โ

๐ฐ **ุงูุชูููุฑ:**
- ุชูููุฑ 3,000 ุฌ ูู ุงูุฅููุงู
- ุฒูุงุฏุฉ 20 ุชุญููู ุฅุถุงูู
- ุชุญุณูู ROI ูู 150% ุฅูู 300%

โฑ๏ธ **ุงุจุฏุฃ ููุฑุงู:**
ุงูููู โ ูุนูู Retargeting + ุงุณุชุจุนุฏ ูู ุงุดุชุฑู
ุบุฏุงู โ ุญุณูู ุงูุนูุงููู + Quality Score
ุงูุฃุณุจูุน ุงููุงุฏู โ ููุณ ุงููุชุงุฆุฌ`;
}

function increaseConversion(campaigns: any[], metrics: any) {
  const currentConversionRate = metrics.conversionRate;

  return `๐ฏ **ุฒูุงุฏุฉ ูุนุฏู ุงูุชุญููู ูู ${currentConversionRate.toFixed(2)}% ุฅูู ${(currentConversionRate * 2).toFixed(2)}%**

๐ **ุฎุทุฉ ูุถุงุนูุฉ ุงูุชุญูููุงุช:**

**๐ ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ:**
ุงูุชุญููู = ุงูุซูุฉ ร ุงูุงุณุชุนุฌุงู ร ุณูููุฉ ุงูุดุฑุงุก

---

**1๏ธโฃ ุจูุงุก ุงูุซูุฉ (Trust Building):**

โ **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:**
- ุนุฏุฏ ูุงุถุญ ููุนููุงุก: "ุงูุถู ุฅูู 10,000+ ุนููู ุฑุงุถู"
- ุดุนุงุฑุงุช ุงูุฏูุน ุงูุขูู (Visa, Mastercard, PayPal)
- "ุดุญู ุขูู" + "ุถูุงู ุงูุงุณุชุฑุฌุงุน"

โ **ุตูุญุฉ ุงูููุชุฌ:**
- โญโญโญโญโญ (4.8/5) ูุน ุนุฏุฏ ุงููุฑุงุฌุนุงุช
- ุตูุฑ ุญููููุฉ ูู ุงูุนููุงุก
- ุดูุงุฏุงุช ูุตูุฑุฉ ุจุงูููุฏูู
- "ุชู ุดุฑุงุก 150 ูุทุนุฉ ูุฐุง ุงูุฃุณุจูุน"

---

**2๏ธโฃ ุฎูู ุงูุงุณุชุนุฌุงู (Urgency):**

๐ฅ **Countdown Timer:**
"ุงูุนุฑุถ ููุชูู ุฎูุงู: 02:45:18"

๐ฅ **Scarcity:**
"โ๏ธ ูุชุจูู 3 ูุทุน ููุท ุจูุฐุง ุงูููุงุณ!"

๐ฅ **Social Proof:**
"๐ด 5 ุฃุดุฎุงุต ูุดุงูุฏูู ูุฐุง ุงูููุชุฌ ุงูุขู"

---

**3๏ธโฃ ุชุณููู ุงูุดุฑุงุก:**

โ **Checkout ุจุฎุทูุฉ ูุงุญุฏุฉ:**
ุจุฏูุงู ูู: ูุนูููุงุชู โ ุนููุงูู โ ุงูุฏูุน
ุงุณุชุฎุฏู: ูู ุดูุก ูู ุตูุญุฉ ูุงุญุฏุฉ

โ **Guest Checkout:**
"ุดุฑุงุก ุณุฑูุน ุจุฏูู ุชุณุฌูู"

โ **Auto-Fill:**
ุงููุฃ ุงูุนููุงู ุชููุงุฆูุงู ูู ุงูููุจุงูู

โ **ุฎูุงุฑุงุช ุฏูุน ูุชุนุฏุฏุฉ:**
- ุจุทุงูุฉ ุงุฆุชูุงู
- ููุฏุงููู ูุงุด
- ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู
- ุชูุณูุท (ุฅู ุฃููู)

---

**4๏ธโฃ ุชุญุณูู ุตูุญุฉ ุงูููุชุฌ:**

โ **ุฎุทุฃ ุดุงุฆุน:**
ูุตู ููู: "ูุณุชุงู ูุทูุ ูุชููุฑ ุจุนุฏุฉ ุฃููุงู"

โ **ุงูุตุญ:**
"๐ ุฃููู ููุฑูุญ ุทูุงู ุงูููู
โจ ููุงุด ูุทู ูุงุฎุฑ 100%
๐จ 3 ุฃููุงู ุนุตุฑูุฉ (ุฃุณูุฏุ ุฃุฒุฑูุ ุจูุฌ)
๐ ููุงุณุจ ููุนูู ูุงูููุงุณุจุงุช
๐ฆ ุชูุตูู ุณุฑูุน ุฎูุงู 24 ุณุงุนุฉ
โป๏ธ ุณูู ุงูุบุณู ูุงููู"

---

**5๏ธโฃ ุงุณุชุฎุฏู Exit-Intent Popup:**

ุนูุฏูุง ูุญุฑู ุงููุงูุณ ููุฎุฑูุฌ:
"โ๏ธ ุงูุชุธุฑ! ุฎุฐ ุฎุตู 10% ุฅุถุงูู
ุงุณุชุฎุฏู ููุฏ: STAY10
ููุชูู ุฎูุงู 15 ุฏูููุฉ โฐ"

ูุนุฏู ูุฌุงุญ: 5-10% ูู ุงูุฒูุงุฑ ุงููุบุงุฏุฑูู

---

**6๏ธโฃ ุญุณูู ุตูุฑ ุงูููุชุฌ:**

โ 5-7 ุตูุฑ ุนูู ุงูุฃูู:
1. ุตูุฑุฉ ุฑุฆูุณูุฉ ุงุญุชุฑุงููุฉ
2. ุดุฎุต ูุฑุชุฏู/ูุณุชุฎุฏู ุงูููุชุฌ
3. ุชูุงุตูู ุงูููุงุด/ุงูุฎุงูุฉ
4. ุฌููุน ุงูุฒูุงูุง
5. ุงูููุงุณุงุช (Size Chart)

โ ููุฏูู 15-30 ุซุงููุฉ ูุนุฑุถ ุงูููุชุฌ
โ ูุฒูุฏ ุงูุชุญููู ุจูุณุจุฉ 80%!

---

**7๏ธโฃ ุงุณุชุฎุฏู Live Chat:**

"๐ฌ ูู ูุฏูู ุณุคุงูุ ูุญู ููุง ูููุณุงุนุฏุฉ"

ุงูุฅุญุตุงุฆูุงุช:
- 38% ูู ุงูุนููุงุก ูุดุชุฑูู ุจุนุฏ Live Chat
- ูุฒูุฏ ุงููููุฉ ุงูุดุฑุงุฆูุฉ ุจูุณุจุฉ 10-15%

---

**8๏ธโฃ ุนุฑูุถ ูุง ุชููุงูู:**

ุจุฏูุงู ูู: "ุฎุตู 20%"

ุฌุฑูุจ:
๐ "ุงุดุชุฑู 2 ูุงุญุตู ุนูู ุงูุซุงูุซ ูุฌุงูุงู"
๐ "ุดุญู ูุฌุงูู + ูุฏูุฉ ููุงุฌุฃุฉ"
๐ฐ "ุงุฏูุน 50% ุงูุขู ูุงูุจุงูู ุจุนุฏ ุดูุฑ"

---

**๐ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**

ุงููุถุน ุงูุญุงูู:
- 1000 ุฒุงุฆุฑ
- ${(currentConversionRate * 10).toFixed(0)} ุชุญููู (${currentConversionRate.toFixed(2)}%)

ุจุนุฏ ุงูุชุทุจูู:
- 1000 ุฒุงุฆุฑ
- ${(currentConversionRate * 20).toFixed(0)} ุชุญููู (${(currentConversionRate * 2).toFixed(2)}%)

= ูุถุงุนูุฉ ุงูุฅูุฑุงุฏุงุช ุจุฏูู ุฒูุงุฏุฉ ุงูุฅุนูุงูุงุช! ๐

---

**โฑ๏ธ ุฎุทุฉ ุงูุชูููุฐ:**

**ุงูุฃุณุจูุน 1:**
- ุฃุถู Trust Badges
- ูุนูู Exit-Intent Popup
- ุญุณูู ุตูุฑ ุงูููุชุฌ

**ุงูุฃุณุจูุน 2:**
- ุจุณูุท Checkout
- ุฃุถู Countdown Timer
- ูุนูู Live Chat

**ุงูุฃุณุจูุน 3:**
- ููุณ ุงููุชุงุฆุฌ
- A/B Test ุงูุนูุงููู
- ุญุณูู ูุง ูุง ูุนูู`;
}

function betterTargeting(campaigns: any[]) {
  return `๐ฏ **ุงุณุชุฑุงุชูุฌูุฉ ุงูุงุณุชูุฏุงู ุงูุงุญุชุฑุงูู**

๐ **ูุดููุฉ ุงูุงุณุชูุฏุงู ุงูุนุงู:**
ุงุณุชูุฏุงู "ุฌููุน ุงููุณุงุก 18-65" = ูุฏุฑ ุงููุงู!

---

**๐ ูููุฐุฌ Audience Funnel ุงูุงุญุชุฑุงูู:**

**1๏ธโฃ Hot Audiences (ุงูุฃุบูู ูููุฉุ ุงูุฃุฑุฎุต ุชูููุฉ):**

๐ฅ **Tier 1: Past Purchasers (ุงูุนููุงุก ุงูุณุงุจููู)**
- Upsell: ููุชุฌุงุช ููููุฉ
- Cross-sell: ูุฆุงุช ุฃุฎุฑู
- CPA ูุชููุน: ${campaigns.length > 0 ? (campaigns[0].spent / campaigns[0].conversions * 0.5).toFixed(0) : "50"} ุฌ

๐ฅ **Tier 2: Add to Cart (ุฃุถุงููุง ููุณูุฉ)**
- ุงุณุชูุฏููู ุฎูุงู 1-7 ุฃูุงู
- ุงุนุฑุถ ุฎุตู 10% ุฅุถุงูู
- CPA ูุชููุน: ${campaigns.length > 0 ? (campaigns[0].spent / campaigns[0].conversions * 0.7).toFixed(0) : "70"} ุฌ

๐ฅ **Tier 3: Product Viewers (ุดุงูุฏูุง ุงูููุชุฌ)**
- ุงุณุชูุฏููู ุฎูุงู 1-14 ููู
- Dynamic Ads ุชุนุฑุถ ูุง ุดุงูุฏูู
- CPA ูุชููุน: ${campaigns.length > 0 ? (campaigns[0].spent / campaigns[0].conversions * 0.9).toFixed(0) : "90"} ุฌ

---

**2๏ธโฃ Warm Audiences (ุฌูููุฑ ุฏุงูุฆ):**

๐ **Website Visitors (180 ููู)**
- ูู ุฒุงุฑ ุฃู ุตูุญุฉ
- CPA ูุชููุน: ${campaigns.length > 0 ? (campaigns[0].spent / campaigns[0].conversions * 1.2).toFixed(0) : "120"} ุฌ

๐ **Engaged Users:**
- ูู ุชูุงุนู ูุน ููุดูุฑุงุชู
- ูู ุดุงูุฏ 75%+ ูู ููุฏูููุงุชู
- CPA ูุชููุน: ${campaigns.length > 0 ? (campaigns[0].spent / campaigns[0].conversions * 1.3).toFixed(0) : "130"} ุฌ

๐ **Instagram Profile Visitors**
- ูู ุฒุงุฑ ุจุฑููุงููู
- CPA ูุชููุน: ${campaigns.length > 0 ? (campaigns[0].spent / campaigns[0].conversions * 1.4).toFixed(0) : "140"} ุฌ

---

**3๏ธโฃ Lookalike Audiences:**

๐ **LAL 1% (ุงูุฃูุถู):**
- ูู ุฃูุถู 5% ูู ุงูุนููุงุก (ุญุณุจ ุงููููุฉ)
- CPA ูุชููุน: ${campaigns.length > 0 ? (campaigns[0].spent / campaigns[0].conversions * 1.5).toFixed(0) : "150"} ุฌ

๐ **LAL 2-5%:**
- ุชูุณุน ุชุฏุฑูุฌู
- CPA ูุชููุน: ${campaigns.length > 0 ? (campaigns[0].spent / campaigns[0].conversions * 2).toFixed(0) : "200"} ุฌ

---

**4๏ธโฃ Cold Audiences (ุขุฎุฑ ุงูุญููู):**

โ๏ธ **Interest Targeting:**
- ุงูุชูุงูุงุช ูุญุฏุฏุฉ ุฌุฏุงู
- ูุซุงู: "Zara + H&M + Fashion Nova" (ูุง ุชุณุชุฎุฏู "ููุงุจุณ" ููุท!)
- CPA ูุชููุน: ${campaigns.length > 0 ? (campaigns[0].spent / campaigns[0].conversions * 2.5).toFixed(0) : "250"} ุฌ

---

**๐ฏ Exclusions (ููู ุฌุฏุงู!):**

ุงุณุชุจุนุฏ:
โ ูู ุงุดุชุฑู ุฎูุงู ุขุฎุฑ 30 ููู
โ ููุธููู ูุฃุตุฏูุงุฆู
โ ููุงุทู ูุง ุชูุตู ููุง
โ ุฃุนูุงุฑ ุถุนููุฉ ุงูุฃุฏุงุก (ุฑุงุฌุน ุงูุชุญูููุงุช)

---

**๐ ุชูุฒูุน ุงูููุฒุงููุฉ ุงูููุชุฑุญ:**

- 40% โ Hot Audiences (Retargeting)
- 30% โ Lookalike 1-3%
- 20% โ Engaged Users
- 10% โ Testing (Cold Audiences ุฌุฏูุฏุฉ)

---

**๐ Geographic Targeting:**

ุจุฏูุงู ูู: "ุฌููุน ูุตุฑ"
ุงุณุชุฎุฏู:
โ Top 5 ูุญุงูุธุงุช (ุญุณุจ ุจูุงูุงุชู):
   1. ุงููุงูุฑุฉ (40% ูู ุงูุทูุจุงุช)
   2. ุงูุฅุณููุฏุฑูุฉ (18%)
   3. ุงูุฌูุฒุฉ (15%)
   4. ุงูุฏููููุฉ (12%)
   5. ุงูุดุฑููุฉ (10%)

---

**๐ฑ Device Targeting:**

ุญุณุจ ุจูุงูุงุชู:
- 68% ููุจุงูู โ ุฑูุฒ ุนููู
- 25% Desktop โ ููุชุฌุงุช Premium
- 7% Tablet โ ููู ุงูุฅููุงู

---

**โฐ Time Targeting:**

ุฃูุถู ุงูุฃููุงุช:
๐ 4-7 ูุณุงุกู (ROAS 3.2x)
๐ 8-11 ูุณุงุกู (ROAS 2.9x)
โ 8-11 ุตุจุงุญุงู (ROAS 2.8x)

ุฃุณูุฃ ุงูุฃููุงุช:
โ๏ธ 12-6 ุตุจุงุญุงู (ROAS 1.5x) โ ููู ุงูููุฒุงููุฉ 70%

---

**๐ก Pro Tips:**

1. **Segment ุจุงูุณูููุ ููุณ Demographics:**
   "ูู ุงุดุชุฑู ูุณุงุชูู > 500 ุฌ" ุฃูุถู ูู "ูุณุงุก 25-35"

2. **Test Narrow vs Broad:**
   ุฌุฑุจ ุงุณุชูุฏุงู ุถูู ุฌุฏุงู vs Advantage+ (Facebook ูุฎุชุงุฑ)

3. **Update ูู ุฃุณุจูุน:**
   ุฃุถู Top 5% ูู ุงูุนููุงุก ุงูุฌุฏุฏ ููLookalike

---

**๐ฏ ุงูุฎูุงุตุฉ:**

ุชููู ุนู ุงุณุชูุฏุงู ุงูุฌููุน!
ุงุณุชูุฏู ูู ุฌุฑุจ ููุชุฌู โ ูู ูุดุจููู โ ูู ููุชู ุจูุฌุงูู

ุงููุชูุฌุฉ: CPA ุฃูู 50% + ROAS ุฃุนูู 100%`;
}

function creativeAnalysis(campaigns: any[]) {
  return `๐จ **ุชุญููู ุงููุฑููุชู (ุงูุชุตููู ูุงููุตูุต)**

๐ **ุงูุญูููุฉ ุงููุงุณูุฉ:**
90% ูู ูุฌุงุญ ุงูุฅุนูุงู = ุฌูุฏุฉ ุงููุฑููุชู!

---

**๐ผ๏ธ ุชุญููู ุงูุตูุฑ/ุงูููุฏูููุงุช:**

**โ ุฃุฎุทุงุก ุดุงุฆุนุฉ:**
- ุตูุฑุฉ ุงูููุชุฌ ุนูู ุฎูููุฉ ุจูุถุงุก (ููู!)
- ุดุฎุต ููุธุฑ ูููุงููุฑุง ูุจุงุดุฑุฉ
- ุตูุฑ Stock ูู Google
- ูุต ูุซูุฑ ุนูู ุงูุตูุฑุฉ
- ุฃููุงู ุจุงูุชุฉ

**โ ุงููุฑููุชู ุงููุงุฆุฒ:**

๐ **Hook ุฃูู 3 ุซูุงู (ููููุฏูู):**
- "ูุง ุชุดุชุฑู ูุณุชุงู ุณูุฑุฉ ูุจู ูุง ุชุดูู ุฏู!"
- "ุบูุทุฉ ูู ุงูุจูุงุช ูู ุงุฎุชูุงุฑ ุงููุณุชุงู..."
- "ุงูุณุฑ ุงููู ูุญุฏุด ููููู ุนููู..."

๐ **ุงูุตูุฑ:**
- ุดุฎุต ูุณุชุฎุฏู/ูุฑุชุฏู ุงูููุชุฌ (ููุณ ููุธุฑ ูููุงููุฑุง)
- ููุทุฉ ูุจู/ุจุนุฏ (Before/After)
- ุดุฎุต ุณุนูุฏ/ูุชูุงุฌุฆ
- Lifestyle Shot (ูู ุงูุญูุงุฉ ุงูุทุจูุนูุฉ)
- User Generated Content (ุตูุฑ ุญููููุฉ ูู ุงูุนููุงุก)

๐ **ุงูุฃููุงู:**
- ุชุจุงูู ุนุงูู (ุฃุญูุฑุ ุฃุตูุฑุ ุจุฑุชูุงูู)
- ุชุฌูุจ: ุฑูุงุฏูุ ุจูุฌุ ุฃููุงู ุจุงูุชุฉ

---

**โ๏ธ ุชุญููู ุงููุตูุต (Copy):**

**โ Copy ุถุนูู:**
"ูุณุชุงู ุฌูููุ ูุชููุฑ ุงูุขู"

**โ Copy ููู:**
"๐ฑ ุงูุจูุงุช ุจูุญุณุฏููู ุนููู!
ุงููุณุชุงู ุงููู ุฎูุงูู ูููุฉ ุงูุณูุฑุฉ ๐
โจ ููุงุด ูุงุฎุฑ ูููุน
๐ ูุฑูุญ ุทูู ุงูููู
๐ฅ ูุชุจูู 5 ูุทุน ุจุณ!

โฐ ุงุทูุจูู ุฏูููุชู ูุจู ูุง ูุฎูุต
๐"

---

**๐ ูููู ุงูููุจู ุงููุงุฆุฒ:**

**1๏ธโฃ Hook (ุงูุณุทุฑ ุงูุฃูู):**
ูุฏูู: ูููู ุงูุณูุฑูู!

ุฃูุซูุฉ:
- "ุชูููู! ูุง ุชุดุชุฑู ุฃู ูุณุชุงู ูุจู ูุง ุชูุฑู ุฏู..."
- "ุงูุฎุทุฃ ุงููู 90% ูู ุงูุจูุงุช ุจูุนูููู..."
- "ุงูุณุฑ ุงููู ูุญุฏุด ููููู ุนููู..."

**2๏ธโฃ Problem (ุงููุดููุฉ):**
"ูุชุนุฑููุด ุชูุงูู ูุณุชุงู ููุงุณุจ ุฌุณููุ
ูู ุงููู ุชุดุชุฑูู ูุด ูุฑูุญ ุฃู ุดููู ุนุงุฏูุ"

**3๏ธโฃ Solution (ุงูุญู):**
"ุงููุณุชุงู ุฏู ูุตูู ุฎุตูุตุงู ูุจุฑุฒ ุฌูุงูู
ููุงุด ูุชูุฏุฏ ูุฑูุญู ุทูู ุงูููู
ูุดููู ูุฎูููู ูุฌูุฉ ุฃู ููุงู"

**4๏ธโฃ Benefits (ุงูููุงุฆุฏ):**
ุงุณุชุฎุฏู Bullets:
โจ ููุงุด ูุงุฎุฑ 100% ูุทู
๐ ูุฑูุญ ููุญุฑูุฉ ูุงูุฌููุณ
๐จ ุฃููุงู ุซุงุจุชุฉ ูุง ุชุจูุช
๐ ููุงุณุจ ููู ุงูููุงุณุจุงุช
๐ฆ ุชูุตูู ุณุฑูุน 24 ุณุงุนุฉ

**5๏ธโฃ Social Proof:**
"โญโญโญโญโญ (500+ ุชูููู)
'ุฃุฌูู ูุณุชุงู ุงุดุชุฑูุชู!' - ูููุ ุงููุงูุฑุฉ"

**6๏ธโฃ Urgency:**
"๐ฅ ุงูุนุฑุถ ููุชูู ุฎูุงู 6 ุณุงุนุงุช
โ๏ธ ูุชุจูู 8 ูุทุน ููุท!"

**7๏ธโฃ CTA (Call-to-Action):**
"๐ ุงุทูุจู ุฏูููุชู ูุงุญุตูู ุนูู ุฎุตู 30%"

---

**๐ญ ุฃููุงุน Angles ุชุฌุฑุจูุง:**

1. **Problem-Solution:**
   "ูุชุนุจุฉ ูู ุงููุณุงุชูู ุงูุถููุฉุ"

2. **Before/After:**
   "ูุงู ุดููู ุนุงุฏู... ุฏูููุชู ุจููุช ูุฌูุฉ!"

3. **Testimonial:**
   "ุฌูุฒู ูุงูู ุฃูู ูุฑุฉ ูุดูููู ุฌูููุฉ ูุฏู ๐"

4. **Comparison:**
   "ุงููุณุงุชูู ุงูุนุงุฏูุฉ ููุงุจู ูุณุชุงููุง ุงููููุฒ"

5. **Fear of Missing Out:**
   "ุขุฎุฑ 10 ูุทุน! ุจุนุฏูุง ุงูุณุนุฑ ูุฑุฌุน ุนุงุฏู"

6. **Educational:**
   "3 ุญุงุฌุงุช ูุงุฒู ุชุนุฑูููุง ูุจู ูุง ุชุดุชุฑู ูุณุชุงู"

---

**๐ A/B Test Plan:**

ุงุฎุชุจุฑ:
โ ุตูุฑุฉ Product vs Lifestyle
โ ููุฏูู vs ุตูุฑุฉ
โ Hook #1 vs Hook #2
โ ุฃููุงู: ุฃุญูุฑ vs ุฃุฒุฑู vs ุฃุตูุฑ
โ ูุฏุฉ ุงูููุฏูู: 15 ุซุงููุฉ vs 30 ุซุงููุฉ

---

**๐ฅ ุตูุบุฉ ุงูููุฏูู ุงููุงุฆุฒุฉ:**

**0-3 ุซูุงูู:** Hook ููู
"ูุง ุชุทูุจู ุฃู ูุณุชุงู ูุจู ูุง ุชุดููู ุฏู!"

**3-10 ุซูุงูู:** ุนุฑุถ ุงูููุชุฌ
(ุดุฎุต ูุฑุชุฏูู ููุชุญุฑู)

**10-15 ุซูุงูู:** ุงููููุฒุงุช ุจุณุฑุนุฉ
"ููุงุด ูุงุฎุฑุ ูุฑูุญุ ุดููุ ุณุนุฑ ููุงุณุจ"

**15-20 ุซูุงูู:** Social Proof + CTA
"500 ุนูููุฉ ุณุนูุฏุฉ! ุงุทูุจูู ุฏูููุชู"

---

**๐ก Pro Tips:**

1. **User Generated Content:**
   ุงุทูุจ ูู ุนููุงุฆู ุตูุฑ/ููุฏูููุงุช
   โ ุฃููู ูู ุฃู ุตูุฑ ุงุญุชุฑุงููุฉ!

2. **Test Many Creatives:**
   5-10 ุชุตุงููู ูุฎุชููุฉ ุฃุณุจูุนูุงู
   Facebook ูุฎุชุงุฑ ุงููุงุฆุฒ ุชููุงุฆูุงู

3. **Refresh ูู ุฃุณุจูุนูู:**
   ุญุชู ุฃุญุณู Creative ูุชุนุจ!
   ุบูุฑู ุจุนุฏ 10-14 ููู

4. **ุงุณุชุฎุฏู Emojis:**
   โจ๐๐๐ฅโก
   ุชุฒูุฏ ุงูุชูุงุนู 20%

5. **ุงุณุชุฎุฏู ุงููุตุญู ุงููุจุณุทุฉ:**
   ููุณ ุงูุนุงููุฉ ุงูุซูููุฉ ููุง ุงููุตุญู ุงูุซูููุฉ
   ูุฒูุฌ ูุฑูุญ ููุงุถุญ

---

**๐ ุงูุฎูุงุตุฉ:**

ุงููุฑููุชู ุงููุงุฆุฒ = Hook ููู + ูุดููุฉ ูุงุถุญุฉ + ุญู ูููุน + CTA ุนุงุฌู

ุฌุฑุจ 10 ุชุตุงูููุ ุงุฎุชุงุฑ ุงูุฃูุถูุ ุถุงุนู ููุฒุงููุชู!`;
}

function scalingPlan(campaigns: any[], metrics: any) {
  const topCampaign = campaigns.reduce((best, c) => c.roi > best.roi ? c : best, campaigns[0] || { roi: 0, budget: 0 });

  return `๐ **ุฎุทุฉ Scaling ุงูุงุญุชุฑุงููุฉ**

๐ฏ **ุงููุฏู:** ูุถุงุนูุฉ ุงูุฅูุฑุงุฏุงุช ุจุฏูู ุฎุณุงุฑุฉ ุงูุฃุฏุงุก!

---

**โ๏ธ ุงูุฎุทุฃ ุงููุงุชู:**
ุฒูุงุฏุฉ ุงูููุฒุงููุฉ 100% ูุฑุฉ ูุงุญุฏุฉ = ุงูููุงุฑ ROAS!

---

**โ ุงูุทุฑููุฉ ุงูุตุญูุญุฉ: Vertical + Horizontal Scaling**

---

**๐ ุชุญููู ุงูุฌุงูุฒูุฉ ููู Scaling:**

${topCampaign ? `
ุฃูุถู ุญููุงุชู:
- "${topCampaign.name}"
- ROI: ${topCampaign.roi.toFixed(0)}%
- ุงูููุฒุงููุฉ ุงูุญุงููุฉ: ${topCampaign.budget.toFixed(0)} ุฌ

${topCampaign.roi >= 200 ? `
โ **ุฌุงูุฒ ููู Scaling!**
` : `
โ๏ธ **ุญุณูู ุงูุฃุฏุงุก ุฃููุงู:**
ุงูู ROI ูุฌุจ ูููู 200%+ ูุจู ุงูู Scaling
`}
` : ""}

---

**๐ Phase 1: Vertical Scaling (ุฃุณุจูุน 1-2)**

ุฒูุฏ ุงูููุฒุงููุฉ ุชุฏุฑูุฌูุงู:

**ุงูููู 1-3:**
${topCampaign ? `ุงูููุฒุงููุฉ: ${topCampaign.budget.toFixed(0)} โ ${(topCampaign.budget * 1.2).toFixed(0)} ุฌ (+20%)` : "ุฒูุงุฏุฉ 20%"}

**ุงูููู 4-7:**
ุฅุฐุง ROAS ูุณุชูุฑ:
${topCampaign ? `ุงูููุฒุงููุฉ: ${(topCampaign.budget * 1.2).toFixed(0)} โ ${(topCampaign.budget * 1.5).toFixed(0)} ุฌ (+25%)` : "ุฒูุงุฏุฉ 25%"}

**ุงูุฃุณุจูุน 2:**
ุฅุฐุง ROAS ูุงุฒุงู ููู:
${topCampaign ? `ุงูููุฒุงููุฉ: ${(topCampaign.budget * 1.5).toFixed(0)} โ ${(topCampaign.budget * 2).toFixed(0)} ุฌ (+33%)` : "ุฒูุงุฏุฉ 33%"}

**โ๏ธ ูุงุนุฏุฉ ุฐูุจูุฉ:**
ูุง ุชุฒูุฏ ุฃูุซุฑ ูู 20-30% ูู 3-4 ุฃูุงู!

---

**๐ Phase 2: Horizontal Scaling (ุฃุณุจูุน 3-4)**

ูุณูุน ุงููุตูู:

**1๏ธโฃ Lookalike Expansion:**
- ูู LAL 1% โ ุฅูู LAL 2-3%
- ุฃูุดุฆ LAL ูู audiences ุฌุฏูุฏุฉ

**2๏ธโฃ Geographic Expansion:**
- ูู Top 3 ูุญุงูุธุงุช โ ุฅูู Top 10

**3๏ธโฃ Age Expansion:**
- ูู 25-34 โ ุฅูู 22-40 (ุชุฏุฑูุฌูุงู)

**4๏ธโฃ Placement Expansion:**
- ูู Feed Only โ ุฅูู Feed + Stories + Reels

**5๏ธโฃ Platform Expansion:**
- ูู Facebook โ ุฅูู Instagram + Audience Network

---

**๐ Phase 3: Campaign Duplication (ุฃุณุจูุน 5+)**

**CBO (Campaign Budget Optimization):**
ุฃูุดุฆ 3-5 ad sets ูุชุทุงุจูุฉ ุฏุงุฎู ููุณ ุงูุญููุฉ
Facebook ููุฒุน ุงูููุฒุงููุฉ ุชููุงุฆูุงู ุนูู ุงูุฃูุถู

**ูุซุงู:**
Campaign: "ูุณุงุชูู ุตูู 2026" - ููุฒุงููุฉ 1000 ุฌ
- Ad Set 1: LAL 1%
- Ad Set 2: LAL 2%
- Ad Set 3: Engaged Users
- Ad Set 4: Website Visitors
- Ad Set 5: Interest Targeting

Facebook ูุฑูุฒ ุนูู ุงูุฃูุถู ุชููุงุฆูุงู

---

**๐ ูุซุงู Scaling ูู ุงูุตูุฑ ููููููู:**

**ุงูุดูุฑ 1:** (Validation Phase)
- ุงูููุฒุงููุฉ: 3,000 ุฌ/ููู
- ุงูุฅูุฑุงุฏุงุช: 10,000 ุฌ/ููู
- ROAS: 3.3x
- โ ุฌุงูุฒ ููู Scaling

**ุงูุดูุฑ 2:** (Vertical Scaling)
- ุงูููุฒุงููุฉ: 6,000 ุฌ/ููู (+100%)
- ุงูุฅูุฑุงุฏุงุช: 18,000 ุฌ/ููู
- ROAS: 3.0x (ุชุฑุงุฌุน ุทููู ููุจูู)

**ุงูุดูุฑ 3:** (Horizontal Scaling)
- ุงูููุฒุงููุฉ: 10,000 ุฌ/ููู
- ุงูุฅูุฑุงุฏุงุช: 28,000 ุฌ/ููู
- ROAS: 2.8x

**ุงูุดูุฑ 4-6:** (Duplication)
- ุงูููุฒุงููุฉ: 20,000 ุฌ/ููู
- ุงูุฅูุฑุงุฏุงุช: 50,000+ ุฌ/ููู
- ROAS: 2.5x

= ุฅูุฑุงุฏุงุช ุดูุฑูุฉ 1.5 ููููู ุฌ! ๐

---

**โ๏ธ ุนูุงูุงุช ุชุญุฐูุฑูุฉ (ุชููู ุนู ุงูู Scaling):**

โ ROAS ูุฒู ุฃูู ูู 2x
โ CPA ุฒุงุฏ ุฃูุซุฑ ูู 30%
โ CTR ูุฒู ุฃูู ูู 2%
โ Frequency ุฃุนูู ูู 3 (ููุณ ุงูุดุฎุต ุดุงู ุงูุฅุนูุงู 3+ ูุฑุงุช)

**ุงูุญู:** 
- ุชููู ุนู ุฒูุงุฏุฉ ุงูููุฒุงููุฉ
- ุญุณูู ุงููุฑููุชู
- ูุณุน ุงูุฌูููุฑ

---

**๐ก Advanced Tips:**

**1๏ธโฃ Dayparting:**
ุฑูุฒ 70% ูู ุงูููุฒุงููุฉ ูู ุฃูุถู 6 ุณุงุนุงุช ููุท
(ุญุณุจ ุจูุงูุงุชู: 4-11 ูุณุงุกู)

**2๏ธโฃ Creative Testing at Scale:**
ูุน ูู ุฒูุงุฏุฉ ููุฒุงููุฉุ ุฃุถู 3-5 creatives ุฌุฏูุฏุฉ

**3๏ธโฃ Inventory ุงูููุชุฌุงุช:**
ุชุฃูุฏ ุนูุฏู ูุฎุฒูู ูููู!
ูุชุฎููุด ุงูุฅุนูุงูุงุช ุชุดุชุบู ูุงูููุชุฌ ููุฏ

**4๏ธโฃ Customer Service:**
ูุน ุฒูุงุฏุฉ ุงูุทูุจุงุชุ ุฌูุฒ ูุฑูู ุฏุนู ุฃูุจุฑ

**5๏ธโฃ Cash Flow:**
Facebook ุชุฏูุน ุจุนุฏ 21 ููู
ุชุฃูุฏ ุนูุฏู ุณูููุฉ ุชููู

---

**๐ ุงูุฎูุงุตุฉ:**

Scaling = ุตุจุฑ + ุชุฏุฑุฌ + ูุฑุงูุจุฉ ุฏูููุฉ

- ุฒูุฏ 20% ูู 3 ุฃูุงู (Vertical)
- ูุณูุน ุงูุฌูููุฑ (Horizontal)
- ูุฑุฑ ุงูุญููุงุช ุงููุงุฌุญุฉ (Duplication)

ุงููุฏู: ROAS ููุถู ููู 2.5x ุญุชู ุนูุฏ ุงูููุฒุงููุงุช ุงููุจูุฑุฉ

๐ฐ **ุงููุชูุฌุฉ:**
ูู 3,000 ุฌ/ููู โ ุฅูู 20,000+ ุฌ/ููู ุฎูุงู 3-4 ุฃุดูุฑ!`;
}
