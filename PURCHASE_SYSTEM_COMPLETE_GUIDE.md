# ูุธุงู ุงููุดุชุฑูุงุช ูุงููุญุงุณุจุฉ ุงููุงูู - ุฏููู ุงูุงุณุชุฎุฏุงู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ูุญุงุณุจู ูุชูุงูู ูุฅุฏุงุฑุฉ ุงููุดุชุฑูุงุช ูุฑุฃุณ ุงููุงู ูุงูุฃุฑุจุงุญ ุจุดูู ุชูุตููู.

---

## ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1๏ธโฃ ุฅุฏุงุฑุฉ ุฑุฃุณ ุงููุงู

**ุงูุตูุญุฉ:** `/vendor/capital`

**ุงููุธุงุฆู:**
- ุชุณุฌูู ุฑุฃุณ ุงููุงู ุงูุฃููู
- ุนุฑุถ ุฑุฃุณ ุงููุงู ุงููุชุจูู
- ุญุณุงุจ ุงููุจูุบ ุงููุณุชุฎุฏู
- ูุณุจุฉ ุงุณุชุฎุฏุงู ุฑุฃุณ ุงููุงู

**ุฎุทูุงุช ุงูุนูู:**
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุฑุฃุณ ุงููุงู
2. ุฃุฏุฎู ุงููุจูุบ ุงูุฃููู (ูุซุงู: 10000 ุฌููู)
3. ุฃุถู ููุงุญุธุงุช (ุงุฎุชูุงุฑู)
4. ุงุญูุธ

**ููุงุญุธุฉ ูููุฉ:**
- ุฑุฃุณ ุงููุงู ููุณุชุฎุฏู **ููุท** ูููุดุชุฑูุงุช ุงููุญุฏุฏุฉ "ูู ุฑุฃุณ ุงููุงู"
- ุงููุดุชุฑูุงุช "ุจุงูููุงุจุฉ" ูุง ุชูุฎุตู ูู ุฑุฃุณ ุงููุงู

---

### 2๏ธโฃ ูุธุงู ููุงุชูุฑ ุงููุดุชุฑูุงุช ุงููุชูุฏู

**ุงูุตูุญุฉ:** `/vendor/purchases/new`

#### ููููุงุช ุงููุงุชูุฑุฉ:

##### ุฃ. ุจูุงูุงุช ุงูููุฑุฏ
- ุงุณู ุงูููุฑุฏ ุฃู ุงููุญู
- ุฑูู ุงููุงุชู

##### ุจ. ูุตุงุฑูู ุงููุดูุงุฑ (ุงูููุงุตูุงุช)
- ูุจูุบ ุงูููุงุตูุงุช/ุงูุชููู
- ููุฎุตู ุชููุงุฆูุงู ูู ุฑุฃุณ ุงููุงู
- ููุถุงู ูููุตุฑููุงุช ุชุญุช ููุน "TRANSPORTATION"

##### ุฌ. ุงูููุชุฌุงุช (ููู ููุชุฌ):

**1. ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ:**
- ุงุณู ุงูููุชุฌ (ุนุฑุจู) - **ูุทููุจ**
- ุงููููุฉ - **ูุทููุจ**
- ุณุนุฑ ุงูุดุฑุงุก (ูููุทุนุฉ) - **ูุทููุจ**
- ุณุนุฑ ุงูุจูุน ุงููุชููุน (ูููุทุนุฉ) - **ูุทููุจ**

**2. ุงูุฎูุงุฑุงุช ุงููููุฉ:**

**โ ููุญุณุจ ูู ุฑุฃุณ ุงููุงู:**
- ุนูุฏ ุงูุชูุนูู: ุณููุฎุตู ุณุนุฑ ุงูุดุฑุงุก ูู ุฑุฃุณ ุงููุงู
- ุนูุฏ ุนุฏู ุงูุชูุนูู: "ุจูุน ุจุงูููุงุจุฉ" - ูู ููุฎุตู ูู ุฑุฃุณ ุงููุงู

**๐ฐ ุนูููุฉ ุงููุชุฌุฑ 5%:**
- ุนูุฏ ุงูุชูุนูู: ููุญุณุจ 5% ูู ุณุนุฑ ุงูุจูุน ูุนูููุฉ ููููุตุฉ
- ุนูุฏ ุนุฏู ุงูุชูุนูู: ูุง ุชูุฌุฏ ุนูููุฉ

##### ุฏ. ุงูุญุณุงุจุงุช ุงูุชููุงุฆูุฉ (ููู ููุชุฌ):
- **ุฅุฌูุงูู ุงูุดุฑุงุก** = ุงููููุฉ ร ุณุนุฑ ุงูุดุฑุงุก
- **ุฅุฌูุงูู ุงูุจูุน** = ุงููููุฉ ร ุณุนุฑ ุงูุจูุน
- **ุงูุฑุจุญ ุงููุชููุน** = (ุณุนุฑ ุงูุจูุน - ุณุนุฑ ุงูุดุฑุงุก) ร ุงููููุฉ - ุนูููุฉ ุงููุชุฌุฑ

##### ูู. ููุฎุต ุงููุงุชูุฑุฉ:
- ุฅุฌูุงูู ุงููุดุชุฑูุงุช
- ูู ุฑุฃุณ ุงููุงู
- ุจุงูููุงุจุฉ
- ูุตุงุฑูู ุงููุดูุงุฑ
- ุฅุฌูุงูู ุงูุจูุน ุงููุชููุน
- ุงูุฑุจุญ ุงููุชููุน
- ุนูููุฉ ุงููุชุฌุฑ 5%
- ุตุงูู ุงูุฑุจุญ

---

### 3๏ธโฃ ุนุฑุถ ุงูููุงุชูุฑ

**ุงูุตูุญุฉ:** `/vendor/purchases`

**ุงูุนุฑุถ ูุดูู:**
- ุฑูู ุงููุงุชูุฑุฉ
- ุชุงุฑูุฎ ุงูุดุฑุงุก
- ุงุณู ุงูููุฑุฏ
- ูุงุฆูุฉ ุงูููุชุฌุงุช ูุน ุงูุชูุงุตูู
- ุงูุฅุฌูุงููุงุช (ุฅุฌูุงูู - ูู ุฑุฃุณ ุงููุงู - ุจุงูููุงุจุฉ)

**ุงูุฅุญุตุงุฆูุงุช:**
- ุนุฏุฏ ุงูููุงุชูุฑ
- ุฅุฌูุงูู ุงููุดุชุฑูุงุช
- ูู ุฑุฃุณ ุงููุงู
- ุจูุน ุจุงูููุงุจุฉ

---

### 4๏ธโฃ ุงูุชูุงุฑูุฑ ุงููุงููุฉ ุงูุดุงููุฉ

**ุงูุตูุญุฉ:** `/vendor/reports/financial`

#### ุฃ. ููุชุฑ ุงูุชูุงุฑูุฎ
- ูู ุชุงุฑูุฎ
- ุฅูู ุชุงุฑูุฎ
- ุงูุชุฑุงุถู: ุขุฎุฑ 30 ููู

#### ุจ. ุชูุฑูุฑ ุฑุฃุณ ุงููุงู
- ุฑุฃุณ ุงููุงู ุงูุฃููู
- ุงููุชุจูู ุญุงููุงู
- ุงููุณุชุฎุฏู
- ูุณุจุฉ ุงูุงุณุชุฎุฏุงู

#### ุฌ. ุงูููุฎุต ุงูุนุงู
1. **ุฅุฌูุงูู ุงููุดุชุฑูุงุช:**
   - ุงููุจูุบ ุงูููู
   - ุนุฏุฏ ุงูููุงุชูุฑ ูู ุฑุฃุณ ุงููุงู

2. **ุฅุฌูุงูู ุงููุจูุนุงุช:**
   - ุงููุจูุบ ุงูููู
   - ุงูุฑุจุญ

3. **ุฅุฌูุงูู ุงููุตุฑููุงุช:**
   - ูู ุงููุตุฑููุงุช ูู ุฑุฃุณ ุงููุงู

4. **ุนูููุฉ ุงููุชุฌุฑ 5%:**
   - ูู ุฌููุน ุงูููุชุฌุงุช ุงููุญุฏุฏุฉ ุจุนูููุฉ

#### ุฏ. ุตุงูู ุงูุฑุจุญ
```
ุตุงูู ุงูุฑุจุญ = ุฅุฌูุงูู ุงูุฑุจุญ - ุนูููุฉ ุงููุชุฌุฑ - ุงููุตุฑููุงุช
```

**ุนุฑุถ ุชูุตููู:**
- ุฅุฌูุงูู ุงูุฑุจุญ
- ุงูุนูููุฉ + ุงููุตุฑููุงุช
- ูุงูุด ุงูุฑุจุญ %

#### ูู. ุชูุงุตูู ุงููุดุชุฑูุงุช
- ูู ุฑุฃุณ ุงููุงู (ูุจูุบ + ุนุฏุฏ ููุงุชูุฑ)
- ุจูุน ุจุงูููุงุจุฉ (ูุจูุบ + ุนุฏุฏ ููุชุฌุงุช)
- ูุตุงุฑูู ูุดุงููุฑ
- ุฅุฌูุงูู ุงูุชูููุฉ

#### ู. ุชูุงุตูู ุงููุจูุนุงุช
- ุนุฏุฏ ุงููุจูุนุงุช
- ุฅุฌูุงูู ุงููุจูุนุงุช
- ุฅุฌูุงูู ุงูุฑุจุญ
- ูุชูุณุท ุงูุฑุจุญ/ุจูุนุฉ

#### ุฒ. ุชูุงุตูู ุงููุตุฑููุงุช (ุญุณุจ ุงูููุน)
- ุดุญู
- ุชุบููู
- ุชุณููู
- ุชุดุบูู
- ุฑูุงุชุจ
- ุฅูุฌุงุฑ
- ูุฑุงูู
- ุตูุงูุฉ
- **ููุงุตูุงุช ููุดุงููุฑ** โญ
- ูุชููุนุฉ

---

## ๐ ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ุณููุงุฑูู 1: ุดุฑุงุก ููุชุฌุงุช ูู ุฑุฃุณ ุงููุงู

**ุงูุฎุทูุงุช:**
1. ุงุฏุฎู ุนูู `/vendor/purchases/new`
2. ุฃุฏุฎู ุจูุงูุงุช ุงูููุฑุฏ
3. ุฃุถู ููุชุฌ:
   - ุงูุงุณู: "ูุณุชุงู ุตููู"
   - ุงููููุฉ: 10
   - ุณุนุฑ ุงูุดุฑุงุก: 50 ุฌ
   - ุณุนุฑ ุงูุจูุน: 100 ุฌ
   - โ ููุญุณุจ ูู ุฑุฃุณ ุงููุงู
   - โ ุนูููุฉ ุงููุชุฌุฑ 5%
4. ุฃุถู ูุตุงุฑูู ุงููุดูุงุฑ: 20 ุฌ
5. ุงุญูุธ

**ุงููุชูุฌุฉ:**
- ููุฎุตู ูู ุฑุฃุณ ุงููุงู: 520 ุฌ (500 + 20 ููุงุตูุงุช)
- ููุณุฌู ูู ุงููุดุชุฑูุงุช: 500 ุฌ (ูู ุฑุฃุณ ุงููุงู)
- ููุณุฌู ูุตุฑูู ูุดูุงุฑ: 20 ุฌ
- ุงูุฑุจุญ ุงููุชููุน: (100 - 50) ร 10 - (100 ร 0.05 ร 10) = 500 - 50 = **450 ุฌ**

---

### ุณููุงุฑูู 2: ุจูุน ุจุงูููุงุจุฉ (ุจุฏูู ุฎุตู ูู ุฑุฃุณ ุงููุงู)

**ุงูุฎุทูุงุช:**
1. ุงุฏุฎู ุนูู `/vendor/purchases/new`
2. ุฃุถู ููุชุฌ:
   - ุงูุงุณู: "ุญููุจุฉ ูุฏ"
   - ุงููููุฉ: 5
   - ุณุนุฑ ุงูุดุฑุงุก: 80 ุฌ
   - ุณุนุฑ ุงูุจูุน: 150 ุฌ
   - โ **ูุง** ููุญุณุจ ูู ุฑุฃุณ ุงููุงู (ุจูุน ุจุงูููุงุจุฉ)
   - โ ุนูููุฉ ุงููุชุฌุฑ 5%
3. ุงุญูุธ

**ุงููุชูุฌุฉ:**
- ูุง ููุฎุตู ูู ุฑุฃุณ ุงููุงู
- ููุณุฌู ูู ุงููุดุชุฑูุงุช: 400 ุฌ (ุจุงูููุงุจุฉ)
- ุงูุฑุจุญ ุงููุชููุน: (150 - 80) ร 5 - (150 ร 0.05 ร 5) = 350 - 37.5 = **312.5 ุฌ**

---

### ุณููุงุฑูู 3: ูุงุชูุฑุฉ ูุฎุชูุทุฉ (ุฑุฃุณ ุงููุงู + ุจุงูููุงุจุฉ)

**ููุชุฌุงุช:**
1. **ูููุต** (ูู ุฑุฃุณ ุงููุงู):
   - ูููุฉ: 20 ร 30 ุฌ = 600 ุฌ (ููุฎุตู)
   - ุจูุน: 20 ร 60 ุฌ = 1200 ุฌ
   - ุนูููุฉ: 60 ุฌ

2. **ุจูุทููู** (ุจุงูููุงุจุฉ):
   - ูููุฉ: 15 ร 70 ุฌ = 1050 ุฌ (ูุง ููุฎุตู)
   - ุจูุน: 15 ร 130 ุฌ = 1950 ุฌ
   - ุนูููุฉ: 97.5 ุฌ

3. **ูุตุงุฑูู ูุดูุงุฑ:** 30 ุฌ (ููุฎุตู)

**ุงููุชูุฌุฉ:**
- **ููุฎุตู ูู ุฑุฃุณ ุงููุงู:** 630 ุฌ (600 + 30)
- **ูุง ููุฎุตู:** 1050 ุฌ
- **ุฅุฌูุงูู ุงููุดุชุฑูุงุช:** 1650 ุฌ
- **ุงูุฑุจุญ ุงููุชููุน:** (600 + 900) - (60 + 97.5) = **1342.5 ุฌ**
- **ุตุงูู ุงูุฑุจุญ:** 1342.5 - 30 = **1312.5 ุฌ**

---

## ๐ ููุงุท ูููุฉ

### ุนู ุฑุฃุณ ุงููุงู
โ ููุฎุตู ููู:
- ุงููุดุชุฑูุงุช ุงููุญุฏุฏุฉ "ูู ุฑุฃุณ ุงููุงู"
- ูุตุงุฑูู ุงููุดูุงุฑ/ุงูููุงุตูุงุช

โ ูุง ููุฎุตู ููู:
- ุงููุดุชุฑูุงุช "ุจุงูููุงุจุฉ"
- ุนูููุฉ ุงููุชุฌุฑ (ุชูุญุณุจ ูู ุงูุฑุจุญ)

### ุนู ุนูููุฉ ุงููุชุฌุฑ 5%
- ุชูุญุณุจ ูู **ุณุนุฑ ุงูุจูุน** ูููุณ ุงูุฑุจุญ
- ูููู ุชุนุทูููุง ููู ููุชุฌ ุนูู ุญุฏุฉ
- ุชูุฎุตู ูู ุงูุฑุจุญ ุงูุฅุฌูุงูู

### ุนู ุงููุตุฑููุงุช
- ูุตุงุฑูู ุงููุดูุงุฑ ุชูุณุฌู ุชููุงุฆูุงู
- ูููู ุฅุถุงูุฉ ูุตุฑููุงุช ุฃุฎุฑู ูุฏููุงู
- ูู ุงููุตุฑููุงุช ุชูุฎุตู ูู ุตุงูู ุงูุฑุจุญ

---

## ๐ ูุนุงุฏูุงุช ุงูุญุณุงุจุงุช

### ุงูุฑุจุญ ูููุชุฌ ูุงุญุฏ
```
ุงูุฑุจุญ = (ุณุนุฑ ุงูุจูุน - ุณุนุฑ ุงูุดุฑุงุก) ร ุงููููุฉ
```

### ุงูุฑุจุญ ูุน ุงูุนูููุฉ
```
ุงูุฑุจุญ ุงูุตุงูู = ุงูุฑุจุญ - (ุณุนุฑ ุงูุจูุน ร 0.05 ร ุงููููุฉ)
```

### ุตุงูู ุงูุฑุจุญ ุงูููุงุฆู
```
ุตุงูู ุงูุฑุจุญ = ุฅุฌูุงูู ุงูุฑุจุญ - ุนูููุฉ ุงููุชุฌุฑ - ุงููุตุฑููุงุช
```

### ูุงูุด ุงูุฑุจุญ %
```
ูุงูุด ุงูุฑุจุญ = (ุตุงูู ุงูุฑุจุญ รท ุฅุฌูุงูู ุงููุจูุนุงุช) ร 100
```

---

## ๐๏ธ ุงููุงุฌูุงุช ุงูุจุฑูุฌูุฉ (API)

### 1. ุฑุฃุณ ุงููุงู
**Endpoint:** `/api/vendor/capital`

**GET** - ุฌูุจ ุฑุฃุณ ุงููุงู:
```typescript
Response: {
  capital: {
    id: string;
    initialAmount: number;
    currentAmount: number;
    partnerName: string;
    notes: string;
  }
}
```

**POST** - ุชุณุฌูู ุฑุฃุณ ุงููุงู:
```typescript
Body: {
  initialAmount: number;
  notes?: string;
}
```

**PUT** - ุชุญุฏูุซ ุฑุฃุณ ุงููุงู:
```typescript
Body: {
  initialAmount: number;
  notes?: string;
}
```

---

### 2. ุงููุดุชุฑูุงุช
**Endpoint:** `/api/vendor/purchases`

**POST** - ุฅุถุงูุฉ ูุงุชูุฑุฉ:
```typescript
Body: {
  supplier: string;
  supplierPhone: string;
  tripExpense: number;
  notes?: string;
  items: [
    {
      productNameAr: string;
      quantity: number;
      purchasePrice: number;
      sellingPrice: number;
      fromCapital: boolean;
      commissionFromStore: boolean;
    }
  ]
}
```

**GET** - ุฌูุจ ุงูููุงุชูุฑ:
```typescript
Response: {
  purchases: [
    {
      receiptNumber: string;
      supplier: string;
      purchaseDate: Date;
      items: [];
      totalCost: number;
      totalFromCapital: number;
      totalOnBehalf: number;
    }
  ]
}
```

---

### 3. ุงูุชูุงุฑูุฑ ุงููุงููุฉ
**Endpoint:** `/api/vendor/reports/financial`

**GET** - ุฌูุจ ุงูุชูุฑูุฑ:
```typescript
Query: {
  startDate?: string; // YYYY-MM-DD
  endDate?: string;   // YYYY-MM-DD
}

Response: {
  capital: {};
  purchases: {
    all: [];
    fromCapital: [];
    onBehalf: [];
  };
  sales: {
    all: [];
    count: number;
  };
  expenses: {
    all: [];
    byType: [];
  };
  summary: {
    totalPurchases: number;
    purchasesFromCapital: number;
    purchasesOnBehalf: number;
    tripExpenses: number;
    totalSales: number;
    totalProfit: number;
    totalCommission: number;
    totalExpenses: number;
    netProfit: number;
  };
}
```

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู Purchase
```prisma
model Purchase {
  id                  String   @id @default(cuid())
  vendorId            String
  productName         String
  productNameAr       String?
  quantity            Float
  unitCost            Float       // ุณุนุฑ ุงูุดุฑุงุก
  totalCost           Float
  supplier            String?
  supplierPhone       String?
  purchaseDate        DateTime
  receiptNumber       String?
  fromCapital         Boolean     @default(true)
  sellingPrice        Float?      // ุณุนุฑ ุงูุจูุน ุงููุชููุน
  commissionFromStore Boolean     @default(true)
  // ... relations
}
```

### ุฌุฏูู VendorExpense
```prisma
model VendorExpense {
  id            String      @id
  vendorId      String
  expenseType   ExpenseType // TRANSPORTATION, SHIPPING, etc.
  amount        Float
  description   String
  receiptNumber String?     // ุฑุจุท ุจุงููุงุชูุฑุฉ
  expenseDate   DateTime
  // ... relations
}
```

### ุฌุฏูู PartnerCapital
```prisma
model PartnerCapital {
  id               String  @id
  vendorId         String
  partnerName      String
  capitalAmount    Float
  capitalPercent   Float
  joinDate         DateTime
  isActive         Boolean
  // ... relations
}
```

---

## ๐ ุงูุฑูุงุจุท ุงูุณุฑูุนุฉ

| ุงูุตูุญุฉ | ุงูุฑุงุจุท | ุงููุธููุฉ |
|--------|--------|---------|
| ุฑุฃุณ ุงููุงู | `/vendor/capital` | ุฅุฏุงุฑุฉ ุฑุฃุณ ุงููุงู |
| ูุงุชูุฑุฉ ุฌุฏูุฏุฉ | `/vendor/purchases/new` | ุฅุถุงูุฉ ูุดุชุฑูุงุช |
| ุงูููุงุชูุฑ | `/vendor/purchases` | ุนุฑุถ ูู ุงูููุงุชูุฑ |
| ุงูุชูุงุฑูุฑ | `/vendor/reports/financial` | ุงูุชูุฑูุฑ ุงููุงูู ุงูุดุงูู |
| ููุทุฉ ุงูุจูุน | `/vendor/pos` | ุฅุชูุงู ุงููุจูุนุงุช |

---

## ๐ฑ ุงูุงุณุชุฎุฏุงู ูู ุงูููุจุงูู

ุฌููุน ุงูุตูุญุงุช ูุชุฌุงูุจุฉ (Responsive) ูุชุนูู ุจุดูู ููุชุงุฒ ุนูู:
- ุงูููุจุงูู (Portrait & Landscape)
- ุงูุชุงุจูุช
- ุณุทุญ ุงูููุชุจ

---

## โก ูุตุงุฆุญ ููุงุณุชุฎุฏุงู ุงูุฃูุซู

1. **ุณุฌูู ุฑุฃุณ ุงููุงู ุฃููุงู** ูุจู ุงูุจุฏุก ุจุงููุดุชุฑูุงุช
2. **ุงุณุชุฎุฏู "ูู ุฑุฃุณ ุงููุงู"** ููููุชุฌุงุช ุงูุชู ุชููููุง
3. **ุงุณุชุฎุฏู "ุจุงูููุงุจุฉ"** ููููุชุฌุงุช ุงูุชู ุชุจูุนูุง ูุญุณุงุจ ุขุฎุฑูู
4. **ุณุฌูู ูุตุงุฑูู ุงููุดูุงุฑ** ุฏุงุฆูุงู ูุญุณุงุจ ุฏููู
5. **ุฑุงุฌุน ุงูุชูุงุฑูุฑ** ุจุงูุชุธุงู ููุชุงุจุนุฉ ุงูุฃุฑุจุงุญ
6. **ุงุณุชุฎุฏู ููุชุฑ ุงูุชูุงุฑูุฎ** ููุชูุงุฑูุฑ ุงูุดูุฑูุฉ/ุงูุณูููุฉ

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

- ูู ุจุงุฆุน (VENDOR) ูุฑู ุจูุงูุงุชู ููุท
- ูุง ูููู ุงููุตูู ูุจูุงูุงุช ุจุงุฆุนูู ุขุฎุฑูู
- ุงููุตุงุฏูุฉ ูุทููุจุฉ ููู ุงูุนูููุงุช
- ุฌููุน ุงูุจูุงูุงุช ูุญููุฉ ุจู NextAuth

---

## ๐ ุงูุฏุนู ุงูููู

ูู ุญุงูุฉ ูุฌูุฏ ุฃู ูุดุงูู:
1. ุชุญูู ูู ุฑุณุงุฆู ุงูุฃุฎุทุงุก
2. ุฑุงุฌุน ูุฐุง ุงูุฏููู
3. ุชุญูู ูู ููุญุฉ ุงูุชุญูู (Console)
4. ุชูุงุตู ูุน ุงูุฏุนู ุงูููู

---

**ุขุฎุฑ ุชุญุฏูุซ:** 1 ูุจุฑุงูุฑ 2026
**ุงูุฅุตุฏุงุฑ:** 2.0.0
