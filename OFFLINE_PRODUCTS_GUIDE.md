# ๐ฆ ูุธุงู ุงูุจุถุงุนุฉ ุงูุฎุงุฑุฌูุฉ - Offline Products System

## ูุธุฑุฉ ุนุงูุฉ
ูุธุงู ูุชุชุจุน ุงูููุชุฌุงุช ุงูุชู ูุชู ุดุฑุงุคูุง ูุจูุนูุง ุฎุงุฑุฌ ุงููุธุงู ุงูุฑุณููุ ูุน ุญุณุงุจ ุงูุฑุจุญ ุงูุชููุงุฆู ูุฎุตู ุงูุชูููุฉ ูู ุฑุตูุฏ ุฑุฃุณ ุงููุงู.

## ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุฅุฏุฎุงู ุจุณูุท
- ุณุนุฑ ุงูุดุฑุงุก (ูููุทุนุฉ ุงููุงุญุฏุฉ)
- ุณุนุฑ ุงูุจูุน (ูููุทุนุฉ ุงููุงุญุฏุฉ)
- ุงููููุฉ
- ูุตู ุงุฎุชูุงุฑู (ุจุฏูู ุญุงุฌุฉ ูุตูุฑ ุฃู ุชูุงุตูู ููุตูุฉ)

### 2. ุญุณุงุจ ุงูุฑุจุญ ุงูุชููุงุฆู
```
ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ = ุณุนุฑ ุงูุดุฑุงุก ร ุงููููุฉ
ุงูุฅูุฑุงุฏ ุงูุฅุฌูุงูู = ุณุนุฑ ุงูุจูุน ร ุงููููุฉ
ุงูุฑุจุญ = (ุณุนุฑ ุงูุจูุน - ุณุนุฑ ุงูุดุฑุงุก) ร ุงููููุฉ
```

### 3. ุฅุฏุงุฑุฉ ุฑุฃุณ ุงููุงู
- ุฎุตู ุงูุชูููุฉ ุชููุงุฆูุงู ูู ุฑุตูุฏ ุฑุฃุณ ุงููุงู
- ุชุณุฌูู ุงููุนุงููุฉ ูู `CapitalTransaction`
- ุงูุชุญูู ูู ููุงูุฉ ุงูุฑุตูุฏ ูุจู ุงูุฅุฏุฎุงู

### 4. ูุธุงู ุงูุตูุงุญูุงุช
- ููุณ ูู ุงูุดุฑูุงุก ููุชูููู ูุฐู ุงูุตูุงุญูุฉ
- ุงูุฃุฏูู ูุชุญูู ูู ุชูุนูู/ุฅูุบุงุก ุงูุตูุงุญูุฉ ุนูุฏ ุฅูุดุงุก ุฃู ุชุนุฏูู ุงูุดุฑูู
- ุงูุตูุงุญูุฉ: `canAddOfflineProducts`

## ุงูุญุณุงุจุงุช ุงูููุนูุฉ ุญุงููุงู
โ nada@gmail.com
โ radwa@gmail.com

## ุตูุญุฉ ุงูุงุณุชุฎุฏุงู ููุดุฑูุงุก
```
ุงูุฑุงุจุท: /vendor/offline-products
```

### ููุญุฉ ุงูุฅุญุตุงุฆูุงุช
ุชุนุฑุถ 5 ุจุทุงูุงุช:
1. **ุฑุตูุฏ ุฑุฃุณ ุงููุงู** (ุฃุฎุถุฑ) - ุงูุฑุตูุฏ ุงูุญุงูู
2. **ุฅุฌูุงูู ุงูุชูููุฉ** (ุฃุญูุฑ) - ูุฌููุน ุชูุงููู ุงูุดุฑุงุก
3. **ุฅุฌูุงูู ุงูุฅูุฑุงุฏ** (ุฃุฒุฑู) - ูุฌููุน ูุจูุนุงุช ุงูุจูุน
4. **ุฅุฌูุงูู ุงูุฑุจุญ** (ุฃุฎุถุฑ) - ุตุงูู ุงูุฑุจุญ
5. **ุฅุฌูุงูู ุงููููุฉ** (ุฃุตูุฑ) - ุนุฏุฏ ุงููุทุน ุงูููู

### ูููุฐุฌ ุฅุถุงูุฉ ููุชุฌ
- ุญูู ุณุนุฑ ุงูุดุฑุงุก
- ุญูู ุณุนุฑ ุงูุจูุน
- ุญูู ุงููููุฉ (ุงูุชุฑุงุถู: 1)
- ุญูู ุงููุตู (ุงุฎุชูุงุฑู)
- ุญุงุณุจุฉ ุฑุจุญ ูุจุงุดุฑุฉ ุชุนุฑุถ:
  * ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ
  * ุงูุฅูุฑุงุฏ ุงูุฅุฌูุงูู
  * ุงูุฑุจุญ ุงููุชููุน

### ุณุฌู ุงูููุชุฌุงุช
- ุนุฑุถ ุฒููู ููู ุงูุฅุฏุฎุงูุงุช
- ูุนุฑุถ: ุงููุตูุ ุงูุชุงุฑูุฎุ ุงููููุฉุ ุงูุชูููุฉุ ุงูุฑุจุญุ ุงููููุดุฆ
- ูุงุจู ููุชูุฑูุฑ (max-height: 600px)

## ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุดุฑูุงุก (Admin)
```
ุงูุฑุงุจุท: /admin/partners
```

### ุฅุถุงูุฉ/ุชุนุฏูู ุดุฑูู
checkbox ุฌุฏูุฏ: **๐ฆ ุงูุณูุงุญ ุจุฅุถุงูุฉ ุจุถุงุนุฉ ุฎุงุฑุฌ ุงููุธุงู**
- ุงูููู: ุจุฑุชูุงูู (orange theme)
- ุงูููุงู: ุจุนุฏ checkbox "๐๏ธ ุงูุณูุงุญ ุจุฑูุน ููุชุฌุงุช ุดู ุฅู"

## ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `OfflineProduct`
```prisma
model OfflineProduct {
  id              String   @id @default(cuid())
  vendorId        String
  description     String?
  purchasePrice   Float    // ุณุนุฑ ุงูุดุฑุงุก ูููุทุนุฉ
  sellingPrice    Float    // ุณุนุฑ ุงูุจูุน ูููุทุนุฉ
  quantity        Int      @default(1)
  profit          Float    // ุงูุฑุจุญ ุงููุญุณูุจ
  createdAt       DateTime @default(now())
  createdBy       String   // ุงุณู ุงูููุดุฆ
  
  vendor          Vendor   @relation(...)
  
  @@index([vendorId])
  @@index([createdAt])
}
```

### ุชุนุฏูู ุฌุฏูู `Vendor`
```prisma
model Vendor {
  ...
  canAddOfflineProducts Boolean @default(false)
  offlineProducts       OfflineProduct[]
}
```

## API Endpoints

### POST `/api/vendor/offline-products`
ุฅูุดุงุก ููุชุฌ ุฎุงุฑุฌู ุฌุฏูุฏ

**Body:**
```json
{
  "purchasePrice": 100,
  "sellingPrice": 150,
  "quantity": 5,
  "description": "ูุตู ุงุฎุชูุงุฑู"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "product": {...},
    "stats": {
      "newBalance": 9500,
      "totalCost": 500,
      "totalRevenue": 750,
      "profit": 250
    }
  }
}
```

**Validations:**
- โ ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุฉ `canAddOfflineProducts`
- โ ุฑุตูุฏ ุฑุฃุณ ุงููุงู ูุงูู ููุดุฑุงุก
- โ ุงูุฃุณุนุงุฑ ูุงููููุฉ ุฃุฑูุงู ุตุญูุญุฉ

### GET `/api/vendor/offline-products`
ุฌูุจ ูู ุงูููุชุฌุงุช ุงูุฎุงุฑุฌูุฉ + ุงูุฅุญุตุงุฆูุงุช

**Response:**
```json
{
  "success": true,
  "data": {
    "products": [...],
    "stats": {
      "totalCost": 5000,
      "totalRevenue": 7500,
      "totalProfit": 2500,
      "totalQuantity": 50
    }
  }
}
```

## ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### 401 Unauthorized
ุงููุณุชุฎุฏู ููุณ ุดุฑููุงู

### 403 Forbidden
ุงูุดุฑูู ูุง ููุชูู ุตูุงุญูุฉ `canAddOfflineProducts`

### 400 Bad Request
- ุฑุตูุฏ ุฑุฃุณ ุงููุงู ุบูุฑ ูุงูู
- ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ

## ุณููุงุฑูู ุงูุงุณุชุฎุฏุงู

### ูุซุงู ุนููู
1. ุงูุดุฑูู ุงุดุชุฑู 10 ูุทุน ุจุณุนุฑ 50 ุฌููู ูููุทุนุฉ
2. ุจุงุน ุงููุทุน ุจุณุนุฑ 80 ุฌููู ูููุทุนุฉ
3. ูุฏุฎู ุงูุจูุงูุงุช:
   - ุณุนุฑ ุงูุดุฑุงุก: 50
   - ุณุนุฑ ุงูุจูุน: 80
   - ุงููููุฉ: 10
4. ุงููุธุงู ูุญุณุจ:
   - ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ: 500 ุฌููู
   - ุงูุฅูุฑุงุฏ ุงูุฅุฌูุงูู: 800 ุฌููู
   - ุงูุฑุจุญ: 300 ุฌููู
5. ูุฎุตู 500 ุฌููู ูู ุฑุตูุฏ ุฑุฃุณ ุงููุงู
6. ูุณุฌู ุงููุนุงููุฉ ูู `CapitalTransaction`

## ุงููุฑููุงุช ุนู ุงููุธุงู ุงูุฑุณูู

| ุงูุฎุงุตูุฉ | ุงููุธุงู ุงูุฑุณูู | ุงูุจุถุงุนุฉ ุงูุฎุงุฑุฌูุฉ |
|---------|---------------|-----------------|
| ุงูุตูุฑ | ูุทููุจุฉ โ | ุบูุฑ ูุทููุจุฉ โ |
| ุงุณู ุงูููุชุฌ | ูุทููุจ โ | ูุตู ุจุณูุท ุงุฎุชูุงุฑู |
| ุงููุฎุฒูู | ูุชู ุงูุชุชุจุน โ | ูุง ููุชุชุจุน โ |
| ุงูุนุฑุถ ููุนููุงุก | ูุนู โ | ูุง โ |
| ุงูุบุฑุถ | ุงูุจูุน ุนุจุฑ ุงูููุตุฉ | ุชุณุฌูู ุงูุฃุฑุจุงุญ ููุท |
| ุฎุตู ุฑุฃุณ ุงููุงู | ุนูุฏ ุงูุดุฑุงุก | ููุฑู ุนูุฏ ุงูุฅุฏุฎุงู |

## ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### ููุชุฑุญุงุช
1. โจ ุฅุถุงูุฉ ุชุนุฏูู/ุญุฐู ููููุชุฌุงุช
2. ๐ ุชูุงุฑูุฑ ุดูุฑูุฉ ููุจุถุงุนุฉ ุงูุฎุงุฑุฌูุฉ
3. ๐ ุชุตููุฉ ุญุณุจ ุงูุชุงุฑูุฎ
4. ๐ค ุชุตุฏูุฑ ุงูุจูุงูุงุช (Excel/PDF)
5. ๐ ุชูุจููุงุช ุนูุฏ ุงูุฎูุงุถ ุฑุฃุณ ุงููุงู
6. ๐ ุฑุณูู ุจูุงููุฉ ููุฃุฑุจุงุญ
7. ๐ฆ ุงุณุชูุฑุงุฏ ุฌูุงุนู ูู Excel
8. ๐ฐ ุฑุจุท ูุน ุงูุชูุงุฑูุฑ ุงููุญุงุณุจูุฉ

## ุงููููุงุช ุงููุนุฏูุฉ

### Schema
- `prisma/schema.prisma`

### Admin Interface
- `src/app/admin/partners/page.tsx`
- `src/app/api/admin/partners/route.ts`
- `src/app/api/admin/partners/[id]/route.ts`

### Vendor Interface
- `src/app/vendor/offline-products/page.tsx` (NEW)
- `src/app/api/vendor/offline-products/route.ts` (NEW)

### Scripts
- `enable-offline-products.ts` (local)
- `enable-offline-products-production.ts` (production)

## ุงูุชูุนูู ุนูู Production
```bash
# Local
npx tsx enable-offline-products.ts

# Production
npx tsx enable-offline-products-production.ts
```

## ุงูุญุงูุฉ
โ **ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู**
- โ Database schema updated
- โ Admin UI complete
- โ API endpoints functional
- โ Vendor page ready
- โ Permissions enabled for nada@gmail.com and radwa@gmail.com
- โ Deployed to production (commit: c1de1c8)

## ุฑูุงุจุท ูููุฏุฉ
- Production: https://www.remostore.net
- Vendor Dashboard: https://www.remostore.net/vendor/offline-products
- Admin Partners: https://www.remostore.net/admin/partners

---

**ุขุฎุฑ ุชุญุฏูุซ:** ${new Date().toLocaleDateString('ar-EG')}
**ุงูุฅุตุฏุงุฑ:** 1.0.0
**Commit:** c1de1c8
