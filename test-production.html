<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÙØ­Øµ Production - Remostore</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      max-width: 800px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    h1 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 2.5em;
    }
    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 1.1em;
    }
    .test-section {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }
    .test-title {
      font-size: 1.3em;
      color: #333;
      margin-bottom: 15px;
      font-weight: bold;
    }
    .result {
      padding: 15px;
      border-radius: 8px;
      margin: 10px 0;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
    }
    .success {
      background: #d4edda;
      border: 2px solid #28a745;
      color: #155724;
    }
    .error {
      background: #f8d7da;
      border: 2px solid #dc3545;
      color: #721c24;
    }
    .loading {
      background: #fff3cd;
      border: 2px solid #ffc107;
      color: #856404;
    }
    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      transition: transform 0.2s;
      margin: 10px 5px;
    }
    button:hover {
      transform: translateY(-2px);
    }
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      display: inline-block;
      margin-left: 10px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ” ÙØ­Øµ Production</h1>
    <div class="subtitle">www.remostore.net</div>

    <button onclick="testAll()">ğŸš€ ÙØ­Øµ Ø´Ø§Ù…Ù„</button>
    <button onclick="clearResults()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>

    <div id="results"></div>
  </div>

  <script>
    const PRODUCTION_URL = 'https://www.remostore.net';
    
    function showLoading(message) {
      const results = document.getElementById('results');
      results.innerHTML += `
        <div class="result loading">
          <div class="spinner"></div>
          ${message}
        </div>
      `;
    }

    function showSuccess(title, message) {
      const results = document.getElementById('results');
      const lastLoading = results.querySelector('.loading:last-child');
      if (lastLoading) lastLoading.remove();
      
      results.innerHTML += `
        <div class="test-section">
          <div class="test-title">âœ… ${title}</div>
          <div class="result success">${message}</div>
        </div>
      `;
    }

    function showError(title, message) {
      const results = document.getElementById('results');
      const lastLoading = results.querySelector('.loading:last-child');
      if (lastLoading) lastLoading.remove();
      
      results.innerHTML += `
        <div class="test-section">
          <div class="test-title">âŒ ${title}</div>
          <div class="result error">${message}</div>
        </div>
      `;
    }

    function clearResults() {
      document.getElementById('results').innerHTML = '';
    }

    async function testHomepage() {
      showLoading('ÙØ­Øµ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©...');
      try {
        const response = await fetch(PRODUCTION_URL);
        const html = await response.text();
        
        if (!response.ok) {
          showError('Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', `Ø®Ø·Ø£ HTTP: ${response.status}`);
          return;
        }

        // ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ù…Ø­ØªÙˆÙ‰
        if (html.includes('Application error')) {
          showError('Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', 'ÙŠÙˆØ¬Ø¯ Application Error Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©!');
        } else if (html.length < 1000) {
          showError('Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', 'Ø§Ù„ØµÙØ­Ø© ÙØ§Ø±ØºØ© Ø£Ùˆ Ù‚ØµÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹!');
        } else {
          showSuccess('Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', `âœ… ØªØ­Ù…ÙŠÙ„ Ù†Ø§Ø¬Ø­ (${html.length} Ø­Ø±Ù)`);
        }
      } catch (error) {
        showError('Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', error.message);
      }
    }

    async function testProducts() {
      showLoading('ÙØ­Øµ API Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...');
      try {
        const response = await fetch(`${PRODUCTION_URL}/api/products`);
        const data = await response.json();
        
        if (!response.ok) {
          showError('API Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', `Ø®Ø·Ø£ HTTP: ${response.status}`);
          return;
        }

        if (data.error) {
          showError('API Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', data.error);
        } else if (!data.products || data.products.length === 0) {
          showError('API Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', 'âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª! (Ù…Ø¹ Ø£Ù† Ø§Ù„Ù€ database ÙÙŠÙ‡Ø§ 12 Ù…Ù†ØªØ¬)');
        } else {
          showSuccess('API Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', 
            `âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${data.products.length} Ù…Ù†ØªØ¬:\n${data.products.slice(0, 3).map(p => `â€¢ ${p.nameAr} - ${p.price} Ø¬.Ù…`).join('\n')}`
          );
        }
      } catch (error) {
        showError('API Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', error.message);
      }
    }

    async function testHealth() {
      showLoading('ÙØ­Øµ Ø§Ù„ØµØ­Ø© Ø§Ù„Ø¹Ø§Ù…Ø©...');
      try {
        const response = await fetch(`${PRODUCTION_URL}/api/health`);
        const data = await response.json();
        
        if (!response.ok) {
          showError('Health Check', `Ø®Ø·Ø£ HTTP: ${response.status}`);
          return;
        }

        if (data.status === 'ok') {
          showSuccess('Health Check', 
            `âœ… Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„!\n` +
            `â€¢ Database: ${data.database}\n` +
            `â€¢ Environment: ${data.environment}`
          );
        } else if (data.errors && data.errors.length > 0) {
          showError('Health Check', 
            `âŒ ÙŠÙˆØ¬Ø¯ Ø£Ø®Ø·Ø§Ø¡:\n${data.errors.join('\n')}`
          );
        } else if (data.warnings && data.warnings.length > 0) {
          showError('Health Check', 
            `âš ï¸ ÙŠÙˆØ¬Ø¯ ØªØ­Ø°ÙŠØ±Ø§Øª:\n${data.warnings.join('\n')}`
          );
        }
      } catch (error) {
        showError('Health Check', error.message);
      }
    }

    async function testFlashDeals() {
      showLoading('ÙØ­Øµ API Flash Deals...');
      try {
        const response = await fetch(`${PRODUCTION_URL}/api/products/flash-deals`);
        const data = await response.json();
        
        if (!response.ok) {
          showError('Flash Deals API', `Ø®Ø·Ø£ HTTP: ${response.status}`);
          return;
        }

        if (Array.isArray(data)) {
          showSuccess('Flash Deals API', 
            `âœ… API ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ (${data.length} Ø¹Ø±Ø¶)`
          );
        } else {
          showError('Flash Deals API', 'Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„ÙŠØ³Øª array!');
        }
      } catch (error) {
        showError('Flash Deals API', error.message);
      }
    }

    async function testAll() {
      clearResults();
      await testHealth();
      await testHomepage();
      await testProducts();
      await testFlashDeals();
    }
  </script>
</body>
</html>
