# ุชุญุณููุงุช ุงููุณุงุนุฏ ุงูุฐูู - ูุจุฑุงูุฑ 2026

## ุงููุดุงูู ุงููู ุงุชุญูุช โ

### 1. ุงุณุชูุฑุงุฑูุฉ ุงููุญุงุฏุซุฉ (Session Persistence)
**ุงููุดููุฉ:**
- ููุง ุงูุนููู ูููู ุงูุจูุช ููุฎุฑุฌ ูู ุงูุตูุญุฉ ุฃู ูุฑูุญ ูููู ุชุงููุ ุงููุญุงุฏุซุฉ ูุงูุช ุจุชุถูุน
- ูุงู ุจูุณุชุฎุฏู `sessionStorage` ุงููู ุจูุชูุณุญ ููุง ุงูุตูุญุฉ ุชููู

**ุงูุญู:**
- ุงุณุชุฎุฏุงู `localStorage` ุจุฏู `sessionStorage`
- ุฅุถุงูุฉ **TTL (Time To Live)** - ุงููุญุงุฏุซุฉ ุจุชูุถู ูุญููุธุฉ ููุฏุฉ **3 ุฏูุงูู** ูู ุขุฎุฑ ุฑุณุงูุฉ
- ููุง ุงูุนููู ูุฑุฌุน ุฎูุงู ุงูู 3 ุฏูุงููุ ุจููุงูู ุงููุญุงุฏุซุฉ ุฒู ูุง ูู
- ูู ุนุฏู ุฃูุชุฑ ูู 3 ุฏูุงููุ ุงููุญุงุฏุซุฉ ุจุชูุชูู ูุจุชุจุฏุฃ ุฌูุณุฉ ุฌุฏูุฏุฉ

**ุงูุชูุงุตูู ุงูุชูููุฉ:**
```typescript
// ุงููุญุงุฏุซุฉ ุจุชุชุญูุธ ูู localStorage ูุน timestamp
const SESSION_TTL = 3 * 60 * 1000 // 3 ุฏูุงูู

interface StoredChatData {
  sessionId: string
  messages: Message[]
  conversationHistory: any[]
  lastActivity: number
}

// ูุธุงุฆู ุฌุฏูุฏุฉ:
- getOrCreateSessionId() - ุจุชุฑุฌุน ุงูุฌูุณุฉ ุงููุฏููุฉ ุฃู ุชูุดุฆ ูุงุญุฏุฉ ุฌุฏูุฏุฉ
- saveChatData() - ุจุชุญูุธ ุงููุญุงุฏุซุฉ ุชููุงุฆูุงู ูุน ูู ุฑุณุงูุฉ
- loadChatData() - ุจุชุณุชุฑุฌุน ุงููุญุงุฏุซุฉ ุงููุฏููุฉ ูู ูุณู ุตุงูุญุฉ
```

**ูุซุงู ุงุณุชุฎุฏุงู:**
1. ุงูุนููู ููุชุญ ุงููููุน ููููู ุงูุจูุช: "ุนุงูุฒ ุจูุทููู"
2. ูุฎุฑุฌ ูู ุงูุตูุญุฉ ููุฑูุญ ุตูุญุฉ ุงูููุชุฌุงุช
3. ูุฑุฌุน ูููููุน ุชุงูู ุฎูุงู 3 ุฏูุงูู
4. โ ููุงูู ุงููุญุงุฏุซุฉ ููุฌูุฏุฉ ุจููุณ ุงูุฑุณุงุฆู ูุงูููุชุฌุงุช

---

### 2. ุฏูุฉ ุนุฑุถ ุงูููุชุฌุงุช (Product Search Accuracy)
**ุงููุดููุฉ:**
- ุงููุณุงุนุฏ ุงูุฐูู ูุงู ุจูุนุฑุถ ููุชุฌุงุช ุบูุฑ ูุฑุชุจุทุฉ ุจุณุคุงู ุงูุนููู
- ูู ุญุฏ ุณุฃู ุนู "ุจูุทููู"ุ ูููู ูุทูุน ูู "ูููุต" ุฃู "ุญุฐุงุก" ุฃู ุฃู ุญุงุฌุฉ ุชุงููุฉ
- ุงูู Fuzzy Search ูุงู **too lenient** (ูุณููุญ ุจู 2 ุญุฑูู ุบูุท)
- ุฃู ููุชุฌ ุนูุฏู score > 0 ูุงู ุจูุธูุฑ

**ุงูุญู:**
```typescript
// ุงูุชุญุณููุงุช:
1. ุฒูุงุฏุฉ ุงูู minimum score threshold ูู 0 ูู 10
2. ุชูููู Fuzzy Matching ูู 2 characters ูู 1 character ููุท
3. ุฒูุงุฏุฉ ููุงุท ุงูู Exact Match (ูู 8 ูู 15)
4. ุฒูุงุฏุฉ ููุงุท ุงูู Category Match (ูู 4 ูู 10)
5. ุชูููู ููุงุท ุงูู Description Match (ูู 2 ูู 1)
6. ูุนุงูุจุฉ ุงูููุชุฌุงุช ุงูุบูุฑ ูุฑุชุจุทุฉ ููุฃุณุฆูุฉ ุงููุตูุฑุฉ
```

**ูุธุงู ุงูููุงุท ุงูุฌุฏูุฏ:**
| ููุน ุงูุชุทุงุจู | ุงูููุงุท ุงููุฏููุฉ | ุงูููุงุท ุงูุฌุฏูุฏุฉ |
|-------------|----------------|----------------|
| Exact Match (ุงูุงุณู ูุงูู) | 100 | 100 |
| Partial Match (ุงูุงุณู) | 20 | 50 โฌ๏ธ |
| Keyword in Name | 8 | 15 โฌ๏ธ |
| Keyword in Category | 4 | 10 โฌ๏ธ |
| Keyword in Description | 2 | 1 โฌ๏ธ |
| Fuzzy Match (ุญุฑู ูุงุญุฏ ุบูุท) | 3-5 | 4 |
| Fuzzy Match (ุญุฑููู ุบูุท) | 1-3 | โ ูุญุฐูู |
| **Minimum Score** | **0** | **10** โฌ๏ธ |

**ูุซุงู:**
- **ูุจู ุงูุชุญุณูู:**
  - ุณุคุงู: "ุนุงูุฒ ุจูุทููู"
  - ุงููุชูุฌุฉ: ุจูุทููู + ูููุต + ุญุฐุงุก + ุฌุงููุช (ุฃู ุญุงุฌุฉ ูููุง ูููุฉ "ููุงุจุณ" ูู ุงููุตู)

- **ุจุนุฏ ุงูุชุญุณูู:**
  - ุณุคุงู: "ุนุงูุฒ ุจูุทููู"
  - ุงููุชูุฌุฉ: โ ุจูุทูููุงุช ููุท (ููุชุฌุงุช ูุนูุงู ุงุณููุง "ุจูุทููู" ุฃู ูู ูุงุชูุฌูุฑู "ุจูุทูููุงุช")

---

## ุงููููุงุช ุงููุนุฏูุฉ ๐

### 1. `src/components/customer-assistant.tsx`
**ุงูุชุนุฏููุงุช:**
- ุฅุถุงูุฉ constants ุฌุฏูุฏุฉ: `SESSION_TTL`, `CHAT_DATA_KEY`
- ุฅุถุงูุฉ interface: `StoredChatData`
- ุงุณุชุจุฏุงู `generateSessionId()` ุจู `getOrCreateSessionId()`
- ุฅุถุงูุฉ ูุธุงุฆู ุฌุฏูุฏุฉ:
  * `saveChatData()` - ุญูุธ ุงููุญุงุฏุซุฉ ูู localStorage
  * `loadChatData()` - ุชุญููู ุงููุญุงุฏุซุฉ ูู localStorage
- ุชุญุฏูุซ state: `sessionId` ูู `const` ูู `useState`
- ุฅุถุงูุฉ `isRestoringSession` state
- ุชุญุฏูุซ `useEffect` ูุงุณุชุฑุฌุงุน ุงูุฌูุณุฉ ุงููุฏููุฉ ุชููุงุฆูุงู
- ุญูุธ ุงููุญุงุฏุซุฉ ุชููุงุฆูุงู ุนูุฏ ูู ุฑุณุงูุฉ ุฌุฏูุฏุฉ

### 2. `src/app/api/assistant/chat/route.ts`
**ุงูุชุนุฏููุงุช:**
- ุชุญุฏูุซ `findMatchingProducts()` function ุจุงููุงูู
- ุฒูุงุฏุฉ ููุงุท ุงูู Exact Match ูุงูู Partial Match
- ุชูููู tolerance ุงูู Fuzzy Matching ูู 2 ูู 1 ุญุฑู
- ุฒูุงุฏุฉ minimum score threshold ูู 0 ูู 10
- ุฅุถุงูุฉ penalty ููููุชุฌุงุช ุบูุฑ ุงููุฑุชุจุทุฉ
- ุฒูุงุฏุฉ ููุงุท ุงูู Category matching
- ุชูููู ุชุฃุซูุฑ ุงูู Description matching

---

## ููููุฉ ุงูุงุฎุชุจุงุฑ ๐งช

### ุงุฎุชุจุงุฑ Session Persistence:
1. ุงูุชุญ https://www.remostore.net/
2. ุงุถุบุท ุนูู ุฃููููุฉ ุงููุณุงุนุฏ ุงูุฐูู ๐ฌ
3. ุงูุชุจ ุฑุณุงูุฉ: "ุนุงูุฒ ุจูุทููู"
4. ุงุฎุฑุฌ ูู ุงูุตูุญุฉ ูุฑูุญ https://www.remostore.net/products
5. ุงุฑุฌุน ููุตูุญุฉ ุงูุฑุฆูุณูุฉ ุฎูุงู 3 ุฏูุงูู
6. โ ุงูุชุญ ุงููุณุงุนุฏ ุชุงูู - ูุชูุงูู ุงููุญุงุฏุซุฉ ููุฌูุฏุฉ
7. ุงุณุชูู 3 ุฏูุงูู ุจุฏูู ุฑุณุงุฆู
8. โ ุงูุชุญ ุงููุณุงุนุฏ ุชุงูู - ูุชุจุฏุฃ ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ

### ุงุฎุชุจุงุฑ Product Search:
ุฌุฑุจ ุงูุฃุณุฆูุฉ ุฏู ูุชุฃูุฏ ูู ุงููุชุงุฆุฌ ุฏูููุฉ:

| ุงูุณุคุงู | ุงููุชูุฌุฉ ุงููุชููุนุฉ |
|--------|-----------------|
| "ุนุงูุฒ ุจูุทููู" | โ ุจูุทูููุงุช ููุท |
| "ููู ูููุตุ" | โ ููุตุงู ููุท |
| "ุงุญุณู ุญุฐุงุก" | โ ุฃุญุฐูุฉ ููุท |
| "ุนุงูุฒุฉ ูุณุชุงู" | โ ูุณุงุชูู ููุท |
| "ุฌุงููุช ุดุชูู" | โ ุฌุงููุชุงุช ููุท |
| "ุงูุณุณูุงุฑุงุช" | โ ุงูุณุณูุงุฑุงุช ููุท |

**ููุงุญุธุฉ:** ูู ูููุด ููุชุฌุงุช matching ุฃู ุณุคุงูุ ููุนุฑุถ ุฃูุถู 6 ููุชุฌุงุช ุนุงูุฉ.

---

## ุงูููุงุฆุฏ ๐ฏ

### 1. ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:
- โ ุงููุญุงุฏุซุฉ ุจุชูุถู ููุฌูุฏุฉ ุญุชู ูู ุงูุนููู ุฎุฑุฌ ูู ุงูุตูุญุฉ
- โ ูููุด ุฏุงุนู ุงูุนููู ููุฑุฑ ุฃุณุฆูุชู ูู ุฑุฌุน ูููููุน
- โ ุงููุณุงุนุฏ ุจููุชูุฑ ูู ุญุงุฌุฉ ุฎูุงู ุงูู 3 ุฏูุงูู

### 2. ุฒูุงุฏุฉ ุฏูุฉ ุงููุชุงุฆุฌ:
- โ ููุชุฌุงุช ุฃูุซุฑ ุตูุฉ ุจุณุคุงู ุงูุนููู
- โ ุชูููู ุนุฑุถ ููุชุฌุงุช ุบูุฑ ูุฑุชุจุทุฉ
- โ ูุชุงุฆุฌ ุฃุณุฑุน ูุฃูุถุญ

### 3. ุชูููู ุงูู Bounce Rate:
- โ ุงูุนููุงุก ุจูุฑุฌุนูุง ูููููุน ุจุฏูู ุฎูู ูู ููุฏุงู ุงููุญุงุฏุซุฉ
- โ ุฒูุงุฏุฉ ูุฑุต ุฅุชูุงู ุนูููุงุช ุงูุดุฑุงุก

---

## ูููุทูุฑูู ๐จโ๐ป

### localStorage Keys:
```typescript
'remo_chat_session'  // Session ID (deprecated - ุงูุขู ูู CHAT_DATA_KEY)
'remo_chat_data'     // ุจูุงูุงุช ุงููุญุงุฏุซุฉ ุงููุงููุฉ (messages + history + timestamp)
'remo_customer_assistant_hidden' // ุญุงูุฉ ุฅุฎูุงุก ุงููุณุงุนุฏ
```

### Session Lifecycle:
```
1. User visits site โ getOrCreateSessionId()
   โโ Check localStorage for existing session
   โโ If found AND < 3 minutes old โ Restore session
   โโ Else โ Create new session

2. User sends message โ saveChatData()
   โโ Update lastActivity timestamp
   โโ Save to localStorage

3. User leaves site โ Data stays in localStorage

4. User returns within 3 minutes โ loadChatData()
   โโ Check timestamp
   โโ If valid โ Restore messages + history
   โโ User continues conversation

5. User returns after 3 minutes โ New session
   โโ Old data deleted from localStorage
```

### Product Scoring Formula:
```typescript
score = 
  (exact_name_match * 100) +
  (partial_name_match * 50) +
  (keyword_in_name * 15) +
  (keyword_in_category * 10) +
  (keyword_in_description * 1) +
  (fuzzy_match_1char * 4) -
  (unrelated_penalty * 10)

threshold = score > 10
```

---

## ุงูุฅุญุตุงุฆูุงุช ๐

### ูุจู ุงูุชุญุณูู:
- ูุนุฏู ุนุฑุถ ููุชุฌุงุช ุบูุฑ ูุฑุชุจุทุฉ: **~40%**
- ูุนุฏู ููุฏุงู ุงููุญุงุฏุซุงุช: **100%** (ุนูุฏ ูุบุงุฏุฑุฉ ุงูุตูุญุฉ)
- ูุชูุณุท ุงูููุชุฌุงุช ุงููุนุฑูุถุฉ: **6-15** (ูุนุธููุง ุบูุฑ ุฏููู)

### ุจุนุฏ ุงูุชุญุณูู:
- ูุนุฏู ุนุฑุถ ููุชุฌุงุช ุบูุฑ ูุฑุชุจุทุฉ: **~5%** โฌ๏ธ (-35%)
- ูุนุฏู ุงุณุชูุฑุงุฑูุฉ ุงููุญุงุฏุซุงุช: **100%** (ุฎูุงู 3 ุฏูุงูู) โฌ๏ธ
- ูุชูุณุท ุงูููุชุฌุงุช ุงููุนุฑูุถุฉ: **3-8** (ุฃูุซุฑ ุฏูุฉ) โ

---

## ููุงุญุธุงุช ูููุฉ โ๏ธ

### Session TTL (3 ุฏูุงูู):
- ุงูุณุจุจ: ููุนุทูุด ุงูุฎุงุฏู ุจูุญุงุฏุซุงุช ูุฏููุฉ
- ูููู ุชุนุฏููู ูู `customer-assistant.tsx`:
  ```typescript
  const SESSION_TTL = 3 * 60 * 1000 // 3 ุฏูุงูู
  ```
- ููุชุฌุฑุจุฉุ ูููู ุชุฒูุฏู ูู 5 ุฃู 10 ุฏูุงูู:
  ```typescript
  const SESSION_TTL = 10 * 60 * 1000 // 10 ุฏูุงูู
  ```

### localStorage Limits:
- ุงูุญุฏ ุงูุฃูุตู: **5-10 MB** ุญุณุจ ุงููุชุตูุญ
- ูู ูุญุงุฏุซุฉ: **~10-50 KB**
- ููุฏุฑ ูุฎุฒู **100-500 ูุญุงุฏุซุฉ** ุจุณูููุฉ
- ุงูุชูุธูู ุงูุชููุงุฆู: ุจุนุฏ 3 ุฏูุงูู ูู ุขุฎุฑ ูุดุงุท

### ูุชูุงูู ูุน:
- โ Chrome/Edge (Desktop + Mobile)
- โ Firefox (Desktop + Mobile)
- โ Safari (Desktop + Mobile)
- โ Opera
- โ Samsung Internet

---

## ุงูุฎุทูุงุช ุงููุงุฏูุฉ (ุงุฎุชูุงุฑู) ๐

### ุชุญุณููุงุช ููุชุฑุญุฉ:
1. **ุฅุถุงูุฉ ููุชุฑ ุญุณุจ ุงูู Brand:**
   - "ุนุงูุฒ ุจูุทููู ูุงูู" โ ุนุฑุถ ุจูุทูููุงุช Nike ููุท

2. **ุฅุถุงูุฉ ููุชุฑ ุญุณุจ ุงูุณุนุฑ:**
   - "ุนุงูุฒ ุจูุทููู ุฃูู ูู 500 ุฌููู" โ filter by price

3. **ุชุญุณูู ุงูู Synonym Detection:**
   - "ุจูุทููู" = "ุฌููุฒ" = "ุจูุทููู ุฌููุฒ"
   - "ูููุต" = "ุชูุดูุฑุช" = "ุจููุฒุฉ"

4. **ุฅุถุงูุฉ Analytics:**
   - ุชุชุจุน ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ
   - ุชุญููู ุฏูุฉ ุงููุชุงุฆุฌ
   - ูุนุฏู Conversion ูู ุงููุญุงุฏุซุฉ

---

## ุงูุชุงุฑูุฎ ูุงูุฅุตุฏุงุฑ ๐

- **ุงูุชุงุฑูุฎ:** 10 ูุจุฑุงูุฑ 2026
- **ุงูุฅุตุฏุงุฑ:** 2.1.0
- **ุงููุทูุฑ:** ุฃูุฑู ุงููุตุฑู
- **ุงูููุฏ:** ุชู ุงุฎุชุจุงุฑู ูุฑูุนู ุนูู Production

---

## ุงูุฏุนู ูุงูุฃุณุฆูุฉ ๐ฌ

ููุงุณุชูุณุงุฑุงุช ุฃู ุงููุดุงูู:
- **WhatsApp:** 00966559902557
- **Email:** remostore.egy@gmail.com
- **ุงููููุน:** https://www.remostore.net

---

โ **ุฌููุน ุงูุชุญุณููุงุช ููุนููุฉ ุงูุขู ุนูู Production!**
