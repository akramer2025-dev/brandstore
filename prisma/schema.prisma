generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String         @id @default(cuid())
  name             String?
  username         String?        @unique
  email            String?        @unique
  emailVerified    DateTime?
  image            String?
  password         String?
  role             UserRole       @default(CUSTOMER)
  phone            String?
  address          String?
  points           Int            @default(0) // Ù†Ù‚Ø§Ø· Ø§Ù„ÙˆÙ„Ø§Ø¡
  partnerId        String?        // Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø±ÙŠÙƒ (Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†)
  partnerStaffPermissions Json?   // ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ¸Ù ÙƒÙ€ JSON
  lastLoginAt      DateTime?      // Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
  lastLoginIp      String?        // Ø¢Ø®Ø± IP
  lastLoginDevice  String?        // Ø¢Ø®Ø± Ø¬Ù‡Ø§Ø²
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  accounts         Account[]
  deliveryStaff    DeliveryStaff?
  marketingStaff   MarketingStaff?
  messagesReceived Message[]      @relation("ReceivedMessages")
  messagesSent     Message[]      @relation("SentMessages")
  orders           Order[]
  reviews          Review[]
  sessions         Session[]
  vendor           Vendor?
  wishlistItems    WishlistItem[]
  cartItems        Cart[] // Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø©
  savedAddresses   SavedAddress[] // Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
  pointTransactions PointTransaction[] // Ø³Ø¬Ù„ Ø­Ø±ÙƒØ© Ø§Ù„Ù†Ù‚Ø§Ø·
  pushSubscriptions PushSubscription[] // Push notification subscriptions
  fcmDeviceTokens  FCMDeviceToken[] // FCM tokens Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
  activityLogs     UserActivityLog[] // Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·
  sheinOrders      SheinOrder[] // Ø·Ù„Ø¨Ø§Øª Ø´ÙŠ Ø¥Ù†
  installmentAgreements InstallmentAgreement[] // Ø§ØªÙØ§Ù‚ÙŠØ§Øª Ø§Ù„ØªÙ‚Ø³ÙŠØ·
  vehicleFinancingApplications VehicleFinancing[] // Ø·Ù„Ø¨Ø§Øª ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª
  vehicleInquiries VehicleInquiry[] // Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª
  testDriveRequests TestDriveRequest[] // Ø·Ù„Ø¨Ø§Øª ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©
  auctionsWon      Auction[] @relation("AuctionWinner") // Ø§Ù„Ù…Ø²Ø§Ø¯Ø§Øª Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ù‡Ø§
  bids             Bid[] @relation("UserBids") // Ø§Ù„Ù…Ø²Ø§ÙŠØ¯Ø§Øª
  
  partner          PartnerCapital? @relation(fields: [partnerId], references: [id])

  @@map("users")
}

// Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡
model SavedAddress {
  id              String   @id @default(cuid())
  userId          String
  title           String   // Ù…Ø«Ù„: Ø§Ù„Ù…Ù†Ø²Ù„ØŒ Ø§Ù„Ø¹Ù…Ù„ØŒ Ø§Ù„Ø®
  fullName        String   // Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„
  phone           String   // Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
  alternativePhone String? // Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¨Ø¯ÙŠÙ„
  governorate     String   // Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
  city            String   // Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ù…Ø±ÙƒØ²
  district        String   // Ø§Ù„Ø­ÙŠ/Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
  street          String   // Ø§Ø³Ù… Ø§Ù„Ø´Ø§Ø±Ø¹
  buildingNumber  String?  // Ø±Ù‚Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰/Ø§Ù„Ø¹Ù…Ø§Ø±Ø©
  floorNumber     String?  // Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ø¨Ù‚
  apartmentNumber String?  // Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©
  landmark        String?  // Ø£Ù‚Ø±Ø¨ Ù…Ø¹Ù„Ù…
  postalCode      String?  // Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ
  isDefault       Boolean  @default(false) // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("saved_addresses")
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
  @@map("accounts")
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("sessions")
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
  @@map("verification_tokens")
}

model Vendor {
  id                 String         @id @default(cuid())
  userId             String         @unique
  businessName       String?        @default("")
  businessNameAr     String?        @default("")
  businessType       String?        @default("store")
  storeName          String?        @default("")
  storeNameAr        String?        @default("")
  storeDescription   String?
  storeDescriptionAr String?
  logo               String?
  banner             String?
  phone              String?
  alternativePhone   String?
  whatsapp           String?
  // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ØªØ¬Ø± (Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„Ø´Ø­Ù† Ù…Ø¹ Ø¨ÙˆØ³Ø·Ø©)
  address            String?        // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„ (Ù†Øµ Ø­Ø±)
  governorate        String?        // Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
  city               String?        // Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ù…Ø±ÙƒØ²
  region             String?        // Ø§Ù„Ø­ÙŠ/Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
  district           String?        // Ø§Ù„Ù…Ù†Ø·Ù‚Ø© (Ù†Ø³Ø®Ø© Ø«Ø§Ù†ÙŠØ© Ù„Ù„ØªÙˆØ§ÙÙ‚)
  street             String?        // Ø§Ø³Ù… Ø§Ù„Ø´Ø§Ø±Ø¹
  buildingNumber     String?        // Ø±Ù‚Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰/Ø§Ù„Ø¹Ù…Ø§Ø±Ø©
  floorNumber        String?        // Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ø¨Ù‚
  apartmentNumber    String?        // Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©
  landmark           String?        // Ø£Ù‚Ø±Ø¨ Ù…Ø¹Ù„Ù…
  postalCode         String?        // Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ
  pickupInstructions String?        // ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø´Ø­Ù†Ø§Øª
  description        String?
  descriptionAr      String?
  category           String?
  subCategory        String?
  yearsOfExperience  Int            @default(0)
  commissionRate     Float          @default(15)
  // Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„
  initialCapital     Float          @default(0)  // Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„ÙŠ (Ø«Ø§Ø¨Øª) - ÙŠØ¨Ø¯Ø£ Ù…Ù† ØµÙØ±
  capitalBalance     Float          @default(0)  // Ø±ØµÙŠØ¯ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ (Ù…ØªØºÙŠØ±) - ÙŠØ¨Ø¯Ø£ Ù…Ù† ØµÙØ±
  // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  bankName           String?
  accountNumber      String?
  accountHolderName  String?
  bankAccountName    String?
  bankAccountNumber  String?
  iban               String?
  // Ø§Ù„Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  instaPay           String?
  etisalatCash       String?        // Ø§ØªØµØ§Ù„Ø§Øª ÙƒØ§Ø´
  vodafoneCash       String?        // ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´
  wePay              String?        // ÙˆÙŠ Ø¨Ø§ÙŠ
  // Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ø±Ø³Ù…ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  commercialRegister String?
  taxCard            String?
  nationalId         String?
  businessLicense    String?
  isApproved         Boolean        @default(false)
  isActive           Boolean        @default(true)
  isSuspended        Boolean        @default(false) // Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª Ù„Ù„Ø­Ø³Ø§Ø¨
  suspensionReason   String?        // Ø³Ø¨Ø¨ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù (Ø±Ø³Ø§Ù„Ø© Ù…Ø®ØµØµØ©)
  suspendedAt        DateTime?      // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù
  suspendedBy        String?        // ID Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù„ÙŠ Ø¹Ù…Ù„ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù
  rating             Float          @default(0)
  totalSales         Int            @default(0)
  // ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø´Ø±ÙŠÙƒ
  canDeleteOrders    Boolean        @default(false) // ØµÙ„Ø§Ø­ÙŠØ© Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª
  canUploadShein     Boolean        @default(false) // ØµÙ„Ø§Ø­ÙŠØ© Ø±ÙØ¹ Ù…Ù†ØªØ¬Ø§Øª Ø´ÙŠ Ø¥Ù†
  canAddOfflineProducts Boolean     @default(false) // ØµÙ„Ø§Ø­ÙŠØ© Ø¥Ø¶Ø§ÙØ© Ø¨Ø¶Ø§Ø¹Ø© Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø¸Ø§Ù…
  createdAt          DateTime       @default(now())
  updatedAt          DateTime       @updatedAt
  orders             Order[]
  products           Product[]
  payouts            VendorPayout[]
  partners           PartnerCapital[]
  inventoryItems     InventoryItem[]
  expenses           VendorExpense[]
  vouchers           VendorVoucher[]
  sales              Sale[]
  purchases          Purchase[]
  offlineProducts    OfflineProduct[]
  offlineSuppliers   OfflineSupplier[]
  vehicles           Vehicle[] // Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª (Ø³ÙŠØ§Ø±Ø§Øª ÙˆÙ…ÙˆØªÙˆØ³ÙŠÙƒÙ„Ø§Øª)
  user               User           @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("vendors")
}

model VendorPayout {
  id        String       @id @default(cuid())
  vendorId  String
  amount    Float
  status    PayoutStatus @default(PENDING)
  method    String
  reference String?
  notes     String?
  paidAt    DateTime?
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  vendor    Vendor       @relation(fields: [vendorId], references: [id])

  @@map("vendor_payouts")
}

model Category {
  id          String    @id @default(cuid())
  name        String
  nameAr      String
  description String?
  image       String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  products    Product[]

  @@map("categories")
}

model Product {
  id              String         @id @default(cuid())
  name            String
  nameAr          String
  description     String?
  descriptionAr   String?
  price           Float
  originalPrice   Float?
  categoryId      String
  images          String?
  videoUrl        String?        // Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ù†ØªØ¬
  stock           Int            @default(0)
  isActive        Boolean        @default(true)
  vendorId        String?
  isOwnProduct    Boolean        @default(false)
  isFlashDeal     Boolean        @default(false)
  flashDealEndsAt DateTime?
  badge           String?
  soldCount       Int            @default(0)
  viewCount       Int            @default(0)
  // Ø­Ù‚ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø©
  sizes           String?        // Ù…Ù‚Ø§Ø³Ø§Øª Ù…ØªØ§Ø­Ø© (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„): "S,M,L,XL"
  colors          String?        // Ø£Ù„ÙˆØ§Ù† Ù…ØªØ§Ø­Ø© (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„): "Ø£Ø­Ù…Ø±,Ø£Ø²Ø±Ù‚,Ø£Ø³ÙˆØ¯"
  saleType        SaleType       @default(SINGLE) // Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ¹: Ù‚Ø·Ø¹Ø© ÙˆØ§Ø­Ø¯Ø© Ø£Ùˆ Ø¹Ø±Ø¶
  bundleProducts  String?        // Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø±ÙÙ‚Ø© ÙÙŠ Ø§Ù„Ø¹Ø±Ø¶ (IDs Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)
  bundleDiscount  Float?         // Ø®ØµÙ… Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©
  platformCommission Float       @default(5) // Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…ØªØ¬Ø± (Ø§ÙØªØ±Ø§Ø¶ÙŠ 5%)
  isVisible       Boolean        @default(true) // ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø± Ø£Ù… Ù„Ø§
  productionCost  Float?         // ØªÙƒÙ„ÙØ© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ (Ù„Ù„Ø£Ø±Ø¨Ø§Ø­)
  
  // ============ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø© ============
  isImported       Boolean        @default(false)     // Ù‡Ù„ Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø³ØªÙˆØ±Ø¯
  importSource     ImportSource?  // Ù…ØµØ¯Ø± Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ (Shein, AliExpress, Alibaba)
  marketingStaffId String?        // Ù…ÙˆØ¸Ù Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
  downPaymentPercent Float        @default(100)       // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© (100% = Ø§Ù„ÙƒÙ„ØŒ 50% = Ù†Øµ)
  deliveryDaysMin  Int?           // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ø£ÙŠØ§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„
  deliveryDaysMax  Int?           // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø£ÙŠØ§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„
  importNotes      String?        // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯
  
  // ============ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¯ÙØ¹ ============
  allowCashOnDelivery Boolean    @default(true) // Ù‡Ù„ ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
  allowInstallment    Boolean    @default(false) // Ù‡Ù„ Ø§Ù„Ù…Ù†ØªØ¬ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙ‚Ø³ÙŠØ· (4 Ø¯ÙØ¹Ø§Øª)
  
  // ============ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ÙˆØ³ÙŠØ· (Consignment/Dropship) ============
  productSource   ProductSource  @default(OWNED)     // Ù…ØµØ¯Ø± Ø§Ù„Ù…Ù†ØªØ¬: Ù…Ù…Ù„ÙˆÙƒ Ø£Ùˆ ÙˆØ³ÙŠØ·
  supplierName    String?        // Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯/Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ø£ØµÙ„ÙŠ
  supplierPhone   String?        // Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ù…ÙˆØ±Ø¯
  supplierCost    Float?         // Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯ (Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚ Ù„Ù‡)
  isSupplierPaid  Boolean        @default(false)     // Ù‡Ù„ ØªÙ… Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ù…ÙˆØ±Ø¯
  supplierPaidAt  DateTime?      // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ù…ÙˆØ±Ø¯
  supplierNotes   String?        // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù† Ø§Ù„Ù…ÙˆØ±Ø¯
  
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  fabricPieces    FabricPiece[]
  orderItems      OrderItem[]
  productions     Production[]
  category        Category       @relation(fields: [categoryId], references: [id])
  vendor          Vendor?        @relation(fields: [vendorId], references: [id])
  reviews         Review[]
  wishlistItems   WishlistItem[]
  cartItems       Cart[] // Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø©
  inventoryItems  InventoryItem[]
  socialMediaPosts SocialMediaPost[]
  supplierPayments SupplierPayment[]
  marketingStaff  MarketingStaff? @relation(fields: [marketingStaffId], references: [id])
  commissions     MarketingCommission[]
  variants        ProductVariant[]
  auctions        Auction[] // Ø§Ù„Ù…Ø²Ø§Ø¯Ø§Øª

  @@map("products")
}

// ğŸ¯ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª ÙˆØ§Ù„Ø£Ø¹Ù…Ø§Ø± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© (Variants System)
model ProductVariant {
  id          String      @id @default(cuid())
  productId   String
  variantType VariantType @default(SIZE)
  name        String      // "Medium" Ø£Ùˆ "1-3 Ø´Ù‡ÙˆØ±"
  nameAr      String      // "Ù…ØªÙˆØ³Ø·" Ø£Ùˆ "Ù…Ù† Ø´Ù‡Ø± Ù„Ù€ 3 Ø´Ù‡ÙˆØ±"
  sku         String?     // ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠ
  price       Float       // Ø§Ù„Ø³Ø¹Ø± Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø§Ø³
  stock       Int         @default(0) // Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªÙˆÙØ±Ø©
  isActive    Boolean     @default(true)
  sortOrder   Int         @default(0) // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ø±Ø¶
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  
  product     Product     @relation(fields: [productId], references: [id], onDelete: Cascade)
  
  @@map("product_variants")
  @@index([productId])
  @@index([isActive])
}

model Fabric {
  id              String        @id @default(cuid())
  name            String
  nameAr          String
  type            String
  color           String
  purchasePrice   Float
  totalLength     Float
  usedLength      Float         @default(0)
  availableLength Float
  supplier        String?
  purchaseDate    DateTime      @default(now())
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  fabricPieces    FabricPiece[]

  @@map("fabrics")
}

model FabricPiece {
  id           String   @id @default(cuid())
  fabricId     String
  productId    String
  lengthUsed   Float
  quantity     Int
  costPerPiece Float
  notes        String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  fabric       Fabric   @relation(fields: [fabricId], references: [id])
  product      Product  @relation(fields: [productId], references: [id])

  @@map("fabric_pieces")
}

model Order {
  id               String            @id @default(cuid())
  orderNumber      String            @unique @default(cuid())
  customerId       String
  vendorId         String?
  status           OrderStatus       @default(PENDING)
  paymentStatus    PaymentStatus     @default(PENDING)
  paymentMethod    PaymentMethod     @default(CASH_ON_DELIVERY)
  eWalletType      String?           // Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©: etisalat_cash, vodafone_cash, we_pay
  bankTransferReceipt String?        // ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ (Cloudinary URL)
  eWalletReceipt   String?           // ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© (Cloudinary URL)
  wePayReceipt     String?           // ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ ØªØ­ÙˆÙŠÙ„ ÙˆÙŠ Ø¨Ø§ÙŠ (Cloudinary URL)
  totalAmount      Float
  deliveryFee      Float             @default(0)
  finalAmount      Float
  installmentId    String?           @unique
  deliveryStaffId  String?
  deliveryAddress  String
  deliveryPhone    String
  customerNotes    String?
  rejectionReason  String?
  inspectionResult InspectionResult?
  deletedAt        DateTime?         // Soft Delete - ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø°Ù (null = Ù…ÙˆØ¬ÙˆØ¯)
  deletedBy        String?           // Ù…Ù† Ù‚Ø§Ù… Ø¨Ø§Ù„Ø­Ø°Ù (userId)
  deletedReason    String?           // Ø³Ø¨Ø¨ Ø§Ù„Ø­Ø°Ù
  // âœ¨ Ø­Ù‚ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…ØªØ·ÙˆØ±
  deliveryMethod   DeliveryMethod    @default(HOME_DELIVERY)
  pickupLocation   String?           // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ØªØ¬Ø± Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…
  governorate      String?           // Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© (Ù„Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…Ù†Ø²Ù„ÙŠ)
  downPayment      Float?            // Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©
  remainingAmount  Float?            // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
  // ğŸšš Ø­Ù‚ÙˆÙ„ Ø´Ø±ÙƒØ© Ø¨ÙˆØ³Ø·Ø© Ù„Ù„Ø´Ø­Ù†
  bustaShipmentId  String?           // Ø±Ù‚Ù… Ø§Ù„Ø´Ø­Ù†Ø© Ù…Ù† Ø´Ø±ÙƒØ© Ø¨ÙˆØ³Ø·Ø©
  bustaStatus      BustaStatus?      // Ø­Ø§Ù„Ø© Ø§Ù„Ø´Ø­Ù†Ø©
  bustaNotes       String?           // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù† Ø´Ø±ÙƒØ© Ø¨ÙˆØ³Ø·Ø©
  bustaSentAt      DateTime?         // ØªØ§Ø±ÙŠØ® Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ø´Ø±ÙƒØ© Ø¨ÙˆØ³Ø·Ø©
  bustaTrackingUrl String?           // Ø±Ø§Ø¨Ø· ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø©
  shippingCompany  String?           @default("BOSTA") // Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  installmentPlan  InstallmentPlan?
  installmentAgreement InstallmentAgreement? // Ø§ØªÙØ§Ù‚ÙŠØ© Ø§Ù„ØªÙ‚Ø³ÙŠØ·
  items            OrderItem[]
  customer         User              @relation(fields: [customerId], references: [id])
  deliveryStaff    DeliveryStaff?    @relation(fields: [deliveryStaffId], references: [id])
  vendor           Vendor?           @relation(fields: [vendorId], references: [id])

  @@map("orders")
}

// Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¶Ø© Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ±
model OrderRejectionLog {
  id               String   @id @default(cuid())
  orderId          String   
  rejectedBy       String   // userId Ù…Ù† Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨
  rejectedByRole   String   // VENDOR, ADMIN, or DEVELOPER
  rejectionReason  String   // Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶
  orderValue       Float    // Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø±ÙÙˆØ¶
  vendorId         String?  // Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ø§Ù„Ø·Ù„Ø¨ (Ø¥Ù† ÙˆØ¬Ø¯)
  createdAt        DateTime @default(now())

  @@index([vendorId])
  @@index([rejectedBy])
  @@index([createdAt])
  @@map("order_rejection_logs")
}

model InstallmentPlan {
  id             String               @id @default(cuid())
  orderId        String               @unique
  totalAmount    Float
  downPayment    Float
  monthlyAmount  Float
  numberOfMonths Int
  interestRate   Float                @default(0)
  status         InstallmentStatus    @default(ACTIVE)
  startDate      DateTime             @default(now())
  endDate        DateTime
  createdAt      DateTime             @default(now())
  updatedAt      DateTime             @updatedAt
  payments       InstallmentPayment[]
  order          Order                @relation(fields: [orderId], references: [id])

  @@map("installment_plans")
}

model InstallmentPayment {
  id            String                   @id @default(cuid())
  planId        String
  amount        Float
  dueDate       DateTime
  paidDate      DateTime?
  status        InstallmentPaymentStatus @default(PENDING)
  paymentMethod String?
  reference     String?
  notes         String?
  createdAt     DateTime                 @default(now())
  updatedAt     DateTime                 @updatedAt
  plan          InstallmentPlan          @relation(fields: [planId], references: [id])

  @@map("installment_payments")
}

model OrderItem {
  id          String                @id @default(cuid())
  orderId     String
  productId   String
  quantity    Int
  price       Float
  createdAt   DateTime              @default(now())
  order       Order                 @relation(fields: [orderId], references: [id], onDelete: Cascade)
  product     Product               @relation(fields: [productId], references: [id])
  commissions MarketingCommission[] // Ø¹Ù…ÙˆÙ„Ø§Øª Ù…ÙˆØ¸Ù Ø§Ù„ØªØ³ÙˆÙŠÙ‚

  @@map("order_items")
}

model DeliveryStaff {
  id                   String    @id @default(cuid())
  userId               String?   @unique
  name                 String?   @default("")
  phone                String    @unique
  alternativePhone     String?
  whatsapp             String?
  email                String?   @unique
  password             String?   @default("")
  address              String?
  city                 String?
  region               String?
  vehicleType          String?
  vehicleNumber        String?
  drivingLicense       String?
  nationalId           String?
  // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  bankName             String?
  accountNumber        String?
  iban                 String?
  accountHolderName    String?
  // Ø§Ù„Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  instaPay             String?
  etisalatCash         String?
  vodafoneCash         String?
  wePay                String?
  isActive             Boolean   @default(true)
  isAvailable          Boolean   @default(true)
  isApproved           Boolean   @default(false)
  currentLat           Float?
  currentLng           Float?
  lastLocationUpdate   DateTime?
  totalDeliveries      Int       @default(0)
  successfulDeliveries Int       @default(0)
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @updatedAt
  user                 User?     @relation(fields: [userId], references: [id], onDelete: Cascade)
  orders               Order[]

  @@map("delivery_staff")
}

// Ù…ÙˆØ¸Ù Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø©
model MarketingStaff {
  id                    String                @id @default(cuid())
  userId                String                @unique
  name                  String
  phone                 String                @unique
  email                 String?               @unique
  commissionRate        Float                 @default(5) // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© (Ø§ÙØªØ±Ø§Ø¶ÙŠ 5%)
  totalSales            Float                 @default(0) // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
  totalCommission       Float                 @default(0) // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª
  isActive              Boolean               @default(true)
  isApproved            Boolean               @default(false)
  // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  bankName              String?
  accountNumber         String?
  iban                  String?
  accountHolderName     String?
  // Ø§Ù„Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  instaPay              String?
  etisalatCash          String?
  vodafoneCash          String?
  wePay                 String?
  createdAt             DateTime              @default(now())
  updatedAt             DateTime              @updatedAt
  user                  User                  @relation(fields: [userId], references: [id], onDelete: Cascade)
  products              Product[]             // Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©
  commissions           MarketingCommission[] // Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª

  @@map("marketing_staff")
}

// Ø³Ø¬Ù„ Ø¹Ù…ÙˆÙ„Ø§Øª Ù…ÙˆØ¸ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚
model MarketingCommission {
  id                String         @id @default(cuid())
  marketingStaffId  String
  productId         String
  orderId           String
  orderItemId       String
  productName       String         // Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬
  saleAmount        Float          // Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¨ÙŠØ¹
  commissionRate    Float          // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©
  commissionAmount  Float          // Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©
  isPaid            Boolean        @default(false) // Ù‡Ù„ ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©
  paidAt            DateTime?      // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  marketingStaff    MarketingStaff @relation(fields: [marketingStaffId], references: [id])
  product           Product        @relation(fields: [productId], references: [id])
  orderItem         OrderItem      @relation(fields: [orderItemId], references: [id])

  @@map("marketing_commissions")
  @@index([marketingStaffId])
  @@index([productId])
  @@index([isPaid])
}

model InventoryLog {
  id          String   @id @default(cuid())
  productId   String
  productName String
  changeType  String
  quantity    Int
  stockBefore Int
  stockAfter  Int
  notes       String?
  createdAt   DateTime @default(now())

  @@map("inventory_logs")
}

model Review {
  id            String   @id @default(cuid())
  productId     String
  userId        String
  orderId       String?  // Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø°ÙŠ ØªÙ… ÙÙŠÙ‡ Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬
  rating        Int
  comment       String?
  images        String?  // ØµÙˆØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)
  isApproved    Boolean  @default(false)
  pointsAwarded Int      @default(0) // Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù…Ù†ÙˆØ­Ø© (5 Ù„Ù„ØªÙ‚ÙŠÙŠÙ… + 5 Ù„Ù„ØµÙˆØ±Ø©)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  product       Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("reviews")
}

model RawMaterial {
  id             String               @id @default(cuid())
  name           String
  nameAr         String
  category       MaterialCategory
  unit           String
  quantity       Float
  minQuantity    Float                @default(10)
  unitPrice      Float
  totalValue     Float
  supplier       String?
  location       String?
  lastPurchase   DateTime?
  createdAt      DateTime             @default(now())
  updatedAt      DateTime             @updatedAt
  movements      MaterialMovement[]
  productionUses ProductionMaterial[]

  @@map("raw_materials")
}

model MaterialMovement {
  id          String       @id @default(cuid())
  materialId  String
  type        MovementType
  quantity    Float
  unitPrice   Float?
  totalCost   Float?
  previousQty Float
  newQty      Float
  reference   String?
  notes       String?
  createdBy   String?
  createdAt   DateTime     @default(now())
  material    RawMaterial  @relation(fields: [materialId], references: [id])

  @@map("material_movements")
}

model Production {
  id                String               @id @default(cuid())
  productionNumber  String               @unique @default(cuid())
  productId         String
  quantity          Int
  laborCost         Float                @default(0)
  overheadCost      Float                @default(0)
  totalMaterialCost Float
  totalCost         Float
  costPerUnit       Float
  status            ProductionStatus     @default(PLANNED)
  startDate         DateTime?
  completionDate    DateTime?
  notes             String?
  createdBy         String?
  createdAt         DateTime             @default(now())
  updatedAt         DateTime             @updatedAt
  materials         ProductionMaterial[]
  product           Product              @relation(fields: [productId], references: [id])

  @@map("productions")
}

model ProductionMaterial {
  id           String      @id @default(cuid())
  productionId String
  materialId   String
  quantityUsed Float
  unitCost     Float
  totalCost    Float
  createdAt    DateTime    @default(now())
  material     RawMaterial @relation(fields: [materialId], references: [id])
  production   Production  @relation(fields: [productionId], references: [id], onDelete: Cascade)

  @@map("production_materials")
}

model PaymentVoucher {
  id              String                  @id @default(cuid())
  voucherNumber   String                  @unique
  type            VoucherType
  amount          Float
  paymentMethod   AccountingPaymentMethod
  recipientName   String?
  payerName       String?
  category        ExpenseCategory?
  reference       String?
  description     String?
  attachments     String?
  status          VoucherStatus           @default(PENDING)
  approvedBy      String?
  approvedAt      DateTime?
  paidBy          String?
  transactionDate DateTime                @default(now())
  createdBy       String?
  createdAt       DateTime                @default(now())
  updatedAt       DateTime                @updatedAt

  @@map("payment_vouchers")
}

model MarketingCampaign {
  id             String         @id @default(cuid())
  name           String
  type           CampaignType
  types          Json?          // Ø£Ù†ÙˆØ§Ø¹ Ù…ØªØ¹Ø¯Ø¯Ø© Ù„Ù„Ø­Ù…Ù„Ø©
  platform       String?
  budget         Float
  spent          Float          @default(0)
  startDate      DateTime
  endDate        DateTime?
  status         CampaignStatus @default(ACTIVE)
  targetAudience String?
  keywords       String?
  adCopy         String?
  impressions    Int            @default(0)
  clicks         Int            @default(0)
  conversions    Int            @default(0)
  ctr            Float          @default(0)
  cpc            Float          @default(0)
  roi            Float          @default(0)
  notes          String?
  
  // Facebook Integration
  facebookCampaignId String?    // Ù…Ø¹Ø±Ù Ø§Ù„Ø­Ù…Ù„Ø© Ø¹Ù„Ù‰ Facebook
  facebookAdSetId    String?    // Ù…Ø¹Ø±Ù Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
  facebookAdId       String?    // Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
  
  createdBy      String?
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt

  @@map("marketing_campaigns")
}

model SeoKeyword {
  id           String    @id @default(cuid())
  keyword      String
  searchVolume Int?
  difficulty   Int?
  currentRank  Int?
  targetRank   Int?
  url          String?
  status       String?
  lastChecked  DateTime?
  notes        String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt

  @@map("seo_keywords")
}

model WebsiteAnalytics {
  id                 String   @id @default(cuid())
  date               DateTime @unique
  pageViews          Int      @default(0)
  uniqueVisitors     Int      @default(0)
  bounceRate         Float    @default(0)
  avgSessionDuration Float    @default(0)
  topPages           String?
  topProducts        String?
  trafficSources     String?
  conversions        Int      @default(0)
  revenue            Float    @default(0)
  createdAt          DateTime @default(now())

  @@map("website_analytics")
}

model WishlistItem {
  id               String   @id @default(cuid())
  userId           String
  productId        String
  notifyOnLowStock Boolean  @default(true)
  createdAt        DateTime @default(now())
  product          Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  user             User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, productId])
  @@map("wishlist_items")
}

// ğŸ›’ Cart - Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø© Ø¹Ø¨Ø± Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
model Cart {
  id        String   @id @default(cuid())
  userId    String
  productId String
  variantId String?  // Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø°Ø§Øª Ø§Ù„Ù€ variants
  quantity  Int      @default(1)
  price     Float    // Ø§Ù„Ø³Ø¹Ø± ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@unique([userId, productId, variantId])
  @@index([userId])
  @@map("carts")
}

model Message {
  id             String   @id @default(cuid())
  content        String
  senderId       String
  receiverId     String?
  isRead         Boolean  @default(false)
  isAdminMessage Boolean  @default(false)
  orderId        String?
  attachmentUrl  String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  receiver       User?    @relation("ReceivedMessages", fields: [receiverId], references: [id], onDelete: Cascade)
  sender         User     @relation("SentMessages", fields: [senderId], references: [id], onDelete: Cascade)

  @@index([senderId])
  @@index([receiverId])
  @@map("messages")
}

// ============ Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ ============
model ChatConversation {
  id           String        @id @default(cuid())
  sessionId    String        @unique // Ù…Ø¹Ø±Ù Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­
  customerName String?       // Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ùˆ Ù…Ø¹Ø±ÙˆÙ
  customerIP   String?       // IP Ø§Ù„Ø¹Ù…ÙŠÙ„
  source       String        @default("website") // website, chat-page, messenger
  isResolved   Boolean       @default(false)
  lastMessageAt DateTime     @default(now())
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  messages     ChatMessage[]

  @@index([sessionId])
  @@index([lastMessageAt])
  @@map("chat_conversations")
}

model ChatMessage {
  id              String           @id @default(cuid())
  conversationId  String
  role            String           // user, assistant
  content         String
  productIds      String?          // IDs Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)
  createdAt       DateTime         @default(now())
  conversation    ChatConversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)

  @@index([conversationId])
  @@map("chat_messages")
}

model SiteSetting {
  id          String   @id @default(cuid())
  key         String   @unique
  value       String
  type        String   @default("text")
  category    String   @default("general")
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("site_settings")
}

model SliderImage {
  id           String   @id @default(cuid())
  title        String
  titleAr      String?
  subtitle     String?
  subtitleAr   String?
  imageUrl     String
  link         String?
  buttonText   String?
  buttonTextAr String?
  order        Int      @default(0)
  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("slider_images")
}

enum UserRole {
  ADMIN
  CUSTOMER
  DELIVERY_STAFF
  VENDOR
  MANUFACTURER
  MARKETING_STAFF // Ù…ÙˆØ¸Ù ØªØ³ÙˆÙŠÙ‚ Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø©
  PARTNER_STAFF   // Ù…ÙˆØ¸Ù Ø´Ø±ÙŠÙƒ
  VEHICLE_DEALER  // Ø´Ø±ÙŠÙƒ Ù…Ø¹Ø±Ø¶ Ø³ÙŠØ§Ø±Ø§Øª ÙˆÙ…ÙˆØªÙˆØ³ÙŠÙƒÙ„Ø§Øª
}

enum SaleType {
  SINGLE    // Ù‚Ø·Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©
  BUNDLE    // Ø¹Ø±Ø¶ (Ù…Ø¹ Ù…Ù†ØªØ¬Ø§Øª Ø£Ø®Ø±Ù‰)
}

enum VariantType {
  SIZE      // Ù…Ù‚Ø§Ø³Ø§Øª Ø¹Ø§Ø¯ÙŠØ© (S, M, L, XL)
  AGE       // Ø£Ø¹Ù…Ø§Ø± Ù„Ù„Ø£Ø·ÙØ§Ù„ (1-3 Ø´Ù‡ÙˆØ±ØŒ 6 Ø´Ù‡ÙˆØ±ØŒ Ø³Ù†Ø©ØŒ Ø¥Ù„Ø®)
  COLOR     // Ø£Ù„ÙˆØ§Ù†
  CUSTOM    // Ù…Ø®ØµØµ
}

enum ImportSource {
  SHEIN        // Ø´ÙŠ Ø¥Ù†
  ALIEXPRESS   // Ø¹Ù„ÙŠ Ø§ÙƒØ³Ø¨Ø±ÙŠØ³
  ALIBABA      // Ø¹Ù„ÙŠ Ø¨Ø§Ø¨Ø§
  TAOBAO       // ØªØ§ÙˆØ¨Ø§Ùˆ
  TEMU         // ØªÙŠÙ…Ùˆ
  OTHER        // Ø£Ø®Ø±Ù‰
}

enum PayoutStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
  CANCELLED
}

enum PaymentMethod {
  CASH_ON_DELIVERY
  BANK_TRANSFER
  E_WALLET_TRANSFER
  WE_PAY
  GOOGLE_PAY              // Ø¯ÙØ¹ Ø¹Ø¨Ø± Google Pay
  INSTALLMENT_4
  INSTALLMENT_6
  INSTALLMENT_12
  INSTALLMENT_24
  PARTIAL_PAYMENT_50
  FULL_PAYMENT
}

enum InstallmentStatus {
  ACTIVE
  COMPLETED
  DEFAULTED
  CANCELLED
}

enum InstallmentPaymentStatus {
  PENDING
  PAID
  LATE
  FAILED
}

enum OrderStatus {
  PENDING
  CONFIRMED
  PREPARING
  OUT_FOR_DELIVERY
  DELIVERED
  REJECTED
  CANCELLED
}

enum DeliveryMethod {
  HOME_DELIVERY    // ØªÙˆØµÙŠÙ„ Ù„Ù„Ù…Ù†Ø²Ù„
  STORE_PICKUP     // Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±
}

enum BustaStatus {
  PENDING         // ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ø¨ÙˆØ³Ø·Ø©
  SENT_TO_BUSTA   // ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ø´Ø±ÙƒØ© Ø¨ÙˆØ³Ø·Ø©
  PICKED_UP       // ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±
  IN_TRANSIT      // ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ù„Ù„Ø¹Ù…ÙŠÙ„
  OUT_FOR_DELIVERY // Ø®Ø±Ø¬ Ù„Ù„ØªÙˆØµÙŠÙ„
  DELIVERED       // ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„
  ATTEMPTED       // ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„ (Ù…Ø­Ø§ÙˆÙ„Ø©)
  RETURNED        // ØªÙ… Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ù„Ù„Ù…ØªØ¬Ø±
  CANCELLED       // Ù…Ù„ØºÙŠ
  EXCEPTION       // Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø£Ùˆ Ù…Ø´ÙƒÙ„Ø©
}

enum PaymentStatus {
  PENDING
  PAID
  REJECTED
  DELIVERY_FEE_ONLY
}

enum InspectionResult {
  ACCEPTED
  REJECTED
}

enum MaterialCategory {
  FABRIC
  THREAD
  BUTTON
  ZIPPER
  ACCESSORY
  PACKAGING
  OTHER
}

enum MovementType {
  PURCHASE
  PRODUCTION
  RETURN
  ADJUSTMENT
  DAMAGE
  TRANSFER
}

enum ProductionStatus {
  PLANNED
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

enum VoucherType {
  RECEIPT
  PAYMENT
}

enum AccountingPaymentMethod {
  CASH
  BANK_TRANSFER
  CHECK
  CARD
  MOBILE_WALLET
}

enum ExpenseCategory {
  MATERIALS
  SALARIES
  RENT
  UTILITIES
  MARKETING
  TRANSPORT
  MAINTENANCE
  OTHER
}

enum VoucherStatus {
  PENDING
  APPROVED
  REJECTED
  PAID
}

enum CampaignType {
  SEO
  GOOGLE_ADS
  FACEBOOK_ADS
  INSTAGRAM_ADS
  EMAIL
  INFLUENCER
  CONTENT
  OTHER
}

enum CampaignStatus {
  DRAFT
  ACTIVE
  PAUSED
  COMPLETED
}

// Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø±ÙƒØ§Ø¡ Ø§Ù„Ù…ØªØ¹Ø¯Ø¯ÙŠÙ† (Multi-Partner System)
model PartnerCapital {
  id               String              @id @default(cuid())
  vendorId         String
  partnerName      String              // Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙŠÙƒ
  partnerType      String              @default("OWNER") // Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±ÙŠÙƒ: OWNER, PARTNER, etc
  capitalAmount    Float               // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³Ø§Ù‡Ù… Ø¨Ù‡
  initialAmount    Float               @default(0) // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£ÙˆÙ„ÙŠ
  currentAmount    Float               @default(0) // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ
  capitalPercent   Float               // Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø© Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„
  joinDate         DateTime            @default(now())
  isActive         Boolean             @default(true)
  notes            String?
  createdAt        DateTime            @default(now())
  updatedAt        DateTime            @updatedAt
  vendor           Vendor              @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  profitShares     ProfitDistribution[]
  staffMembers     User[]              // Ù…ÙˆØ¸ÙÙŠ Ø§Ù„Ø´Ø±ÙŠÙƒ

  @@map("partner_capitals")
}

// ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙƒØ§Ø¡
model ProfitDistribution {
  id              String         @id @default(cuid())
  partnerId       String
  vendorId        String
  periodStart     DateTime
  periodEnd       DateTime
  totalRevenue    Float          // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª
  totalCost       Float          // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ
  totalExpenses   Float          // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª
  netProfit       Float          // ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­
  partnerShare    Float          // Ø­ØµØ© Ø§Ù„Ø´Ø±ÙŠÙƒ Ù…Ù† Ø§Ù„Ø±Ø¨Ø­
  isPaid          Boolean        @default(false)
  paidAt          DateTime?
  notes           String?
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  partner         PartnerCapital @relation(fields: [partnerId], references: [id])

  @@map("profit_distributions")
}

// Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª (Purchases)
model Purchase {
  id                  String        @id @default(cuid())
  vendorId            String
  productName         String
  productNameAr       String?
  quantity            Float
  unitCost            Float         // Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø© (Ø§Ù„Ø´Ø±Ø§Ø¡)
  totalCost           Float         // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ©
  supplier            String?       // Ø§Ù„Ù…ÙˆØ±Ø¯
  supplierPhone       String?
  purchaseDate        DateTime      @default(now())
  receiptNumber       String?       // Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©
  receiptImage        String?       // ØµÙˆØ±Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
  notes               String?
  fromCapital         Boolean       @default(true)  // Ù…Ù† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø£Ù… Ø¨Ø§Ù„Ù†ÙŠØ§Ø¨Ø©
  sellingPrice        Float?        // Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹
  commissionFromStore Boolean       @default(true)  // Ù‡Ù„ ÙŠØ­Ø³Ø¨ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…ØªØ¬Ø± 5%
  createdAt           DateTime      @default(now())
  updatedAt           DateTime      @updatedAt
  vendor              Vendor        @relation(fields: [vendorId], references: [id])
  sales               Sale[]
  inventoryItemId     String?
  inventoryItem       InventoryItem? @relation(fields: [inventoryItemId], references: [id])

  @@map("purchases")
}

// Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Sales)
model Sale {
  id             String    @id @default(cuid())
  vendorId       String
  purchaseId     String?
  productName    String
  productNameAr  String?
  quantity       Float
  unitPrice      Float     // Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ù„Ù„ÙˆØ­Ø¯Ø©
  totalAmount    Float     // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
  costPrice      Float?    // Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ© Ù„Ù„ÙˆØ­Ø¯Ø©
  profit         Float?    // Ø§Ù„Ø±Ø¨Ø­
  saleDate       DateTime  @default(now())
  customerName   String?
  customerPhone  String?
  invoiceNumber  String?
  notes          String?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  vendor         Vendor    @relation(fields: [vendorId], references: [id])
  purchase       Purchase? @relation(fields: [purchaseId], references: [id])
  returns        Return[]

  @@map("sales")
}

// Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Inventory)
model InventoryItem {
  id                String     @id @default(cuid())
  vendorId          String
  productId         String?
  productName       String
  productNameAr     String?
  totalPurchased    Float      @default(0) // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø´ØªØ±Ø§Ø©
  totalSold         Float      @default(0) // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©
  currentStock      Float      @default(0) // Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ
  minStockAlert     Float      @default(10) // Ø­Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
  unitCost          Float      // Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ©
  lastPurchaseDate  DateTime?
  lastSaleDate      DateTime?
  createdAt         DateTime   @default(now())
  updatedAt         DateTime   @updatedAt
  vendor            Vendor     @relation(fields: [vendorId], references: [id])
  product           Product?   @relation(fields: [productId], references: [id])
  purchases         Purchase[]

  @@map("inventory_items")
}

// Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª (Expenses)
model VendorExpense {
  id             String       @id @default(cuid())
  vendorId       String
  expenseType    ExpenseType
  amount         Float
  vendor         Vendor       @relation(fields: [vendorId], references: [id])
  description    String
  descriptionAr  String?
  expenseDate    DateTime     @default(now())
  receiptImage   String?
  receiptNumber  String?      // Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© (Ù„Ù„Ø±Ø¨Ø· Ù…Ø¹ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª)
  isPaid         Boolean      @default(true)
  paidBy         String?      // Ù…Ù† Ø¯ÙØ¹ (Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ)
  notes          String?
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt

  @@map("vendor_expenses")
}

enum ExpenseType {
  SHIPPING       // Ø´Ø­Ù†
  PACKAGING      // ØªØºÙ„ÙŠÙ
  MARKETING      // ØªØ³ÙˆÙŠÙ‚
  OPERATION      // ØªØ´ØºÙŠÙ„
  SALARY         // Ø±ÙˆØ§ØªØ¨
  RENT           // Ø¥ÙŠØ¬Ø§Ø±
  UTILITIES      // Ù…Ø±Ø§ÙÙ‚ (ÙƒÙ‡Ø±Ø¨Ø§Ø¡ØŒ Ù…Ø§Ø¡ØŒ Ø¥Ù†ØªØ±Ù†Øª)
  MAINTENANCE    // ØµÙŠØ§Ù†Ø©
  TRANSPORTATION // Ù…ÙˆØ§ØµÙ„Ø§Øª ÙˆÙ…Ø´Ø§ÙˆÙŠØ±
  OTHER          // Ù…ØªÙ†ÙˆØ¹Ø©
}

// Ø§Ù„Ø³Ù†Ø¯Ø§Øª (Vouchers)
model VendorVoucher {
  id             String        @id @default(cuid())
  vendorId       String
  voucherType    VoucherType
  voucherNumber  String        @unique
  amount         Float
  description    String
  descriptionAr  String?
  recipientName  String?       // Ø§Ù„Ù…Ø³ØªÙ„Ù… Ø£Ùˆ Ø§Ù„Ø¯Ø§ÙØ¹
  voucherDate    DateTime      @default(now())
  voucherImage   String?       // ØµÙˆØ±Ø© Ø§Ù„Ø³Ù†Ø¯
  status         VoucherStatus @default(PENDING)
  approvedBy     String?
  approvedAt     DateTime?
  notes          String?
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  vendor         Vendor        @relation(fields: [vendorId], references: [id])

  @@map("vendor_vouchers")
}

// Ø§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª (Returns)
model Return {
  id             String      @id @default(cuid())
  vendorId       String
  saleId         String?
  productName    String
  productNameAr  String?
  quantity       Float
  unitPrice      Float
  totalAmount    Float
  reason         String
  reasonAr       String?
  returnDate     DateTime    @default(now())
  status         ReturnStatus @default(PENDING)
  returnedToStock Boolean    @default(false) // Ù‡Ù„ ØªÙ… Ø¥Ø¹Ø§Ø¯ØªÙ‡ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†
  refundAmount   Float?
  customerName   String?
  notes          String?
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  sale           Sale?       @relation(fields: [saleId], references: [id])

  @@map("returns")
}

enum ReturnStatus {
  PENDING        // Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
  APPROVED       // ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
  REJECTED       // Ù…Ø±ÙÙˆØ¶
  REFUNDED       // ØªÙ… Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯
  CANCELLED      // Ù…Ù„ØºÙŠ
}

// ============ Ù†Ø¸Ø§Ù… Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ============
enum ProductSource {
  OWNED          // Ù…Ù†ØªØ¬ Ù…Ù…Ù„ÙˆÙƒ - ØªÙ… Ø´Ø±Ø§Ø¤Ù‡ Ù…Ù† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„
  CONSIGNMENT    // Ù…Ù†ØªØ¬ ÙˆØ³ÙŠØ· - Ù…Ù† Ù…Ø­Ù„ Ø¢Ø®Ø± (Ù„Ø§ ÙŠØ®ØµÙ… Ù…Ù† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„)
  DROPSHIP       // Ø¯Ø±ÙˆØ¨Ø´ÙŠØ¨ - Ø´Ø­Ù† Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯
}

// ============ Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† (Supplier Payments) ============
model SupplierPayment {
  id              String        @id @default(cuid())
  vendorId        String
  productId       String?       // Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø±ØªØ¨Ø·
  orderId         String?       // Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø±ØªØ¨Ø·
  supplierName    String        // Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯
  supplierPhone   String?       // Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ù…ÙˆØ±Ø¯
  amountDue       Float         // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚
  amountPaid      Float         @default(0) // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹
  profit          Float         @default(0) // Ø§Ù„Ø±Ø¨Ø­ (Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ - Ø³Ø¹Ø± Ø§Ù„Ù…ÙˆØ±Ø¯)
  status          PaymentDueStatus @default(PENDING)
  paidAt          DateTime?     // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹
  paymentMethod   String?       // Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹
  paymentNotes    String?       // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¯ÙØ¹
  notes           String?       // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
  saleDate        DateTime      @default(now()) // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¹
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  product         Product?      @relation(fields: [productId], references: [id])

  @@map("supplier_payments")
}

enum PaymentDueStatus {
  PENDING        // Ù…Ø¹Ù„Ù‚ - Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¯ÙØ¹ Ø¨Ø¹Ø¯
  PARTIAL        // Ø¯ÙØ¹ Ø¬Ø²Ø¦ÙŠ
  PAID           // ØªÙ… Ø§Ù„Ø¯ÙØ¹ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
  CANCELLED      // Ù…Ù„ØºÙŠ
}

// ============ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ (Capital Transactions) ============
model CapitalTransaction {
  id              String              @id @default(cuid())
  vendorId        String
  partnerId       String?             // Ø§Ù„Ø´Ø±ÙŠÙƒ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  orderId         String?             // Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø±ØªØ¨Ø·
  type            CapitalTransactionType
  amount          Float               // Ø§Ù„Ù…Ø¨Ù„Øº
  balanceBefore   Float               // Ø§Ù„Ø±ØµÙŠØ¯ Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
  balanceAfter    Float               // Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
  description     String              // ÙˆØµÙ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
  descriptionAr   String?             // ÙˆØµÙ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ
  referenceType   String?             // Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±Ø¬Ø¹ (order, sale, purchase, etc.)
  referenceId     String?             // ID Ø§Ù„Ù…Ø±Ø¬Ø¹
  notes           String?
  createdAt       DateTime            @default(now())
  updatedAt       DateTime            @updatedAt

  @@map("capital_transactions")
}

enum CapitalTransactionType {
  DEPOSIT        // Ø¥ÙŠØ¯Ø§Ø¹ Ø±Ø£Ø³ Ù…Ø§Ù„
  WITHDRAWAL     // Ø³Ø­Ø¨ Ù…Ù† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„
  PURCHASE       // Ø´Ø±Ø§Ø¡ Ø¨Ø¶Ø§Ø¹Ø© (Ø®ØµÙ…)
  SALE_PROFIT    // Ø±Ø¨Ø­ Ù…Ù† Ø¨ÙŠØ¹ (Ø¥Ø¶Ø§ÙØ©)
  CONSIGNMENT_PROFIT // Ø±Ø¨Ø­ Ù…Ù† Ù…Ù†ØªØ¬ ÙˆØ³ÙŠØ· (Ø¥Ø¶Ø§ÙØ©)
  EXPENSE        // Ù…ØµØ±ÙˆÙ (Ø®ØµÙ…)
  REFUND         // Ø§Ø³ØªØ±Ø¯Ø§Ø¯/Ù…Ø±ØªØ¬Ø¹
  ADJUSTMENT     // ØªØ¹Ø¯ÙŠÙ„ ÙŠØ¯ÙˆÙŠ
}

// ============ Ù†Ø¸Ø§Ù… Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙˆØµÙŠÙ„ ============
model DeliveryZone {
  id            String   @id @default(cuid())
  governorate   String   @unique // Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
  deliveryFee   Float    // Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„
  minOrderValue Float    @default(0) // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("delivery_zones")
}

// ============ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ============
model SystemSettings {
  id          String   @id @default(cuid())
  key         String   @unique // Ù…ÙØªØ§Ø­ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
  value       String   // Ø§Ù„Ù‚ÙŠÙ…Ø©
  description String?  // ÙˆØµÙ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
  updatedAt   DateTime @updatedAt

  @@map("system_settings")
}

// ============ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ============
model VendorNotification {
  id          String   @id @default(cuid())
  vendorId    String   // Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø±ÙŠÙƒ
  type        NotificationType // Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  title       String   // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  message     String   // Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  orderId     String?  // Ù…Ø¹Ø±Ù Ø§Ù„Ø·Ù„Ø¨ (Ø¥Ù† ÙˆØ¬Ø¯)
  isRead      Boolean  @default(false) // Ù‡Ù„ ØªÙ… Ù‚Ø±Ø§Ø¡ØªÙ‡
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("vendor_notifications")
  @@index([vendorId, isRead])
}

model CustomerNotification {
  id          String   @id @default(cuid())
  customerId  String   // Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ù…ÙŠÙ„
  type        CustomerNotificationType // Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  title       String   // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  message     String   // Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  orderId     String?  // Ù…Ø¹Ø±Ù Ø§Ù„Ø·Ù„Ø¨ (Ø¥Ù† ÙˆØ¬Ø¯)
  isRead      Boolean  @default(false) // Ù‡Ù„ ØªÙ… Ù‚Ø±Ø§Ø¡ØªÙ‡
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("customer_notifications")
  @@index([customerId, isRead])
}

enum NotificationType {
  NEW_ORDER      // Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
  ORDER_STATUS   // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨
  LOW_STOCK      // Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶
  NEW_MESSAGE    // Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
  SYSTEM         // Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¸Ø§Ù…
}

enum CustomerNotificationType {
  ORDER_CONFIRMED   // ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨
  ORDER_SHIPPED     // ØªÙ… Ø´Ø­Ù† Ø§Ù„Ø·Ù„Ø¨
  ORDER_DELIVERED   // ØªÙ… ØªÙˆØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨
  ORDER_CANCELLED   // ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨
  NEW_MESSAGE       // Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
  SYSTEM            // Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¸Ø§Ù…
}

// ============ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ÙØ±Ø¹ÙŠÙŠÙ† ============
model SubUser {
  id          String       @id @default(cuid())
  vendorId    String       // Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
  name        String       // Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙØ±Ø¹ÙŠ
  email       String       @unique // Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
  password    String       // ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø´ÙØ±Ø©
  phone       String?      // Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
  role        SubUserRole  @default(CASHIER) // Ø§Ù„Ø¯ÙˆØ±
  permissions String[]     // Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
  isActive    Boolean      @default(true)  // Ù‡Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†Ø´Ø·
  lastLogin   DateTime?    // Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  
  // Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·
  activityLogs SubUserActivityLog[]

  @@map("sub_users")
  @@index([vendorId])
}

// Ø£Ù†ÙˆØ§Ø¹ Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ÙØ±Ø¹ÙŠÙŠÙ†
enum SubUserRole {
  CASHIER       // ÙƒØ§Ø´ÙŠØ± Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹ ÙÙ‚Ø·
  ACCOUNTANT    // Ù…Ø­Ø§Ø³Ø¨ - ÙŠØ±Ù‰ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©
  INVENTORY     // Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
  SALES         // Ù…Ù†Ø¯ÙˆØ¨ Ù…Ø¨ÙŠØ¹Ø§Øª
  MANAGER       // Ù…Ø¯ÙŠØ± - ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø© Ù…Ø§Ø¹Ø¯Ø§ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©
}

// Ø³Ø¬Ù„ Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ÙØ±Ø¹ÙŠÙŠÙ†
model SubUserActivityLog {
  id          String   @id @default(cuid())
  subUserId   String
  action      String   // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (login, sale, refund, etc.)
  details     String?  // ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©
  ipAddress   String?  // Ø¹Ù†ÙˆØ§Ù† IP
  createdAt   DateTime @default(now())
  
  subUser     SubUser  @relation(fields: [subUserId], references: [id], onDelete: Cascade)

  @@map("sub_user_activity_logs")
  @@index([subUserId, createdAt])
}

// ============ Ø³Ø¬Ù„ Ù†Ø´Ø§Ø· Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ============
model ActivityLog {
  id          String   @id @default(cuid())
  vendorId    String   // Ø§Ù„Ø¨Ø§Ø¦Ø¹
  action      String   // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
  details     String?  // ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©
  userName    String   // Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ Ù‚Ø§Ù… Ø¨Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
  userRole    String   // Ø¯ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  ipAddress   String?  // Ø¹Ù†ÙˆØ§Ù† IP
  createdAt   DateTime @default(now())

  @@map("activity_logs")
  @@index([vendorId, createdAt])
  @@index([action])
}

// ============ Ù…Ù†Ø§Ø¯ÙŠØ¨ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø®Ø§ØµÙŠÙ† Ø¨Ø§Ù„Ø´Ø±ÙŠÙƒ ============
model VendorDeliveryAgent {
  id               String   @id @default(cuid())
  vendorId         String   // Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ù…Ø§Ù„Ùƒ
  name             String   // Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨
  phone            String   // Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
  alternativePhone String?  // Ø±Ù‚Ù… Ø¨Ø¯ÙŠÙ„
  whatsapp         String?  // ÙˆØ§ØªØ³Ø§Ø¨
  address          String?  // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
  area             String?  // Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙŠ ÙŠØºØ·ÙŠÙ‡Ø§
  vehicleType      String?  // Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø© (Ø³ÙŠØ§Ø±Ø©/Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„/Ø§Ù„Ø®)
  vehicleNumber    String?  // Ø±Ù‚Ù… Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
  deliveryFee      Float    @default(0)  // Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„
  isActive         Boolean  @default(true)
  totalDeliveries  Int      @default(0)
  notes            String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("vendor_delivery_agents")
  @@index([vendorId])
}

// ============ Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø´Ø±ÙŠÙƒ ============
model VendorShippingCompany {
  id               String   @id @default(cuid())
  vendorId         String   // Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ù…Ø§Ù„Ùƒ
  name             String   // Ø§Ø³Ù… Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†
  phone            String?  // Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
  website          String?  // Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
  trackingUrl      String?  // Ø±Ø§Ø¨Ø· ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø§Øª (ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ {tracking_number})
  accountNumber    String?  // Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ù„Ø¯Ù‰ Ø§Ù„Ø´Ø±ÙƒØ©
  contactPerson    String?  // Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
  contactPhone     String?  // Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
  defaultFee       Float    @default(0)  // Ø±Ø³ÙˆÙ… Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
  estimatedDays    Int?     // Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©
  areas            String?  // Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…ØºØ·Ø§Ø© (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)
  isActive         Boolean  @default(true)
  totalShipments   Int      @default(0)
  notes            String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("vendor_shipping_companies")
  @@index([vendorId])
}

// ============ Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ============
model PasswordResetToken {
  id        String   @id @default(cuid())
  email     String
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())

  @@map("password_reset_tokens")
  @@index([email])
  @@index([token])
}

// ============ ÙƒÙˆØ¨ÙˆÙ†Ø§Øª Ø§Ù„Ø®ØµÙ… ============
model Coupon {
  id           String   @id @default(cuid())
  code         String   @unique
  discount     Float    // Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ…
  minPurchase  Float    // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø´Ø±Ø§Ø¡
  discountType String   @default("FIXED") // FIXED Ø£Ùˆ PERCENTAGE
  isActive     Boolean  @default(true)
  expiresAt    DateTime
  maxUses      Int      @default(1) // Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©
  usedCount    Int      @default(0) // Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙØ¹Ù„ÙŠ
  userId       String?  // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† (null Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¹Ø§Ù…)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("coupons")
  @@index([code])
  @@index([userId])
  @@index([isActive, expiresAt])
}

// ============ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· (Loyalty Points) ============
model PointTransaction {
  id          String   @id @default(cuid())
  userId      String
  points      Int      // Ø§Ù„Ù†Ù‚Ø§Ø· (Ù…ÙˆØ¬Ø¨ = ÙƒØ³Ø¨ØŒ Ø³Ø§Ù„Ø¨ = Ø§Ø³ØªØ®Ø¯Ø§Ù…)
  type        String   // EARNED (ÙƒØ³Ø¨ Ù…Ù† Ø´Ø±Ø§Ø¡)ØŒ REDEEMED (Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø´Ø±Ø§Ø¡)ØŒ EXPIRED (Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØªÙ‡Ø§)
  orderId     String?  // Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø±ØªØ¨Ø·
  description String   // ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
  createdAt   DateTime @default(now())
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("point_transactions")
  @@index([userId])
  @@index([orderId])
  @@index([createdAt])
}

// ============ Ø±Ø¨Ø· Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§ ============
model SocialMediaAccount {
  id            String   @id @default(cuid())
  platform      String   // FACEBOOK, INSTAGRAM
  pageId        String   // Facebook Page ID or Instagram Business Account ID
  pageName      String   // Ø§Ø³Ù… Ø§Ù„ØµÙØ­Ø©
  accessToken   String   @db.Text  // Access Token (Ø·ÙˆÙŠÙ„ Ø§Ù„Ø£Ù…Ø¯)
  tokenExpiry   DateTime? // ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªÙˆÙƒÙ†
  isActive      Boolean  @default(true)
  lastSync      DateTime? // Ø¢Ø®Ø± Ù…Ø²Ø§Ù…Ù†Ø©
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  posts         SocialMediaPost[]

  @@map("social_media_accounts")
  @@unique([platform, pageId])
  @@index([platform, isActive])
}

// Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§
model SocialMediaPost {
  id            String   @id @default(cuid())
  accountId     String
  postId        String?  // Facebook/Instagram Post ID
  content       String   @db.Text
  imageUrl      String?
  productId     String?
  status        String   // DRAFT, SCHEDULED, PUBLISHED, FAILED
  scheduledFor  DateTime?
  publishedAt   DateTime?
  error         String?  @db.Text
  likes         Int      @default(0)
  comments      Int      @default(0)
  shares        Int      @default(0)
  reach         Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  account       SocialMediaAccount @relation(fields: [accountId], references: [id], onDelete: Cascade)
  product       Product? @relation(fields: [productId], references: [id], onDelete: SetNull)

  @@map("social_media_posts")
  @@index([accountId, status])
  @@index([productId])
  @@index([scheduledFor])
}

// ØªØªØ¨Ø¹ Ø²ÙˆØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹
model Visitor {
  id          String   @id @default(cuid())
  ipAddress   String?  // IP Address
  userAgent   String?  // Browser/Device info
  page        String?  // Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØªÙŠ ØªÙ…Øª Ø²ÙŠØ§Ø±ØªÙ‡Ø§
  referrer    String?  // Ø§Ù„Ù…ØµØ¯Ø±
  country     String?  // Ø§Ù„Ø¨Ù„Ø¯
  city        String?  // Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©
  device      String?  // Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø² (mobile, desktop, tablet)
  browser     String?  // Ø§Ù„Ù…ØªØµÙØ­
  visitedAt   DateTime @default(now())
  
  @@map("visitors")
  @@index([ipAddress, visitedAt])
  @@index([visitedAt])
}

// Ø¨Ø¶Ø§Ø¹Ø© Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø¸Ø§Ù… (Ø¨Ø¯ÙˆÙ† ØµÙˆØ± Ø£Ùˆ ØªÙØ§ØµÙŠÙ„)
model OfflineProduct {
  id              String   @id @default(cuid())
  vendorId        String
  supplierId      String?  // Ø§Ù„Ù…ÙˆØ±Ø¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  productName     String?  // Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  description     String?  // ÙˆØµÙ Ø§Ø®ØªÙŠØ§Ø±ÙŠ
  purchasePrice   Float    // Ø³Ø¹Ø± Ø§Ù„Ù‚Ø·Ø¹Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø© Ù„Ù„Ø´Ø±Ø§Ø¡
  sellingPrice    Float    // Ø³Ø¹Ø± Ø§Ù„Ù‚Ø·Ø¹Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø© Ù„Ù„Ø¨ÙŠØ¹
  quantity        Int      @default(1) // Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…Ø´ØªØ±Ø§Ø©
  soldQuantity    Int      @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©
  profit          Float    // Ø§Ù„Ø±Ø¨Ø­ = (Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ - Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡) Ã— Ø§Ù„ÙƒÙ…ÙŠØ©
  amountPaid      Float    @default(0) // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ù„Ù„Ù…ÙˆØ±Ø¯
  isPaid          Boolean  @default(false) // Ù‡Ù„ ØªÙ… Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ù…ÙˆØ±Ø¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
  paidAt          DateTime? // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ù…ÙˆØ±Ø¯
  createdAt       DateTime @default(now())
  createdBy       String   // Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù„ÙŠ Ø£Ø¶Ø§ÙÙ‡Ø§
  
  vendor          Vendor   @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  supplier        OfflineSupplier? @relation(fields: [supplierId], references: [id], onDelete: SetNull)
  
  @@map("offline_products")
  @@index([vendorId])
  @@index([supplierId])
  @@index([createdAt])
}

// Ù…ÙˆØ±Ø¯ÙŠÙ† Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
model OfflineSupplier {
  id              String   @id @default(cuid())
  vendorId        String
  name            String   // Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯
  phone           String?  // Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†
  address         String?  // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
  notes           String?  // Ù…Ù„Ø§Ø­Ø¸Ø§Øª
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  vendor          Vendor   @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  offlineProducts OfflineProduct[]
  payments        OfflineSupplierPayment[]
  
  @@map("offline_suppliers")
  @@index([vendorId])
}

// Ø¯ÙØ¹Ø§Øª Ù…ÙˆØ±Ø¯ÙŠÙ† Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
model OfflineSupplierPayment {
  id              String   @id @default(cuid())
  vendorId        String
  supplierId      String
  type            String   @default("RECEIPT") // RECEIPT = Ù‚Ø¨Ø¶ØŒ PAYMENT = ØµØ±Ù
  amount          Float    // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹
  paymentMethod   String   @default("CASH") // Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹
  notes           String?  // Ù…Ù„Ø§Ø­Ø¸Ø§Øª
  paidBy          String   // Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù„ÙŠ Ø¯ÙØ¹
  createdAt       DateTime @default(now())
  
  supplier        OfflineSupplier @relation(fields: [supplierId], references: [id], onDelete: Cascade)
  
  @@map("offline_supplier_payments")
  @@index([vendorId])
  @@index([supplierId])
  @@index([createdAt])
}

// Push Notifications - Device Subscriptions
model PushSubscription {
  id            String   @id @default(cuid())
  userId        String?  // optional - Ù„Ù„Ø²ÙˆØ§Ø± Ø§Ù„ØºÙŠØ± Ù…Ø³Ø¬Ù„ÙŠÙ†
  endpoint      String   @unique // The push service URL
  p256dh        String   // Public key for encryption
  auth          String   // Authentication secret
  userAgent     String?  // Browser/device info
  deviceType    String?  // mobile, desktop, tablet
  createdAt     DateTime @default(now())
  lastUsedAt    DateTime @default(now())
  
  user          User?    @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("push_subscriptions")
  @@index([userId])
  @@index([createdAt])
}

// Push Notifications - Sent Messages
model PushNotification {
  id              String   @id @default(cuid())
  title           String   // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  body            String   // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  icon            String?  // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  image           String?  // ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  badge           String?  // Badge icon
  url             String?  // Ø§Ù„Ø±Ø§Ø¨Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  tag             String?  // Tag to group notifications
  requireInteraction Boolean @default(false) // Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙŠØ¨Ù‚Ù‰ Ø¸Ø§Ù‡Ø± Ù„Ø­Ø¯ Ù…Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØªÙØ§Ø¹Ù„
  silent          Boolean  @default(false)
  vibrate         Json?    // Vibration pattern [200, 100, 200]
  actions         Json?    // Notification actions as JSON
  data            Json?    // Additional data
  sentBy          String   // ID Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù„ÙŠ Ø£Ø±Ø³Ù„
  sentToAll       Boolean  @default(false) // Ø¥Ø±Ø³Ø§Ù„ Ù„ÙƒÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
  recipientCount  Int      @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ†
  successCount    Int      @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù„ÙŠ ØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø¨Ù†Ø¬Ø§Ø­
  failedCount     Int      @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù„ÙŠ ÙØ´Ù„Øª
  createdAt       DateTime @default(now())
  
  @@map("push_notifications")
  @@index([sentBy])
  @@index([createdAt])
}

// FCM Device Tokens - Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
model FCMDeviceToken {
  id              String   @id @default(cuid())
  userId          String?  // Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  token           String   @unique // FCM registration token
  platform        String   // android Ø£Ùˆ ios
  deviceInfo      Json?    // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² (model, OS version, etc.)
  isActive        Boolean  @default(true) // Ø§Ù„Ù€ token Ù„Ø³Ù‡ Ø´ØºØ§Ù„
  createdAt       DateTime @default(now())
  lastUsedAt      DateTime @default(now())
  
  user            User?    @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("fcm_device_tokens")
  @@index([userId])
  @@index([token])
  @@index([isActive])
}

// User Activity Logs - ØªØªØ¨Ø¹ Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
model UserActivityLog {
  id            String   @id @default(cuid())
  userId        String
  action        String   // LOGIN, LOGOUT, ADD_PRODUCT, CREATE_ORDER, etc
  ip            String?
  userAgent     String?
  deviceType    String?  // MOBILE, DESKTOP, TABLET
  browser       String?
  os            String?
  deviceModel   String?
  location      String?  // Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ø¨Ù„Ø¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  metadata      Json?    // Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
  createdAt     DateTime @default(now())
  
  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("user_activity_logs")
  @@index([userId])
  @@index([action])
  @@index([createdAt(sort: Desc)])
}

// Shein Orders - Ø·Ù„Ø¨Ø§Øª Ø´ÙŠ Ø¥Ù† Ø§Ù„Ù…Ø®ØµØµØ©
model SheinOrder {
  id                String   @id @default(cuid())
  userId            String
  customerName      String
  customerPhone     String
  customerEmail     String?
  productLinks      Json     // Ù…ØµÙÙˆÙØ© Ù…Ù† Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
  productImages     Json?    // Ù…ØµÙÙˆÙØ© Ù…Ù† Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
  selectedColors    Json?    // Ù…ØµÙÙˆÙØ© Ù…Ù† Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
  notes             String?  // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„
  status            SheinOrderStatus @default(PENDING)
  estimatedTotal    Float?   // Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©
  advancePayment    Float?   // Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© (50%)
  finalPayment      Float?   // Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (50%)
  advancePaid       Boolean  @default(false) // ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ù‚Ø¯Ù…ØŸ
  finalPaid         Boolean  @default(false) // ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ
  adminNotes        String?  // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("shein_orders")
  @@index([userId])
  @@index([status])
  @@index([createdAt(sort: Desc)])
}

enum SheinOrderStatus {
  PENDING           // Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
  REVIEWING         // ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
  QUOTED            // ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø¹Ø±
  ADVANCE_PAID      // ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ù‚Ø¯Ù…
  ORDERING          // Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø´ÙŠ Ø¥Ù†
  SHIPPED           // ØªÙ… Ø§Ù„Ø´Ø­Ù†
  DELIVERED         // ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…
  COMPLETED         // Ù…ÙƒØªÙ…Ù„
  CANCELLED         // Ù…Ù„ØºÙŠ
}

// ============ Ù†Ø¸Ø§Ù… Ø§ØªÙØ§Ù‚ÙŠØ© Ø§Ù„ØªÙ‚Ø³ÙŠØ· (Installment Agreement) ============
model InstallmentAgreement {
  id                    String   @id @default(cuid())
  userId                String
  orderId               String?  @unique // Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø±ØªØ¨Ø· (Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©)
  
  // ğŸ“„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªÙØ§Ù‚ÙŠØ©
  agreementNumber       String   @unique // Ø±Ù‚Ù… Ø§Ù„Ø§ØªÙØ§Ù‚ÙŠØ©
  status                InstallmentAgreementStatus @default(PENDING)
  
  // ğŸ†” Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
  nationalIdImage       String?  // ØµÙˆØ±Ø© ÙˆØ¬Ù‡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Cloudinary URL)
  nationalIdBack        String?  // ØµÙˆØ±Ø© Ø¸Ù‡Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Cloudinary URL)
  firstPaymentReceipt   String?  // Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Cloudinary URL)
  signature             String?  // Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (base64 Ø£Ùˆ Cloudinary URL)
  selfieImage           String?  // ØµÙˆØ±Ø© Ø§Ù„Ø³ÙŠÙ„ÙÙŠ (Cloudinary URL)
  
  // ğŸ“ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (ÙŠØªÙ… Ø­ÙØ¸Ù‡Ø§ ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙÙ‚Ø·)
  fullName              String?  // Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„
  nationalId            String?  // Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
  address               String?  // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
  
  // ğŸ’° ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ‚Ø³ÙŠØ·
  totalAmount           Float    // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
  downPayment           Float    // Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©
  numberOfInstallments  Int      // Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ø·
  monthlyInstallment    Float    // Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ
  interestRate          Float    @default(0) // Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø©
  
  // âœ… Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
  acceptedTerms         Boolean  @default(false) // Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø´Ø±ÙˆØ·
  acceptedAt            DateTime? // ÙˆÙ‚Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
  
  // ğŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
  ip                    String?  // IP address
  userAgent             String?  // Browser info
  
  // ğŸ”’ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚
  verifiedBy            String?  // Ù…Ù† Ù‚Ø§Ù… Ø¨Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ (admin/developer)
  verifiedAt            DateTime? // ÙˆÙ‚Øª Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚
  verificationNotes     String?  // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚
  rejectionReason       String?  // Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶ (Ø¥Ù† ÙˆØ¬Ø¯)
  
  // âœ… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©/Ø§Ù„Ø±ÙØ¶
  approvedBy            String?  // Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø°ÙŠ ÙˆØ§ÙÙ‚
  approvedAt            DateTime? // ÙˆÙ‚Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
  rejectedBy            String?  // Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø°ÙŠ Ø±ÙØ¶
  rejectedAt            DateTime? // ÙˆÙ‚Øª Ø§Ù„Ø±ÙØ¶
  
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  
  user                  User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  order                 Order?   @relation(fields: [orderId], references: [id])
  
  @@map("installment_agreements")
  @@index([userId])
  @@index([status])
  @@index([agreementNumber])
  @@index([createdAt(sort: Desc)])
}

enum InstallmentAgreementStatus {
  PENDING              // ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
  DOCUMENTS_COMPLETE   // Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù…ÙƒØªÙ…Ù„Ø© - ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
  UNDER_REVIEW         // ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
  APPROVED             // ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
  REJECTED             // Ù…Ø±ÙÙˆØ¶
  EXPIRED              // Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
}

// ============================================================
// ğŸš— Ù†Ø¸Ø§Ù… Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„Ø§Øª
// ============================================================

// ğŸš— Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª (Ø³ÙŠØ§Ø±Ø§Øª ÙˆÙ…ÙˆØªÙˆØ³ÙŠÙƒÙ„Ø§Øª)
model Vehicle {
  id                    String           @id @default(cuid())
  vendorId              String           // Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¹Ø±Ø¶ (Ø§Ù„Ø¨Ø§Ø¦Ø¹)
  vehicleNumber         String           @unique // Ø±Ù‚Ù… Ø§Ù„Ù…Ø±ÙƒØ¨Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…
  
  // ğŸ”– Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
  type                  VehicleType      // Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©: Ø³ÙŠØ§Ø±Ø© Ø£Ùˆ Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„
  condition             VehicleCondition // Ø­Ø§Ù„Ø©: Ø¬Ø¯ÙŠØ¯ Ø£Ùˆ Ù…Ø³ØªØ¹Ù…Ù„
  brand                 String           // Ø§Ù„Ù…Ø§Ø±ÙƒØ© (ØªÙˆÙŠÙˆØªØ§ØŒ Ù‡ÙˆÙ†Ø¯Ø§ØŒ Ø¥Ù„Ø®)
  model                 String           // Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ (ÙƒØ§Ù…Ø±ÙŠØŒ Ø£ÙƒÙˆØ±Ø¯ØŒ Ø¥Ù„Ø®)
  year                  Int              // Ø³Ù†Ø© Ø§Ù„ØµÙ†Ø¹
  color                 String           // Ø§Ù„Ù„ÙˆÙ†
  fuelType              FuelType         // Ù†ÙˆØ¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯
  transmission          TransmissionType // Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ©
  
  // ğŸ“Š Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ¹Ù…Ù„Ø©
  mileage               Int?             // Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒÙŠÙ„ÙˆÙ…ØªØ±Ø§Øª (Ù„Ù„Ù…Ø³ØªØ¹Ù…Ù„)
  previousOwners        Int?             // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù„Ø§Ùƒ Ø§Ù„Ø³Ø§Ø¨Ù‚ÙŠÙ†
  accidentHistory       Boolean          @default(false) // ØªØ§Ø±ÙŠØ® Ø­ÙˆØ§Ø¯Ø«
  accidentDetails       String?          // ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­ÙˆØ§Ø¯Ø« (Ø¥Ù† ÙˆØ¬Ø¯Øª)
  maintenanceHistory    String?          // Ø³Ø¬Ù„ Ø§Ù„ØµÙŠØ§Ù†Ø©
  licensePlate          String?          // Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©
  
  // ğŸ¨ Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©
  engineCapacity        String?          // Ø³Ø¹Ø© Ø§Ù„Ù…Ø­Ø±Ùƒ (1600cc Ù…Ø«Ù„Ø§Ù‹)
  horsepower            Int?             // Ù‚ÙˆØ© Ø§Ù„Ø­ØµØ§Ù†
  seats                 Int?             // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ (Ù„Ù„Ø³ÙŠØ§Ø±Ø§Øª)
  doors                 Int?             // Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ (Ù„Ù„Ø³ÙŠØ§Ø±Ø§Øª)
  bodyType              String?          // Ù†ÙˆØ¹ Ø§Ù„Ù‡ÙŠÙƒÙ„ (Ø³ÙŠØ¯Ø§Ù†ØŒ SUVØŒ Ø¥Ù„Ø®)
  
  // ğŸ’¡ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª ÙˆØ§Ù„Ø¥Ø¶Ø§ÙØ§Øª
  features              String?          // Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„): ÙØªØ­Ø© Ø³Ù‚ÙØŒÙƒØ§Ù…ÙŠØ±Ø§ØŒØ³Ù†Ø³Ø±
  hasWarranty           Boolean          @default(false) // Ø¶Ù…Ø§Ù†
  warrantyDetails       String?          // ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¶Ù…Ø§Ù†
  hasFreeService        Boolean          @default(false) // ØµÙŠØ§Ù†Ø© Ù…Ø¬Ø§Ù†ÙŠØ©
  freeServiceDetails    String?          // ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©
  
  // ğŸ’° Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„ØªÙƒØ§Ù„ÙŠÙ
  purchasePrice         Float            // Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ (Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯/Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø³Ø§Ø¨Ù‚)
  sellingPrice          Float            // Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹
  marketingPrice        Float?           // Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† (Ù‚Ø¯ ÙŠØ®ØªÙ„Ù Ø¹Ù† Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹)
  negotiable            Boolean          @default(true) // Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙØ§ÙˆØ¶
  profitMargin          Float            // Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­ (Ù…Ø­Ø³ÙˆØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
  profitAmount          Float            // Ù…Ø¨Ù„Øº Ø§Ù„Ø±Ø¨Ø­ (Ù…Ø­Ø³ÙˆØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
  
  // ğŸ¦ Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ
  allowBankFinancing    Boolean          @default(false) // ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ
  minDownPayment        Float?           // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©
  maxFinancingYears     Int?             // Ø£Ù‚ØµÙ‰ Ù…Ø¯Ø© ØªÙ…ÙˆÙŠÙ„ Ø¨Ø§Ù„Ø³Ù†ÙˆØ§Øª
  partnerBanks          String?          // Ø§Ù„Ø¨Ù†ÙˆÙƒ Ø§Ù„Ø´Ø±ÙŠÙƒØ© (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)
  
  // ğŸ“ Ø§Ù„ÙˆØµÙ ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª
  description           String?          // ÙˆØµÙ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
  descriptionAr         String?          // Ø§Ù„ÙˆØµÙ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
  sellerNotes           String?          // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¨Ø§Ø¦Ø¹
  internalNotes         String?          // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© (Ù„Ø§ ØªØ¸Ù‡Ø± Ù„Ù„Ø¹Ù…ÙŠÙ„)
  
  // ğŸ–¼ï¸ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
  images                String?          // Ø§Ù„ØµÙˆØ± (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)
  featuredImage         String?          // Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  videoUrl              String?          // Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ (ÙŠÙˆØªÙŠÙˆØ¨ Ù…Ø«Ù„Ø§Ù‹)
  
  // ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„ØªÙˆÙØ±
  location              String?          // Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
  showroom              String?          // Ø§Ù„Ù…Ø¹Ø±Ø¶
  isAvailable           Boolean          @default(true) // Ù…ØªÙˆÙØ± Ù„Ù„Ø¨ÙŠØ¹
  isFeatured            Boolean          @default(false) // Ù…Ù…ÙŠØ²
  isActive              Boolean          @default(true) // Ù†Ø´Ø·
  
  // ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
  viewCount             Int              @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª
  inquiryCount          Int              @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª
  testDriveCount        Int              @default(0) // Ø¹Ø¯Ø¯ Ø·Ù„Ø¨Ø§Øª ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©
  
  // ğŸ“… Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®
  soldAt                DateTime?        // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¹
  soldPrice             Float?           // Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„ÙØ¹Ù„ÙŠ
  createdAt             DateTime         @default(now())
  updatedAt             DateTime         @updatedAt
  
  // Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
  vendor                Vendor           @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  financingApplications VehicleFinancing[]
  inquiries             VehicleInquiry[]
  testDrives            TestDriveRequest[]
  
  @@map("vehicles")
  @@index([vendorId])
  @@index([type])
  @@index([condition])
  @@index([isAvailable])
  @@index([isActive])
  @@index([createdAt(sort: Desc)])
}

// ğŸ¦ Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ Ù„Ù„Ù…Ø±ÙƒØ¨Ø§Øª
model VehicleFinancing {
  id                    String                    @id @default(cuid())
  vehicleId             String
  customerId            String
  bankName              String                    // Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ (Ø£Ù…Ø§Ù†ØŒ ØªÙ…ÙˆÙŠÙ„ Ø³ÙŠØ§Ø±Ø©ØŒ Ø¥Ù„Ø®)
  applicationNumber     String                    @unique // Ø±Ù‚Ù… Ø·Ù„Ø¨ Ø§Ù„ØªÙ…ÙˆÙŠÙ„
  
  // ğŸ’° ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„
  vehiclePrice          Float                     // Ø³Ø¹Ø± Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
  downPayment           Float                     // Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©
  financedAmount        Float                     // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ù…ÙˆÙ„
  installmentYears      Int                       // Ù…Ø¯Ø© Ø§Ù„ØªÙ‚Ø³ÙŠØ· Ø¨Ø§Ù„Ø³Ù†ÙˆØ§Øª
  monthlyInstallment    Float                     // Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ
  interestRate          Float                     // Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ©
  totalPayable          Float                     // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹ (Ù…Ø¹ Ø§Ù„ÙÙˆØ§Ø¦Ø¯)
  adminFees             Float                     @default(0) // Ø±Ø³ÙˆÙ… Ø¥Ø¯Ø§Ø±ÙŠØ©
  
  // ğŸ“ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„
  fullName              String
  nationalId            String
  phone                 String
  email                 String?
  address               String
  employmentStatus      EmploymentStatus          // Ø­Ø§Ù„Ø© Ø§Ù„ØªÙˆØ¸ÙŠÙ
  monthlyIncome         Float                     // Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ
  employer              String?                   // Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…Ù„
  
  // ğŸ“„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
  nationalIdFront       String?                   // ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Ø£Ù…Ø§Ù…ÙŠ)
  nationalIdBack        String?                   // ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Ø®Ù„ÙÙŠ)
  salaryReceipt         String?                   // Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ù…Ø±ØªØ¨
  bankStatement         String?                   // ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø¨Ù†ÙƒÙŠ
  employmentLetter      String?                   // Ø®Ø·Ø§Ø¨ Ù…Ù† Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…Ù„
  utilityBill           String?                   // ÙØ§ØªÙˆØ±Ø© Ø®Ø¯Ù…Ø§Øª
  guarantorId           String?                   // Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¶Ø§Ù…Ù†
  otherDocuments        String?                   // Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø£Ø®Ø±Ù‰
  
  // âœ… Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨
  status                VehicleFinancingStatus    @default(PENDING)
  bankResponse          String?                   // Ø±Ø¯ Ø§Ù„Ø¨Ù†Ùƒ
  approvedAmount        Float?                    // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡
  approvalDate          DateTime?                 // ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
  rejectionReason       String?                   // Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶
  
  // ğŸ“… Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ù…Ù‡Ù…Ø©
  submittedAt           DateTime                  @default(now())
  processedAt           DateTime?                 // ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
  completedAt           DateTime?                 // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„
  
  // ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª
  customerNotes         String?                   // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„
  adminNotes            String?                   // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
  
  createdAt             DateTime                  @default(now())
  updatedAt             DateTime                  @updatedAt
  
  // Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
  vehicle               Vehicle                   @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  customer              User                      @relation(fields: [customerId], references: [id], onDelete: Cascade)
  
  @@map("vehicle_financing")
  @@index([vehicleId])
  @@index([customerId])
  @@index([status])
  @@index([bankName])
}

// ğŸ” Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ù† Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª
model VehicleInquiry {
  id             String   @id @default(cuid())
  vehicleId      String
  customerId     String?  // Ù‚Ø¯ ÙŠÙƒÙˆÙ† null Ù„Ù„Ø²ÙˆØ§Ø± ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†
  customerName   String
  customerPhone  String
  customerEmail  String?
  message        String   // Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±
  isContacted    Boolean  @default(false) // ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„
  contactedAt    DateTime?
  contactedBy    String?  // Ù…Ù† ØªÙˆØ§ØµÙ„ (admin/vendor)
  response       String?  // Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  
  vehicle        Vehicle  @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  customer       User?    @relation(fields: [customerId], references: [id], onDelete: SetNull)
  
  @@map("vehicle_inquiries")
  @@index([vehicleId])
  @@index([customerId])
  @@index([isContacted])
}

// ğŸš— Ø·Ù„Ø¨Ø§Øª ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©
model TestDriveRequest {
  id               String            @id @default(cuid())
  vehicleId        String
  customerId       String
  preferredDate    DateTime          // Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙØ¶Ù„
  preferredTime    String            // Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØ¶Ù„
  status           TestDriveStatus   @default(PENDING)
  confirmedDate    DateTime?         // Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø¤ÙƒØ¯
  confirmedTime    String?
  meetingLocation  String?           // Ù…ÙƒØ§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹
  notes            String?           // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„
  adminNotes       String?           // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
  completedAt      DateTime?         // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„
  feedback         String?           // ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¬Ø±Ø¨Ø©
  rating           Int?              // ØªÙ‚ÙŠÙŠÙ… Ù…Ù† 1-5
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  
  vehicle          Vehicle           @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  customer         User              @relation(fields: [customerId], references: [id], onDelete: Cascade)
  
  @@map("test_drive_requests")
  @@index([vehicleId])
  @@index([customerId])
  @@index([status])
  @@index([preferredDate])
}

// ============================================================
// ğŸ”§ Enums Ù„Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
// ============================================================

enum VehicleType {
  CAR         // Ø³ÙŠØ§Ø±Ø©
  MOTORCYCLE  // Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„
  TRUCK       // Ø´Ø§Ø­Ù†Ø©
  BUS         // Ø­Ø§ÙÙ„Ø©
  VAN         // ÙØ§Ù†
}

enum VehicleCondition {
  NEW         // Ø¬Ø¯ÙŠØ¯
  USED        // Ù…Ø³ØªØ¹Ù…Ù„
  CERTIFIED   // Ù…Ø¹ØªÙ…Ø¯ (Ù…Ø³ØªØ¹Ù…Ù„ Ù…Ø¹ Ø¶Ù…Ø§Ù†)
}

enum FuelType {
  PETROL      // Ø¨Ù†Ø²ÙŠÙ†
  DIESEL      // Ø¯ÙŠØ²Ù„
  ELECTRIC    // ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ
  HYBRID      // Ù‡Ø¬ÙŠÙ†
  LPG         // ØºØ§Ø² Ø·Ø¨ÙŠØ¹ÙŠ
}

enum TransmissionType {
  MANUAL      // ÙŠØ¯ÙˆÙŠ
  AUTOMATIC   // Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ
  CVT         // CVT
  SEMI_AUTO   // Ù†ØµÙ Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ
}

enum VehicleFinancingStatus {
  PENDING           // Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
  DOCUMENTS_REVIEW  // Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
  BANK_PROCESSING   // Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ø§Ù„Ø¨Ù†Ùƒ
  APPROVED          // Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡
  REJECTED          // Ù…Ø±ÙÙˆØ¶
  COMPLETED         // Ù…ÙƒØªÙ…Ù„
  CANCELLED         // Ù…Ù„ØºÙŠ
}

enum EmploymentStatus {
  EMPLOYED          // Ù…ÙˆØ¸Ù
  SELF_EMPLOYED     // Ø¹Ù…Ù„ Ø­Ø±
  BUSINESS_OWNER    // ØµØ§Ø­Ø¨ Ø¹Ù…Ù„
  RETIRED           // Ù…ØªÙ‚Ø§Ø¹Ø¯
  UNEMPLOYED        // Ø¹Ø§Ø·Ù„
}

enum TestDriveStatus {
  PENDING           // Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
  CONFIRMED         // Ù…Ø¤ÙƒØ¯
  COMPLETED         // Ù…ÙƒØªÙ…Ù„
  CANCELLED         // Ù…Ù„ØºÙŠ
  NO_SHOW           // Ù„Ù… ÙŠØ­Ø¶Ø±
}

// ============================================================
// ğŸ”¨ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø²Ø§Ø¯Ø§Øª (Auction System)
// ============================================================

// Ø§Ù„Ù…Ø²Ø§Ø¯Ø§Øª
model Auction {
  id                String         @id @default(cuid())
  productId         String         // Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶ Ù„Ù„Ù…Ø²Ø§Ø¯
  title             String         // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø²Ø§Ø¯
  titleAr           String?        // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
  description       String?        // ÙˆØµÙ Ø§Ù„Ù…Ø²Ø§Ø¯
  descriptionAr     String?        // Ø§Ù„ÙˆØµÙ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
  
  // ğŸ’° Ø§Ù„Ø£Ø³Ø¹Ø§Ø±
  startingPrice     Float          // Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ
  currentPrice      Float          // Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
  reservePrice      Float?         // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø¨ÙŠØ¹ (Ø³Ø±ÙŠ)
  buyNowPrice       Float?         // Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„ÙÙˆØ±ÙŠ
  minimumBidIncrement Float        @default(10) // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø²ÙŠØ§Ø¯Ø©
  
  // â° Ø§Ù„ØªÙˆÙ‚ÙŠØª
  startDate         DateTime       // ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø²Ø§Ø¯
  endDate           DateTime       // ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø²Ø§Ø¯
  extendOnBid       Boolean        @default(true) // ØªÙ…Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø²Ø§Ø¯ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø²Ø§ÙŠØ¯Ø© ÙÙŠ Ø¢Ø®Ø± Ø¯Ù‚Ø§Ø¦Ù‚
  
  // ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø²Ø§Ø¯
  status            AuctionStatus  @default(SCHEDULED)
  winnerId          String?        // Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ù…Ø²Ø§Ø¯
  winningBidId      String?        // Ø§Ù„Ù…Ø²Ø§ÙŠØ¯Ø© Ø§Ù„ÙØ§Ø¦Ø²Ø©
  
  // ğŸ“ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©
  featured          Boolean        @default(false) // Ù…Ù…ÙŠØ²
  images            String[]       // ØµÙˆØ± Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…Ø²Ø§Ø¯
  termsAndConditions String?       // Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…
  viewCount         Int            @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª
  bidCount          Int            @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø²Ø§ÙŠØ¯Ø§Øª
  
  // ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
  notifyOnBid       Boolean        @default(true) // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø¹Ù†Ø¯ ÙƒÙ„ Ù…Ø²Ø§ÙŠØ¯Ø©
  notifyBeforeEnd   Boolean        @default(true) // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† Ù‚Ø¨Ù„ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø²Ø§Ø¯
  
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  
  product           Product        @relation(fields: [productId], references: [id], onDelete: Cascade)
  winner            User?          @relation("AuctionWinner", fields: [winnerId], references: [id])
  bids              Bid[]          // Ø§Ù„Ù…Ø²Ø§ÙŠØ¯Ø§Øª
  
  @@map("auctions")
  @@index([productId])
  @@index([status])
  @@index([endDate])
  @@index([featured])
}

// Ø§Ù„Ù…Ø²Ø§ÙŠØ¯Ø§Øª
model Bid {
  id                String         @id @default(cuid())
  auctionId         String
  bidderId          String         // Ø§Ù„Ù…Ø²Ø§ÙŠØ¯
  amount            Float          // Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø²Ø§ÙŠØ¯Ø©
  
  // ğŸ“Š Ø§Ù„Ø­Ø§Ù„Ø©
  status            BidStatus      @default(ACTIVE)
  isWinning         Boolean        @default(false) // Ù‡Ù„ Ù‡ÙŠ Ø§Ù„Ù…Ø²Ø§ÙŠØ¯Ø© Ø§Ù„ÙØ§Ø¦Ø²Ø© Ø­Ø§Ù„ÙŠØ§Ù‹
  isAutoBid         Boolean        @default(false) // Ù…Ø²Ø§ÙŠØ¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
  maxAutoBidAmount  Float?         // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù…Ø²Ø§ÙŠØ¯Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
  
  // ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
  ip                String?        // IP address Ù„Ù„Ù…Ø²Ø§ÙŠØ¯
  userAgent         String?        // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­
  notes             String?        // Ù…Ù„Ø§Ø­Ø¸Ø§Øª
  
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  
  auction           Auction        @relation(fields: [auctionId], references: [id], onDelete: Cascade)
  bidder            User           @relation("UserBids", fields: [bidderId], references: [id], onDelete: Cascade)
  
  @@map("bids")
  @@index([auctionId])
  @@index([bidderId])
  @@index([createdAt(sort: Desc)])
  @@index([amount])
}

// Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø²Ø§Ø¯
enum AuctionStatus {
  SCHEDULED         // Ù…Ø¬Ø¯ÙˆÙ„
  ACTIVE            // Ù†Ø´Ø·
  ENDED             // Ø§Ù†ØªÙ‡Ù‰
  SOLD              // ØªÙ… Ø§Ù„Ø¨ÙŠØ¹
  CANCELLED         // Ù…Ù„ØºÙŠ
  NO_SALE           // Ù„Ù… ÙŠØµÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰
}

// Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø²Ø§ÙŠØ¯Ø©
enum BidStatus {
  ACTIVE            // Ù†Ø´Ø·Ø©
  OUTBID            // ØªÙ… Ø§Ù„Ù…Ø²Ø§ÙŠØ¯Ø© Ø¹Ù„ÙŠÙ‡Ø§
  WINNING           // ÙØ§Ø¦Ø²Ø©
  LOST              // Ø®Ø§Ø³Ø±Ø©
  CANCELLED         // Ù…Ù„ØºÙŠØ©
}


