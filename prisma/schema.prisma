generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String         @id @default(cuid())
  name             String?
  username         String?        @unique
  email            String?        @unique
  emailVerified    DateTime?
  image            String?
  password         String?
  role             UserRole       @default(CUSTOMER)
  phone            String?
  address          String?
  points           Int            @default(0) // Ù†Ù‚Ø§Ø· Ø§Ù„ÙˆÙ„Ø§Ø¡
  partnerId        String?        // Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø±ÙŠÙƒ (Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†)
  partnerStaffPermissions Json?   // ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ¸Ù ÙƒÙ€ JSON
  lastLoginAt      DateTime?      // Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
  lastLoginIp      String?        // Ø¢Ø®Ø± IP
  lastLoginDevice  String?        // Ø¢Ø®Ø± Ø¬Ù‡Ø§Ø²
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  accounts         Account[]
  deliveryStaff    DeliveryStaff?
  marketingStaff   MarketingStaff?
  messagesReceived Message[]      @relation("ReceivedMessages")
  messagesSent     Message[]      @relation("SentMessages")
  orders           Order[]
  reviews          Review[]
  sessions         Session[]
  vendor           Vendor?
  wishlistItems    WishlistItem[]
  savedAddresses   SavedAddress[] // Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
  pointTransactions PointTransaction[] // Ø³Ø¬Ù„ Ø­Ø±ÙƒØ© Ø§Ù„Ù†Ù‚Ø§Ø·
  pushSubscriptions PushSubscription[] // Push notification subscriptions
  fcmDeviceTokens  FCMDeviceToken[] // FCM tokens Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
  activityLogs     UserActivityLog[] // Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·
  sheinOrders      SheinOrder[] // Ø·Ù„Ø¨Ø§Øª Ø´ÙŠ Ø¥Ù†
  
  partner          PartnerCapital? @relation(fields: [partnerId], references: [id])

  @@map("users")
}

// Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡
model SavedAddress {
  id              String   @id @default(cuid())
  userId          String
  title           String   // Ù…Ø«Ù„: Ø§Ù„Ù…Ù†Ø²Ù„ØŒ Ø§Ù„Ø¹Ù…Ù„ØŒ Ø§Ù„Ø®
  fullName        String   // Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„
  phone           String   // Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
  alternativePhone String? // Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¨Ø¯ÙŠÙ„
  governorate     String   // Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
  city            String   // Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ù…Ø±ÙƒØ²
  district        String   // Ø§Ù„Ø­ÙŠ/Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
  street          String   // Ø§Ø³Ù… Ø§Ù„Ø´Ø§Ø±Ø¹
  buildingNumber  String?  // Ø±Ù‚Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰/Ø§Ù„Ø¹Ù…Ø§Ø±Ø©
  floorNumber     String?  // Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ø¨Ù‚
  apartmentNumber String?  // Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©
  landmark        String?  // Ø£Ù‚Ø±Ø¨ Ù…Ø¹Ù„Ù…
  postalCode      String?  // Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ
  isDefault       Boolean  @default(false) // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("saved_addresses")
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
  @@map("accounts")
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("sessions")
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
  @@map("verification_tokens")
}

model Vendor {
  id                 String         @id @default(cuid())
  userId             String         @unique
  businessName       String?        @default("")
  businessNameAr     String?        @default("")
  businessType       String?        @default("store")
  storeName          String?        @default("")
  storeNameAr        String?        @default("")
  storeDescription   String?
  storeDescriptionAr String?
  logo               String?
  banner             String?
  phone              String?
  alternativePhone   String?
  whatsapp           String?
  // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ØªØ¬Ø± (Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„Ø´Ø­Ù† Ù…Ø¹ Ø¨ÙˆØ³Ø·Ø©)
  address            String?        // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„ (Ù†Øµ Ø­Ø±)
  governorate        String?        // Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
  city               String?        // Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ù…Ø±ÙƒØ²
  region             String?        // Ø§Ù„Ø­ÙŠ/Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
  district           String?        // Ø§Ù„Ù…Ù†Ø·Ù‚Ø© (Ù†Ø³Ø®Ø© Ø«Ø§Ù†ÙŠØ© Ù„Ù„ØªÙˆØ§ÙÙ‚)
  street             String?        // Ø§Ø³Ù… Ø§Ù„Ø´Ø§Ø±Ø¹
  buildingNumber     String?        // Ø±Ù‚Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰/Ø§Ù„Ø¹Ù…Ø§Ø±Ø©
  floorNumber        String?        // Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ø¨Ù‚
  apartmentNumber    String?        // Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©
  landmark           String?        // Ø£Ù‚Ø±Ø¨ Ù…Ø¹Ù„Ù…
  postalCode         String?        // Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ
  pickupInstructions String?        // ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø´Ø­Ù†Ø§Øª
  description        String?
  descriptionAr      String?
  category           String?
  subCategory        String?
  yearsOfExperience  Int            @default(0)
  commissionRate     Float          @default(15)
  // Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„
  initialCapital     Float          @default(7500)  // Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„ÙŠ (Ø«Ø§Ø¨Øª)
  capitalBalance     Float          @default(7500)  // Ø±ØµÙŠØ¯ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ (Ù…ØªØºÙŠØ±)
  // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  bankName           String?
  accountNumber      String?
  accountHolderName  String?
  bankAccountName    String?
  bankAccountNumber  String?
  iban               String?
  // Ø§Ù„Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  instaPay           String?
  etisalatCash       String?        // Ø§ØªØµØ§Ù„Ø§Øª ÙƒØ§Ø´
  vodafoneCash       String?        // ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´
  wePay              String?        // ÙˆÙŠ Ø¨Ø§ÙŠ
  // Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ø±Ø³Ù…ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  commercialRegister String?
  taxCard            String?
  nationalId         String?
  businessLicense    String?
  isApproved         Boolean        @default(false)
  isActive           Boolean        @default(true)
  isSuspended        Boolean        @default(false) // Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª Ù„Ù„Ø­Ø³Ø§Ø¨
  suspensionReason   String?        // Ø³Ø¨Ø¨ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù (Ø±Ø³Ø§Ù„Ø© Ù…Ø®ØµØµØ©)
  suspendedAt        DateTime?      // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù
  suspendedBy        String?        // ID Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù„ÙŠ Ø¹Ù…Ù„ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù
  rating             Float          @default(0)
  totalSales         Int            @default(0)
  // ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø´Ø±ÙŠÙƒ
  canDeleteOrders    Boolean        @default(false) // ØµÙ„Ø§Ø­ÙŠØ© Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª
  canUploadShein     Boolean        @default(false) // ØµÙ„Ø§Ø­ÙŠØ© Ø±ÙØ¹ Ù…Ù†ØªØ¬Ø§Øª Ø´ÙŠ Ø¥Ù†
  canAddOfflineProducts Boolean     @default(false) // ØµÙ„Ø§Ø­ÙŠØ© Ø¥Ø¶Ø§ÙØ© Ø¨Ø¶Ø§Ø¹Ø© Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø¸Ø§Ù…
  createdAt          DateTime       @default(now())
  updatedAt          DateTime       @updatedAt
  orders             Order[]
  products           Product[]
  payouts            VendorPayout[]
  partners           PartnerCapital[]
  inventoryItems     InventoryItem[]
  expenses           VendorExpense[]
  vouchers           VendorVoucher[]
  sales              Sale[]
  purchases          Purchase[]
  offlineProducts    OfflineProduct[]
  offlineSuppliers   OfflineSupplier[]
  user               User           @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("vendors")
}

model VendorPayout {
  id        String       @id @default(cuid())
  vendorId  String
  amount    Float
  status    PayoutStatus @default(PENDING)
  method    String
  reference String?
  notes     String?
  paidAt    DateTime?
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  vendor    Vendor       @relation(fields: [vendorId], references: [id])

  @@map("vendor_payouts")
}

model Category {
  id          String    @id @default(cuid())
  name        String
  nameAr      String
  description String?
  image       String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  products    Product[]

  @@map("categories")
}

model Product {
  id              String         @id @default(cuid())
  name            String
  nameAr          String
  description     String?
  descriptionAr   String?
  price           Float
  originalPrice   Float?
  categoryId      String
  images          String?
  stock           Int            @default(0)
  isActive        Boolean        @default(true)
  vendorId        String?
  isOwnProduct    Boolean        @default(false)
  isFlashDeal     Boolean        @default(false)
  flashDealEndsAt DateTime?
  badge           String?
  soldCount       Int            @default(0)
  viewCount       Int            @default(0)
  // Ø­Ù‚ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø©
  sizes           String?        // Ù…Ù‚Ø§Ø³Ø§Øª Ù…ØªØ§Ø­Ø© (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„): "S,M,L,XL"
  colors          String?        // Ø£Ù„ÙˆØ§Ù† Ù…ØªØ§Ø­Ø© (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„): "Ø£Ø­Ù…Ø±,Ø£Ø²Ø±Ù‚,Ø£Ø³ÙˆØ¯"
  saleType        SaleType       @default(SINGLE) // Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ¹: Ù‚Ø·Ø¹Ø© ÙˆØ§Ø­Ø¯Ø© Ø£Ùˆ Ø¹Ø±Ø¶
  bundleProducts  String?        // Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø±ÙÙ‚Ø© ÙÙŠ Ø§Ù„Ø¹Ø±Ø¶ (IDs Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)
  bundleDiscount  Float?         // Ø®ØµÙ… Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©
  platformCommission Float       @default(5) // Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…ØªØ¬Ø± (Ø§ÙØªØ±Ø§Ø¶ÙŠ 5%)
  isVisible       Boolean        @default(true) // ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø± Ø£Ù… Ù„Ø§
  productionCost  Float?         // ØªÙƒÙ„ÙØ© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ (Ù„Ù„Ø£Ø±Ø¨Ø§Ø­)
  
  // ============ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø© ============
  isImported       Boolean        @default(false)     // Ù‡Ù„ Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø³ØªÙˆØ±Ø¯
  importSource     ImportSource?  // Ù…ØµØ¯Ø± Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ (Shein, AliExpress, Alibaba)
  marketingStaffId String?        // Ù…ÙˆØ¸Ù Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
  downPaymentPercent Float        @default(100)       // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© (100% = Ø§Ù„ÙƒÙ„ØŒ 50% = Ù†Øµ)
  deliveryDaysMin  Int?           // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ø£ÙŠØ§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„
  deliveryDaysMax  Int?           // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø£ÙŠØ§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„
  importNotes      String?        // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯
  
  // ============ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¯ÙØ¹ ============
  allowCashOnDelivery Boolean    @default(true) // Ù‡Ù„ ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
  
  // ============ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ÙˆØ³ÙŠØ· (Consignment/Dropship) ============
  productSource   ProductSource  @default(OWNED)     // Ù…ØµØ¯Ø± Ø§Ù„Ù…Ù†ØªØ¬: Ù…Ù…Ù„ÙˆÙƒ Ø£Ùˆ ÙˆØ³ÙŠØ·
  supplierName    String?        // Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯/Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ø£ØµÙ„ÙŠ
  supplierPhone   String?        // Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ù…ÙˆØ±Ø¯
  supplierCost    Float?         // Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯ (Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚ Ù„Ù‡)
  isSupplierPaid  Boolean        @default(false)     // Ù‡Ù„ ØªÙ… Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ù…ÙˆØ±Ø¯
  supplierPaidAt  DateTime?      // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ù…ÙˆØ±Ø¯
  supplierNotes   String?        // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù† Ø§Ù„Ù…ÙˆØ±Ø¯
  
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  fabricPieces    FabricPiece[]
  orderItems      OrderItem[]
  productions     Production[]
  category        Category       @relation(fields: [categoryId], references: [id])
  vendor          Vendor?        @relation(fields: [vendorId], references: [id])
  reviews         Review[]
  wishlistItems   WishlistItem[]
  inventoryItems  InventoryItem[]
  socialMediaPosts SocialMediaPost[]
  supplierPayments SupplierPayment[]
  marketingStaff  MarketingStaff? @relation(fields: [marketingStaffId], references: [id])
  commissions     MarketingCommission[]

  @@map("products")
}

model Fabric {
  id              String        @id @default(cuid())
  name            String
  nameAr          String
  type            String
  color           String
  purchasePrice   Float
  totalLength     Float
  usedLength      Float         @default(0)
  availableLength Float
  supplier        String?
  purchaseDate    DateTime      @default(now())
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  fabricPieces    FabricPiece[]

  @@map("fabrics")
}

model FabricPiece {
  id           String   @id @default(cuid())
  fabricId     String
  productId    String
  lengthUsed   Float
  quantity     Int
  costPerPiece Float
  notes        String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  fabric       Fabric   @relation(fields: [fabricId], references: [id])
  product      Product  @relation(fields: [productId], references: [id])

  @@map("fabric_pieces")
}

model Order {
  id               String            @id @default(cuid())
  orderNumber      String            @unique @default(cuid())
  customerId       String
  vendorId         String?
  status           OrderStatus       @default(PENDING)
  paymentStatus    PaymentStatus     @default(PENDING)
  paymentMethod    PaymentMethod     @default(CASH_ON_DELIVERY)
  eWalletType      String?           // Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©: etisalat_cash, vodafone_cash, we_pay
  bankTransferReceipt String?        // ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ (Cloudinary URL)
  eWalletReceipt   String?           // ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© (Cloudinary URL)
  wePayReceipt     String?           // ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ ØªØ­ÙˆÙŠÙ„ ÙˆÙŠ Ø¨Ø§ÙŠ (Cloudinary URL)
  totalAmount      Float
  deliveryFee      Float             @default(0)
  finalAmount      Float
  installmentId    String?           @unique
  deliveryStaffId  String?
  deliveryAddress  String
  deliveryPhone    String
  customerNotes    String?
  rejectionReason  String?
  inspectionResult InspectionResult?
  deletedAt        DateTime?         // Soft Delete - ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø°Ù (null = Ù…ÙˆØ¬ÙˆØ¯)
  deletedBy        String?           // Ù…Ù† Ù‚Ø§Ù… Ø¨Ø§Ù„Ø­Ø°Ù (userId)
  deletedReason    String?           // Ø³Ø¨Ø¨ Ø§Ù„Ø­Ø°Ù
  // âœ¨ Ø­Ù‚ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…ØªØ·ÙˆØ±
  deliveryMethod   DeliveryMethod    @default(HOME_DELIVERY)
  pickupLocation   String?           // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ØªØ¬Ø± Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…
  governorate      String?           // Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© (Ù„Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…Ù†Ø²Ù„ÙŠ)
  downPayment      Float?            // Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©
  remainingAmount  Float?            // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
  // ğŸšš Ø­Ù‚ÙˆÙ„ Ø´Ø±ÙƒØ© Ø¨ÙˆØ³Ø·Ø© Ù„Ù„Ø´Ø­Ù†
  bustaShipmentId  String?           // Ø±Ù‚Ù… Ø§Ù„Ø´Ø­Ù†Ø© Ù…Ù† Ø´Ø±ÙƒØ© Ø¨ÙˆØ³Ø·Ø©
  bustaStatus      BustaStatus?      // Ø­Ø§Ù„Ø© Ø§Ù„Ø´Ø­Ù†Ø©
  bustaNotes       String?           // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù† Ø´Ø±ÙƒØ© Ø¨ÙˆØ³Ø·Ø©
  bustaSentAt      DateTime?         // ØªØ§Ø±ÙŠØ® Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ø´Ø±ÙƒØ© Ø¨ÙˆØ³Ø·Ø©
  bustaTrackingUrl String?           // Ø±Ø§Ø¨Ø· ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø©
  shippingCompany  String?           @default("BOSTA") // Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  installmentPlan  InstallmentPlan?
  items            OrderItem[]
  customer         User              @relation(fields: [customerId], references: [id])
  deliveryStaff    DeliveryStaff?    @relation(fields: [deliveryStaffId], references: [id])
  vendor           Vendor?           @relation(fields: [vendorId], references: [id])

  @@map("orders")
}

// Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¶Ø© Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ±
model OrderRejectionLog {
  id               String   @id @default(cuid())
  orderId          String   
  rejectedBy       String   // userId Ù…Ù† Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨
  rejectedByRole   String   // VENDOR, ADMIN, or DEVELOPER
  rejectionReason  String   // Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶
  orderValue       Float    // Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø±ÙÙˆØ¶
  vendorId         String?  // Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ø§Ù„Ø·Ù„Ø¨ (Ø¥Ù† ÙˆØ¬Ø¯)
  createdAt        DateTime @default(now())

  @@index([vendorId])
  @@index([rejectedBy])
  @@index([createdAt])
  @@map("order_rejection_logs")
}

model InstallmentPlan {
  id             String               @id @default(cuid())
  orderId        String               @unique
  totalAmount    Float
  downPayment    Float
  monthlyAmount  Float
  numberOfMonths Int
  interestRate   Float                @default(0)
  status         InstallmentStatus    @default(ACTIVE)
  startDate      DateTime             @default(now())
  endDate        DateTime
  createdAt      DateTime             @default(now())
  updatedAt      DateTime             @updatedAt
  payments       InstallmentPayment[]
  order          Order                @relation(fields: [orderId], references: [id])

  @@map("installment_plans")
}

model InstallmentPayment {
  id            String                   @id @default(cuid())
  planId        String
  amount        Float
  dueDate       DateTime
  paidDate      DateTime?
  status        InstallmentPaymentStatus @default(PENDING)
  paymentMethod String?
  reference     String?
  notes         String?
  createdAt     DateTime                 @default(now())
  updatedAt     DateTime                 @updatedAt
  plan          InstallmentPlan          @relation(fields: [planId], references: [id])

  @@map("installment_payments")
}

model OrderItem {
  id          String                @id @default(cuid())
  orderId     String
  productId   String
  quantity    Int
  price       Float
  createdAt   DateTime              @default(now())
  order       Order                 @relation(fields: [orderId], references: [id], onDelete: Cascade)
  product     Product               @relation(fields: [productId], references: [id])
  commissions MarketingCommission[] // Ø¹Ù…ÙˆÙ„Ø§Øª Ù…ÙˆØ¸Ù Ø§Ù„ØªØ³ÙˆÙŠÙ‚

  @@map("order_items")
}

model DeliveryStaff {
  id                   String    @id @default(cuid())
  userId               String?   @unique
  name                 String?   @default("")
  phone                String    @unique
  alternativePhone     String?
  whatsapp             String?
  email                String?   @unique
  password             String?   @default("")
  address              String?
  city                 String?
  region               String?
  vehicleType          String?
  vehicleNumber        String?
  drivingLicense       String?
  nationalId           String?
  // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  bankName             String?
  accountNumber        String?
  iban                 String?
  accountHolderName    String?
  // Ø§Ù„Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  instaPay             String?
  etisalatCash         String?
  vodafoneCash         String?
  wePay                String?
  isActive             Boolean   @default(true)
  isAvailable          Boolean   @default(true)
  isApproved           Boolean   @default(false)
  currentLat           Float?
  currentLng           Float?
  lastLocationUpdate   DateTime?
  totalDeliveries      Int       @default(0)
  successfulDeliveries Int       @default(0)
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @updatedAt
  user                 User?     @relation(fields: [userId], references: [id], onDelete: Cascade)
  orders               Order[]

  @@map("delivery_staff")
}

// Ù…ÙˆØ¸Ù Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø©
model MarketingStaff {
  id                    String                @id @default(cuid())
  userId                String                @unique
  name                  String
  phone                 String                @unique
  email                 String?               @unique
  commissionRate        Float                 @default(5) // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© (Ø§ÙØªØ±Ø§Ø¶ÙŠ 5%)
  totalSales            Float                 @default(0) // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
  totalCommission       Float                 @default(0) // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª
  isActive              Boolean               @default(true)
  isApproved            Boolean               @default(false)
  // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  bankName              String?
  accountNumber         String?
  iban                  String?
  accountHolderName     String?
  // Ø§Ù„Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
  instaPay              String?
  etisalatCash          String?
  vodafoneCash          String?
  wePay                 String?
  createdAt             DateTime              @default(now())
  updatedAt             DateTime              @updatedAt
  user                  User                  @relation(fields: [userId], references: [id], onDelete: Cascade)
  products              Product[]             // Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©
  commissions           MarketingCommission[] // Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª

  @@map("marketing_staff")
}

// Ø³Ø¬Ù„ Ø¹Ù…ÙˆÙ„Ø§Øª Ù…ÙˆØ¸ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚
model MarketingCommission {
  id                String         @id @default(cuid())
  marketingStaffId  String
  productId         String
  orderId           String
  orderItemId       String
  productName       String         // Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬
  saleAmount        Float          // Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¨ÙŠØ¹
  commissionRate    Float          // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©
  commissionAmount  Float          // Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©
  isPaid            Boolean        @default(false) // Ù‡Ù„ ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©
  paidAt            DateTime?      // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  marketingStaff    MarketingStaff @relation(fields: [marketingStaffId], references: [id])
  product           Product        @relation(fields: [productId], references: [id])
  orderItem         OrderItem      @relation(fields: [orderItemId], references: [id])

  @@map("marketing_commissions")
  @@index([marketingStaffId])
  @@index([productId])
  @@index([isPaid])
}

model InventoryLog {
  id          String   @id @default(cuid())
  productId   String
  productName String
  changeType  String
  quantity    Int
  stockBefore Int
  stockAfter  Int
  notes       String?
  createdAt   DateTime @default(now())

  @@map("inventory_logs")
}

model Review {
  id            String   @id @default(cuid())
  productId     String
  userId        String
  orderId       String?  // Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø°ÙŠ ØªÙ… ÙÙŠÙ‡ Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬
  rating        Int
  comment       String?
  images        String?  // ØµÙˆØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)
  isApproved    Boolean  @default(false)
  pointsAwarded Int      @default(0) // Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù…Ù†ÙˆØ­Ø© (5 Ù„Ù„ØªÙ‚ÙŠÙŠÙ… + 5 Ù„Ù„ØµÙˆØ±Ø©)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  product       Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("reviews")
}

model RawMaterial {
  id             String               @id @default(cuid())
  name           String
  nameAr         String
  category       MaterialCategory
  unit           String
  quantity       Float
  minQuantity    Float                @default(10)
  unitPrice      Float
  totalValue     Float
  supplier       String?
  location       String?
  lastPurchase   DateTime?
  createdAt      DateTime             @default(now())
  updatedAt      DateTime             @updatedAt
  movements      MaterialMovement[]
  productionUses ProductionMaterial[]

  @@map("raw_materials")
}

model MaterialMovement {
  id          String       @id @default(cuid())
  materialId  String
  type        MovementType
  quantity    Float
  unitPrice   Float?
  totalCost   Float?
  previousQty Float
  newQty      Float
  reference   String?
  notes       String?
  createdBy   String?
  createdAt   DateTime     @default(now())
  material    RawMaterial  @relation(fields: [materialId], references: [id])

  @@map("material_movements")
}

model Production {
  id                String               @id @default(cuid())
  productionNumber  String               @unique @default(cuid())
  productId         String
  quantity          Int
  laborCost         Float                @default(0)
  overheadCost      Float                @default(0)
  totalMaterialCost Float
  totalCost         Float
  costPerUnit       Float
  status            ProductionStatus     @default(PLANNED)
  startDate         DateTime?
  completionDate    DateTime?
  notes             String?
  createdBy         String?
  createdAt         DateTime             @default(now())
  updatedAt         DateTime             @updatedAt
  materials         ProductionMaterial[]
  product           Product              @relation(fields: [productId], references: [id])

  @@map("productions")
}

model ProductionMaterial {
  id           String      @id @default(cuid())
  productionId String
  materialId   String
  quantityUsed Float
  unitCost     Float
  totalCost    Float
  createdAt    DateTime    @default(now())
  material     RawMaterial @relation(fields: [materialId], references: [id])
  production   Production  @relation(fields: [productionId], references: [id], onDelete: Cascade)

  @@map("production_materials")
}

model PaymentVoucher {
  id              String                  @id @default(cuid())
  voucherNumber   String                  @unique
  type            VoucherType
  amount          Float
  paymentMethod   AccountingPaymentMethod
  recipientName   String?
  payerName       String?
  category        ExpenseCategory?
  reference       String?
  description     String?
  attachments     String?
  status          VoucherStatus           @default(PENDING)
  approvedBy      String?
  approvedAt      DateTime?
  paidBy          String?
  transactionDate DateTime                @default(now())
  createdBy       String?
  createdAt       DateTime                @default(now())
  updatedAt       DateTime                @updatedAt

  @@map("payment_vouchers")
}

model MarketingCampaign {
  id             String         @id @default(cuid())
  name           String
  type           CampaignType
  types          Json?          // Ø£Ù†ÙˆØ§Ø¹ Ù…ØªØ¹Ø¯Ø¯Ø© Ù„Ù„Ø­Ù…Ù„Ø©
  platform       String?
  budget         Float
  spent          Float          @default(0)
  startDate      DateTime
  endDate        DateTime?
  status         CampaignStatus @default(ACTIVE)
  targetAudience String?
  keywords       String?
  adCopy         String?
  impressions    Int            @default(0)
  clicks         Int            @default(0)
  conversions    Int            @default(0)
  ctr            Float          @default(0)
  cpc            Float          @default(0)
  roi            Float          @default(0)
  notes          String?
  
  // Facebook Integration
  facebookCampaignId String?    // Ù…Ø¹Ø±Ù Ø§Ù„Ø­Ù…Ù„Ø© Ø¹Ù„Ù‰ Facebook
  facebookAdSetId    String?    // Ù…Ø¹Ø±Ù Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
  facebookAdId       String?    // Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
  
  createdBy      String?
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt

  @@map("marketing_campaigns")
}

model SeoKeyword {
  id           String    @id @default(cuid())
  keyword      String
  searchVolume Int?
  difficulty   Int?
  currentRank  Int?
  targetRank   Int?
  url          String?
  status       String?
  lastChecked  DateTime?
  notes        String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt

  @@map("seo_keywords")
}

model WebsiteAnalytics {
  id                 String   @id @default(cuid())
  date               DateTime @unique
  pageViews          Int      @default(0)
  uniqueVisitors     Int      @default(0)
  bounceRate         Float    @default(0)
  avgSessionDuration Float    @default(0)
  topPages           String?
  topProducts        String?
  trafficSources     String?
  conversions        Int      @default(0)
  revenue            Float    @default(0)
  createdAt          DateTime @default(now())

  @@map("website_analytics")
}

model WishlistItem {
  id               String   @id @default(cuid())
  userId           String
  productId        String
  notifyOnLowStock Boolean  @default(true)
  createdAt        DateTime @default(now())
  product          Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  user             User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, productId])
  @@map("wishlist_items")
}

model Message {
  id             String   @id @default(cuid())
  content        String
  senderId       String
  receiverId     String?
  isRead         Boolean  @default(false)
  isAdminMessage Boolean  @default(false)
  orderId        String?
  attachmentUrl  String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  receiver       User?    @relation("ReceivedMessages", fields: [receiverId], references: [id], onDelete: Cascade)
  sender         User     @relation("SentMessages", fields: [senderId], references: [id], onDelete: Cascade)

  @@index([senderId])
  @@index([receiverId])
  @@map("messages")
}

// ============ Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ ============
model ChatConversation {
  id           String        @id @default(cuid())
  sessionId    String        @unique // Ù…Ø¹Ø±Ù Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­
  customerName String?       // Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ùˆ Ù…Ø¹Ø±ÙˆÙ
  customerIP   String?       // IP Ø§Ù„Ø¹Ù…ÙŠÙ„
  source       String        @default("website") // website, chat-page, messenger
  isResolved   Boolean       @default(false)
  lastMessageAt DateTime     @default(now())
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  messages     ChatMessage[]

  @@index([sessionId])
  @@index([lastMessageAt])
  @@map("chat_conversations")
}

model ChatMessage {
  id              String           @id @default(cuid())
  conversationId  String
  role            String           // user, assistant
  content         String
  productIds      String?          // IDs Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)
  createdAt       DateTime         @default(now())
  conversation    ChatConversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)

  @@index([conversationId])
  @@map("chat_messages")
}

model SiteSetting {
  id          String   @id @default(cuid())
  key         String   @unique
  value       String
  type        String   @default("text")
  category    String   @default("general")
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("site_settings")
}

model SliderImage {
  id           String   @id @default(cuid())
  title        String
  titleAr      String?
  subtitle     String?
  subtitleAr   String?
  imageUrl     String
  link         String?
  buttonText   String?
  buttonTextAr String?
  order        Int      @default(0)
  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("slider_images")
}

enum UserRole {
  ADMIN
  CUSTOMER
  DELIVERY_STAFF
  VENDOR
  MANUFACTURER
  MARKETING_STAFF // Ù…ÙˆØ¸Ù ØªØ³ÙˆÙŠÙ‚ Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø©
  PARTNER_STAFF   // Ù…ÙˆØ¸Ù Ø´Ø±ÙŠÙƒ
}

enum SaleType {
  SINGLE    // Ù‚Ø·Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©
  BUNDLE    // Ø¹Ø±Ø¶ (Ù…Ø¹ Ù…Ù†ØªØ¬Ø§Øª Ø£Ø®Ø±Ù‰)
}

enum ImportSource {
  SHEIN        // Ø´ÙŠ Ø¥Ù†
  ALIEXPRESS   // Ø¹Ù„ÙŠ Ø§ÙƒØ³Ø¨Ø±ÙŠØ³
  ALIBABA      // Ø¹Ù„ÙŠ Ø¨Ø§Ø¨Ø§
  TAOBAO       // ØªØ§ÙˆØ¨Ø§Ùˆ
  TEMU         // ØªÙŠÙ…Ùˆ
  OTHER        // Ø£Ø®Ø±Ù‰
}

enum PayoutStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
  CANCELLED
}

enum PaymentMethod {
  CASH_ON_DELIVERY
  BANK_TRANSFER
  E_WALLET_TRANSFER
  WE_PAY
  INSTALLMENT_4
  INSTALLMENT_6
  INSTALLMENT_12
  INSTALLMENT_24
  PARTIAL_PAYMENT_50
  FULL_PAYMENT
}

enum InstallmentStatus {
  ACTIVE
  COMPLETED
  DEFAULTED
  CANCELLED
}

enum InstallmentPaymentStatus {
  PENDING
  PAID
  LATE
  FAILED
}

enum OrderStatus {
  PENDING
  CONFIRMED
  PREPARING
  OUT_FOR_DELIVERY
  DELIVERED
  REJECTED
  CANCELLED
}

enum DeliveryMethod {
  HOME_DELIVERY    // ØªÙˆØµÙŠÙ„ Ù„Ù„Ù…Ù†Ø²Ù„
  STORE_PICKUP     // Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±
}

enum BustaStatus {
  PENDING         // ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ø¨ÙˆØ³Ø·Ø©
  SENT_TO_BUSTA   // ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ø´Ø±ÙƒØ© Ø¨ÙˆØ³Ø·Ø©
  PICKED_UP       // ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±
  IN_TRANSIT      // ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ù„Ù„Ø¹Ù…ÙŠÙ„
  OUT_FOR_DELIVERY // Ø®Ø±Ø¬ Ù„Ù„ØªÙˆØµÙŠÙ„
  DELIVERED       // ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„
  ATTEMPTED       // ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„ (Ù…Ø­Ø§ÙˆÙ„Ø©)
  RETURNED        // ØªÙ… Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ù„Ù„Ù…ØªØ¬Ø±
  CANCELLED       // Ù…Ù„ØºÙŠ
  EXCEPTION       // Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø£Ùˆ Ù…Ø´ÙƒÙ„Ø©
}

enum PaymentStatus {
  PENDING
  PAID
  REJECTED
  DELIVERY_FEE_ONLY
}

enum InspectionResult {
  ACCEPTED
  REJECTED
}

enum MaterialCategory {
  FABRIC
  THREAD
  BUTTON
  ZIPPER
  ACCESSORY
  PACKAGING
  OTHER
}

enum MovementType {
  PURCHASE
  PRODUCTION
  RETURN
  ADJUSTMENT
  DAMAGE
  TRANSFER
}

enum ProductionStatus {
  PLANNED
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

enum VoucherType {
  RECEIPT
  PAYMENT
}

enum AccountingPaymentMethod {
  CASH
  BANK_TRANSFER
  CHECK
  CARD
  MOBILE_WALLET
}

enum ExpenseCategory {
  MATERIALS
  SALARIES
  RENT
  UTILITIES
  MARKETING
  TRANSPORT
  MAINTENANCE
  OTHER
}

enum VoucherStatus {
  PENDING
  APPROVED
  REJECTED
  PAID
}

enum CampaignType {
  SEO
  GOOGLE_ADS
  FACEBOOK_ADS
  INSTAGRAM_ADS
  EMAIL
  INFLUENCER
  CONTENT
  OTHER
}

enum CampaignStatus {
  DRAFT
  ACTIVE
  PAUSED
  COMPLETED
}

// Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø±ÙƒØ§Ø¡ Ø§Ù„Ù…ØªØ¹Ø¯Ø¯ÙŠÙ† (Multi-Partner System)
model PartnerCapital {
  id               String              @id @default(cuid())
  vendorId         String
  partnerName      String              // Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙŠÙƒ
  partnerType      String              @default("OWNER") // Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±ÙŠÙƒ: OWNER, PARTNER, etc
  capitalAmount    Float               // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³Ø§Ù‡Ù… Ø¨Ù‡
  initialAmount    Float               @default(0) // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£ÙˆÙ„ÙŠ
  currentAmount    Float               @default(0) // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ
  capitalPercent   Float               // Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø© Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„
  joinDate         DateTime            @default(now())
  isActive         Boolean             @default(true)
  notes            String?
  createdAt        DateTime            @default(now())
  updatedAt        DateTime            @updatedAt
  vendor           Vendor              @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  profitShares     ProfitDistribution[]
  staffMembers     User[]              // Ù…ÙˆØ¸ÙÙŠ Ø§Ù„Ø´Ø±ÙŠÙƒ

  @@map("partner_capitals")
}

// ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙƒØ§Ø¡
model ProfitDistribution {
  id              String         @id @default(cuid())
  partnerId       String
  vendorId        String
  periodStart     DateTime
  periodEnd       DateTime
  totalRevenue    Float          // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª
  totalCost       Float          // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ
  totalExpenses   Float          // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª
  netProfit       Float          // ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­
  partnerShare    Float          // Ø­ØµØ© Ø§Ù„Ø´Ø±ÙŠÙƒ Ù…Ù† Ø§Ù„Ø±Ø¨Ø­
  isPaid          Boolean        @default(false)
  paidAt          DateTime?
  notes           String?
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  partner         PartnerCapital @relation(fields: [partnerId], references: [id])

  @@map("profit_distributions")
}

// Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª (Purchases)
model Purchase {
  id                  String        @id @default(cuid())
  vendorId            String
  productName         String
  productNameAr       String?
  quantity            Float
  unitCost            Float         // Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø© (Ø§Ù„Ø´Ø±Ø§Ø¡)
  totalCost           Float         // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ©
  supplier            String?       // Ø§Ù„Ù…ÙˆØ±Ø¯
  supplierPhone       String?
  purchaseDate        DateTime      @default(now())
  receiptNumber       String?       // Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©
  receiptImage        String?       // ØµÙˆØ±Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
  notes               String?
  fromCapital         Boolean       @default(true)  // Ù…Ù† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø£Ù… Ø¨Ø§Ù„Ù†ÙŠØ§Ø¨Ø©
  sellingPrice        Float?        // Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹
  commissionFromStore Boolean       @default(true)  // Ù‡Ù„ ÙŠØ­Ø³Ø¨ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…ØªØ¬Ø± 5%
  createdAt           DateTime      @default(now())
  updatedAt           DateTime      @updatedAt
  vendor              Vendor        @relation(fields: [vendorId], references: [id])
  sales               Sale[]
  inventoryItemId     String?
  inventoryItem       InventoryItem? @relation(fields: [inventoryItemId], references: [id])

  @@map("purchases")
}

// Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Sales)
model Sale {
  id             String    @id @default(cuid())
  vendorId       String
  purchaseId     String?
  productName    String
  productNameAr  String?
  quantity       Float
  unitPrice      Float     // Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ù„Ù„ÙˆØ­Ø¯Ø©
  totalAmount    Float     // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
  costPrice      Float?    // Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ© Ù„Ù„ÙˆØ­Ø¯Ø©
  profit         Float?    // Ø§Ù„Ø±Ø¨Ø­
  saleDate       DateTime  @default(now())
  customerName   String?
  customerPhone  String?
  invoiceNumber  String?
  notes          String?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  vendor         Vendor    @relation(fields: [vendorId], references: [id])
  purchase       Purchase? @relation(fields: [purchaseId], references: [id])
  returns        Return[]

  @@map("sales")
}

// Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Inventory)
model InventoryItem {
  id                String     @id @default(cuid())
  vendorId          String
  productId         String?
  productName       String
  productNameAr     String?
  totalPurchased    Float      @default(0) // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø´ØªØ±Ø§Ø©
  totalSold         Float      @default(0) // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©
  currentStock      Float      @default(0) // Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ
  minStockAlert     Float      @default(10) // Ø­Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
  unitCost          Float      // Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ©
  lastPurchaseDate  DateTime?
  lastSaleDate      DateTime?
  createdAt         DateTime   @default(now())
  updatedAt         DateTime   @updatedAt
  vendor            Vendor     @relation(fields: [vendorId], references: [id])
  product           Product?   @relation(fields: [productId], references: [id])
  purchases         Purchase[]

  @@map("inventory_items")
}

// Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª (Expenses)
model VendorExpense {
  id             String       @id @default(cuid())
  vendorId       String
  expenseType    ExpenseType
  amount         Float
  vendor         Vendor       @relation(fields: [vendorId], references: [id])
  description    String
  descriptionAr  String?
  expenseDate    DateTime     @default(now())
  receiptImage   String?
  receiptNumber  String?      // Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© (Ù„Ù„Ø±Ø¨Ø· Ù…Ø¹ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª)
  isPaid         Boolean      @default(true)
  paidBy         String?      // Ù…Ù† Ø¯ÙØ¹ (Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ)
  notes          String?
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt

  @@map("vendor_expenses")
}

enum ExpenseType {
  SHIPPING       // Ø´Ø­Ù†
  PACKAGING      // ØªØºÙ„ÙŠÙ
  MARKETING      // ØªØ³ÙˆÙŠÙ‚
  OPERATION      // ØªØ´ØºÙŠÙ„
  SALARY         // Ø±ÙˆØ§ØªØ¨
  RENT           // Ø¥ÙŠØ¬Ø§Ø±
  UTILITIES      // Ù…Ø±Ø§ÙÙ‚ (ÙƒÙ‡Ø±Ø¨Ø§Ø¡ØŒ Ù…Ø§Ø¡ØŒ Ø¥Ù†ØªØ±Ù†Øª)
  MAINTENANCE    // ØµÙŠØ§Ù†Ø©
  TRANSPORTATION // Ù…ÙˆØ§ØµÙ„Ø§Øª ÙˆÙ…Ø´Ø§ÙˆÙŠØ±
  OTHER          // Ù…ØªÙ†ÙˆØ¹Ø©
}

// Ø§Ù„Ø³Ù†Ø¯Ø§Øª (Vouchers)
model VendorVoucher {
  id             String        @id @default(cuid())
  vendorId       String
  voucherType    VoucherType
  voucherNumber  String        @unique
  amount         Float
  description    String
  descriptionAr  String?
  recipientName  String?       // Ø§Ù„Ù…Ø³ØªÙ„Ù… Ø£Ùˆ Ø§Ù„Ø¯Ø§ÙØ¹
  voucherDate    DateTime      @default(now())
  voucherImage   String?       // ØµÙˆØ±Ø© Ø§Ù„Ø³Ù†Ø¯
  status         VoucherStatus @default(PENDING)
  approvedBy     String?
  approvedAt     DateTime?
  notes          String?
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  vendor         Vendor        @relation(fields: [vendorId], references: [id])

  @@map("vendor_vouchers")
}

// Ø§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª (Returns)
model Return {
  id             String      @id @default(cuid())
  vendorId       String
  saleId         String?
  productName    String
  productNameAr  String?
  quantity       Float
  unitPrice      Float
  totalAmount    Float
  reason         String
  reasonAr       String?
  returnDate     DateTime    @default(now())
  status         ReturnStatus @default(PENDING)
  returnedToStock Boolean    @default(false) // Ù‡Ù„ ØªÙ… Ø¥Ø¹Ø§Ø¯ØªÙ‡ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†
  refundAmount   Float?
  customerName   String?
  notes          String?
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  sale           Sale?       @relation(fields: [saleId], references: [id])

  @@map("returns")
}

enum ReturnStatus {
  PENDING        // Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
  APPROVED       // ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
  REJECTED       // Ù…Ø±ÙÙˆØ¶
  REFUNDED       // ØªÙ… Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯
  CANCELLED      // Ù…Ù„ØºÙŠ
}

// ============ Ù†Ø¸Ø§Ù… Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ============
enum ProductSource {
  OWNED          // Ù…Ù†ØªØ¬ Ù…Ù…Ù„ÙˆÙƒ - ØªÙ… Ø´Ø±Ø§Ø¤Ù‡ Ù…Ù† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„
  CONSIGNMENT    // Ù…Ù†ØªØ¬ ÙˆØ³ÙŠØ· - Ù…Ù† Ù…Ø­Ù„ Ø¢Ø®Ø± (Ù„Ø§ ÙŠØ®ØµÙ… Ù…Ù† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„)
  DROPSHIP       // Ø¯Ø±ÙˆØ¨Ø´ÙŠØ¨ - Ø´Ø­Ù† Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯
}

// ============ Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† (Supplier Payments) ============
model SupplierPayment {
  id              String        @id @default(cuid())
  vendorId        String
  productId       String?       // Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø±ØªØ¨Ø·
  orderId         String?       // Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø±ØªØ¨Ø·
  supplierName    String        // Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯
  supplierPhone   String?       // Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ù…ÙˆØ±Ø¯
  amountDue       Float         // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚
  amountPaid      Float         @default(0) // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹
  profit          Float         @default(0) // Ø§Ù„Ø±Ø¨Ø­ (Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ - Ø³Ø¹Ø± Ø§Ù„Ù…ÙˆØ±Ø¯)
  status          PaymentDueStatus @default(PENDING)
  paidAt          DateTime?     // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹
  paymentMethod   String?       // Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹
  paymentNotes    String?       // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¯ÙØ¹
  notes           String?       // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
  saleDate        DateTime      @default(now()) // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¹
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  product         Product?      @relation(fields: [productId], references: [id])

  @@map("supplier_payments")
}

enum PaymentDueStatus {
  PENDING        // Ù…Ø¹Ù„Ù‚ - Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¯ÙØ¹ Ø¨Ø¹Ø¯
  PARTIAL        // Ø¯ÙØ¹ Ø¬Ø²Ø¦ÙŠ
  PAID           // ØªÙ… Ø§Ù„Ø¯ÙØ¹ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
  CANCELLED      // Ù…Ù„ØºÙŠ
}

// ============ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ (Capital Transactions) ============
model CapitalTransaction {
  id              String              @id @default(cuid())
  vendorId        String
  partnerId       String?             // Ø§Ù„Ø´Ø±ÙŠÙƒ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  orderId         String?             // Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø±ØªØ¨Ø·
  type            CapitalTransactionType
  amount          Float               // Ø§Ù„Ù…Ø¨Ù„Øº
  balanceBefore   Float               // Ø§Ù„Ø±ØµÙŠØ¯ Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
  balanceAfter    Float               // Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
  description     String              // ÙˆØµÙ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
  descriptionAr   String?             // ÙˆØµÙ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ
  referenceType   String?             // Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±Ø¬Ø¹ (order, sale, purchase, etc.)
  referenceId     String?             // ID Ø§Ù„Ù…Ø±Ø¬Ø¹
  notes           String?
  createdAt       DateTime            @default(now())
  updatedAt       DateTime            @updatedAt

  @@map("capital_transactions")
}

enum CapitalTransactionType {
  DEPOSIT        // Ø¥ÙŠØ¯Ø§Ø¹ Ø±Ø£Ø³ Ù…Ø§Ù„
  WITHDRAWAL     // Ø³Ø­Ø¨ Ù…Ù† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„
  PURCHASE       // Ø´Ø±Ø§Ø¡ Ø¨Ø¶Ø§Ø¹Ø© (Ø®ØµÙ…)
  SALE_PROFIT    // Ø±Ø¨Ø­ Ù…Ù† Ø¨ÙŠØ¹ (Ø¥Ø¶Ø§ÙØ©)
  CONSIGNMENT_PROFIT // Ø±Ø¨Ø­ Ù…Ù† Ù…Ù†ØªØ¬ ÙˆØ³ÙŠØ· (Ø¥Ø¶Ø§ÙØ©)
  EXPENSE        // Ù…ØµØ±ÙˆÙ (Ø®ØµÙ…)
  REFUND         // Ø§Ø³ØªØ±Ø¯Ø§Ø¯/Ù…Ø±ØªØ¬Ø¹
  ADJUSTMENT     // ØªØ¹Ø¯ÙŠÙ„ ÙŠØ¯ÙˆÙŠ
}

// ============ Ù†Ø¸Ø§Ù… Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙˆØµÙŠÙ„ ============
model DeliveryZone {
  id            String   @id @default(cuid())
  governorate   String   @unique // Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
  deliveryFee   Float    // Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„
  minOrderValue Float    @default(0) // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("delivery_zones")
}

// ============ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ============
model SystemSettings {
  id          String   @id @default(cuid())
  key         String   @unique // Ù…ÙØªØ§Ø­ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
  value       String   // Ø§Ù„Ù‚ÙŠÙ…Ø©
  description String?  // ÙˆØµÙ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
  updatedAt   DateTime @updatedAt

  @@map("system_settings")
}

// ============ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ============
model VendorNotification {
  id          String   @id @default(cuid())
  vendorId    String   // Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø±ÙŠÙƒ
  type        NotificationType // Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  title       String   // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  message     String   // Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  orderId     String?  // Ù…Ø¹Ø±Ù Ø§Ù„Ø·Ù„Ø¨ (Ø¥Ù† ÙˆØ¬Ø¯)
  isRead      Boolean  @default(false) // Ù‡Ù„ ØªÙ… Ù‚Ø±Ø§Ø¡ØªÙ‡
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("vendor_notifications")
  @@index([vendorId, isRead])
}

model CustomerNotification {
  id          String   @id @default(cuid())
  customerId  String   // Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ù…ÙŠÙ„
  type        CustomerNotificationType // Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  title       String   // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  message     String   // Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  orderId     String?  // Ù…Ø¹Ø±Ù Ø§Ù„Ø·Ù„Ø¨ (Ø¥Ù† ÙˆØ¬Ø¯)
  isRead      Boolean  @default(false) // Ù‡Ù„ ØªÙ… Ù‚Ø±Ø§Ø¡ØªÙ‡
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("customer_notifications")
  @@index([customerId, isRead])
}

enum NotificationType {
  NEW_ORDER      // Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
  ORDER_STATUS   // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨
  LOW_STOCK      // Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶
  NEW_MESSAGE    // Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
  SYSTEM         // Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¸Ø§Ù…
}

enum CustomerNotificationType {
  ORDER_CONFIRMED   // ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨
  ORDER_SHIPPED     // ØªÙ… Ø´Ø­Ù† Ø§Ù„Ø·Ù„Ø¨
  ORDER_DELIVERED   // ØªÙ… ØªÙˆØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨
  ORDER_CANCELLED   // ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨
  NEW_MESSAGE       // Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
  SYSTEM            // Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¸Ø§Ù…
}

// ============ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ÙØ±Ø¹ÙŠÙŠÙ† ============
model SubUser {
  id          String       @id @default(cuid())
  vendorId    String       // Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
  name        String       // Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙØ±Ø¹ÙŠ
  email       String       @unique // Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
  password    String       // ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø´ÙØ±Ø©
  phone       String?      // Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
  role        SubUserRole  @default(CASHIER) // Ø§Ù„Ø¯ÙˆØ±
  permissions String[]     // Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
  isActive    Boolean      @default(true)  // Ù‡Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†Ø´Ø·
  lastLogin   DateTime?    // Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  
  // Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·
  activityLogs SubUserActivityLog[]

  @@map("sub_users")
  @@index([vendorId])
}

// Ø£Ù†ÙˆØ§Ø¹ Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ÙØ±Ø¹ÙŠÙŠÙ†
enum SubUserRole {
  CASHIER       // ÙƒØ§Ø´ÙŠØ± Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹ ÙÙ‚Ø·
  ACCOUNTANT    // Ù…Ø­Ø§Ø³Ø¨ - ÙŠØ±Ù‰ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©
  INVENTORY     // Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
  SALES         // Ù…Ù†Ø¯ÙˆØ¨ Ù…Ø¨ÙŠØ¹Ø§Øª
  MANAGER       // Ù…Ø¯ÙŠØ± - ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø© Ù…Ø§Ø¹Ø¯Ø§ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©
}

// Ø³Ø¬Ù„ Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ÙØ±Ø¹ÙŠÙŠÙ†
model SubUserActivityLog {
  id          String   @id @default(cuid())
  subUserId   String
  action      String   // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (login, sale, refund, etc.)
  details     String?  // ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©
  ipAddress   String?  // Ø¹Ù†ÙˆØ§Ù† IP
  createdAt   DateTime @default(now())
  
  subUser     SubUser  @relation(fields: [subUserId], references: [id], onDelete: Cascade)

  @@map("sub_user_activity_logs")
  @@index([subUserId, createdAt])
}

// ============ Ø³Ø¬Ù„ Ù†Ø´Ø§Ø· Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ============
model ActivityLog {
  id          String   @id @default(cuid())
  vendorId    String   // Ø§Ù„Ø¨Ø§Ø¦Ø¹
  action      String   // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
  details     String?  // ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©
  userName    String   // Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ Ù‚Ø§Ù… Ø¨Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
  userRole    String   // Ø¯ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  ipAddress   String?  // Ø¹Ù†ÙˆØ§Ù† IP
  createdAt   DateTime @default(now())

  @@map("activity_logs")
  @@index([vendorId, createdAt])
  @@index([action])
}

// ============ Ù…Ù†Ø§Ø¯ÙŠØ¨ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø®Ø§ØµÙŠÙ† Ø¨Ø§Ù„Ø´Ø±ÙŠÙƒ ============
model VendorDeliveryAgent {
  id               String   @id @default(cuid())
  vendorId         String   // Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ù…Ø§Ù„Ùƒ
  name             String   // Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨
  phone            String   // Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
  alternativePhone String?  // Ø±Ù‚Ù… Ø¨Ø¯ÙŠÙ„
  whatsapp         String?  // ÙˆØ§ØªØ³Ø§Ø¨
  address          String?  // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
  area             String?  // Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙŠ ÙŠØºØ·ÙŠÙ‡Ø§
  vehicleType      String?  // Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø© (Ø³ÙŠØ§Ø±Ø©/Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„/Ø§Ù„Ø®)
  vehicleNumber    String?  // Ø±Ù‚Ù… Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
  deliveryFee      Float    @default(0)  // Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„
  isActive         Boolean  @default(true)
  totalDeliveries  Int      @default(0)
  notes            String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("vendor_delivery_agents")
  @@index([vendorId])
}

// ============ Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø´Ø±ÙŠÙƒ ============
model VendorShippingCompany {
  id               String   @id @default(cuid())
  vendorId         String   // Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ù…Ø§Ù„Ùƒ
  name             String   // Ø§Ø³Ù… Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†
  phone            String?  // Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
  website          String?  // Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
  trackingUrl      String?  // Ø±Ø§Ø¨Ø· ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø§Øª (ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ {tracking_number})
  accountNumber    String?  // Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ù„Ø¯Ù‰ Ø§Ù„Ø´Ø±ÙƒØ©
  contactPerson    String?  // Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
  contactPhone     String?  // Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
  defaultFee       Float    @default(0)  // Ø±Ø³ÙˆÙ… Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
  estimatedDays    Int?     // Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©
  areas            String?  // Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…ØºØ·Ø§Ø© (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)
  isActive         Boolean  @default(true)
  totalShipments   Int      @default(0)
  notes            String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("vendor_shipping_companies")
  @@index([vendorId])
}

// ============ Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ============
model PasswordResetToken {
  id        String   @id @default(cuid())
  email     String
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())

  @@map("password_reset_tokens")
  @@index([email])
  @@index([token])
}

// ============ ÙƒÙˆØ¨ÙˆÙ†Ø§Øª Ø§Ù„Ø®ØµÙ… ============
model Coupon {
  id           String   @id @default(cuid())
  code         String   @unique
  discount     Float    // Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ…
  minPurchase  Float    // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø´Ø±Ø§Ø¡
  discountType String   @default("FIXED") // FIXED Ø£Ùˆ PERCENTAGE
  isActive     Boolean  @default(true)
  expiresAt    DateTime
  maxUses      Int      @default(1) // Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©
  usedCount    Int      @default(0) // Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙØ¹Ù„ÙŠ
  userId       String?  // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† (null Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¹Ø§Ù…)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("coupons")
  @@index([code])
  @@index([userId])
  @@index([isActive, expiresAt])
}

// ============ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· (Loyalty Points) ============
model PointTransaction {
  id          String   @id @default(cuid())
  userId      String
  points      Int      // Ø§Ù„Ù†Ù‚Ø§Ø· (Ù…ÙˆØ¬Ø¨ = ÙƒØ³Ø¨ØŒ Ø³Ø§Ù„Ø¨ = Ø§Ø³ØªØ®Ø¯Ø§Ù…)
  type        String   // EARNED (ÙƒØ³Ø¨ Ù…Ù† Ø´Ø±Ø§Ø¡)ØŒ REDEEMED (Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø´Ø±Ø§Ø¡)ØŒ EXPIRED (Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØªÙ‡Ø§)
  orderId     String?  // Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø±ØªØ¨Ø·
  description String   // ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
  createdAt   DateTime @default(now())
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("point_transactions")
  @@index([userId])
  @@index([orderId])
  @@index([createdAt])
}

// ============ Ø±Ø¨Ø· Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§ ============
model SocialMediaAccount {
  id            String   @id @default(cuid())
  platform      String   // FACEBOOK, INSTAGRAM
  pageId        String   // Facebook Page ID or Instagram Business Account ID
  pageName      String   // Ø§Ø³Ù… Ø§Ù„ØµÙØ­Ø©
  accessToken   String   @db.Text  // Access Token (Ø·ÙˆÙŠÙ„ Ø§Ù„Ø£Ù…Ø¯)
  tokenExpiry   DateTime? // ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªÙˆÙƒÙ†
  isActive      Boolean  @default(true)
  lastSync      DateTime? // Ø¢Ø®Ø± Ù…Ø²Ø§Ù…Ù†Ø©
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  posts         SocialMediaPost[]

  @@map("social_media_accounts")
  @@unique([platform, pageId])
  @@index([platform, isActive])
}

// Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§
model SocialMediaPost {
  id            String   @id @default(cuid())
  accountId     String
  postId        String?  // Facebook/Instagram Post ID
  content       String   @db.Text
  imageUrl      String?
  productId     String?
  status        String   // DRAFT, SCHEDULED, PUBLISHED, FAILED
  scheduledFor  DateTime?
  publishedAt   DateTime?
  error         String?  @db.Text
  likes         Int      @default(0)
  comments      Int      @default(0)
  shares        Int      @default(0)
  reach         Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  account       SocialMediaAccount @relation(fields: [accountId], references: [id], onDelete: Cascade)
  product       Product? @relation(fields: [productId], references: [id], onDelete: SetNull)

  @@map("social_media_posts")
  @@index([accountId, status])
  @@index([productId])
  @@index([scheduledFor])
}

// ØªØªØ¨Ø¹ Ø²ÙˆØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹
model Visitor {
  id          String   @id @default(cuid())
  ipAddress   String?  // IP Address
  userAgent   String?  // Browser/Device info
  page        String?  // Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØªÙŠ ØªÙ…Øª Ø²ÙŠØ§Ø±ØªÙ‡Ø§
  referrer    String?  // Ø§Ù„Ù…ØµØ¯Ø±
  country     String?  // Ø§Ù„Ø¨Ù„Ø¯
  city        String?  // Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©
  device      String?  // Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø² (mobile, desktop, tablet)
  browser     String?  // Ø§Ù„Ù…ØªØµÙØ­
  visitedAt   DateTime @default(now())
  
  @@map("visitors")
  @@index([ipAddress, visitedAt])
  @@index([visitedAt])
}

// Ø¨Ø¶Ø§Ø¹Ø© Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø¸Ø§Ù… (Ø¨Ø¯ÙˆÙ† ØµÙˆØ± Ø£Ùˆ ØªÙØ§ØµÙŠÙ„)
model OfflineProduct {
  id              String   @id @default(cuid())
  vendorId        String
  supplierId      String?  // Ø§Ù„Ù…ÙˆØ±Ø¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  productName     String?  // Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  description     String?  // ÙˆØµÙ Ø§Ø®ØªÙŠØ§Ø±ÙŠ
  purchasePrice   Float    // Ø³Ø¹Ø± Ø§Ù„Ù‚Ø·Ø¹Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø© Ù„Ù„Ø´Ø±Ø§Ø¡
  sellingPrice    Float    // Ø³Ø¹Ø± Ø§Ù„Ù‚Ø·Ø¹Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø© Ù„Ù„Ø¨ÙŠØ¹
  quantity        Int      @default(1) // Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…Ø´ØªØ±Ø§Ø©
  soldQuantity    Int      @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©
  profit          Float    // Ø§Ù„Ø±Ø¨Ø­ = (Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ - Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡) Ã— Ø§Ù„ÙƒÙ…ÙŠØ©
  amountPaid      Float    @default(0) // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ù„Ù„Ù…ÙˆØ±Ø¯
  isPaid          Boolean  @default(false) // Ù‡Ù„ ØªÙ… Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ù…ÙˆØ±Ø¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
  paidAt          DateTime? // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ù…ÙˆØ±Ø¯
  createdAt       DateTime @default(now())
  createdBy       String   // Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù„ÙŠ Ø£Ø¶Ø§ÙÙ‡Ø§
  
  vendor          Vendor   @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  supplier        OfflineSupplier? @relation(fields: [supplierId], references: [id], onDelete: SetNull)
  
  @@map("offline_products")
  @@index([vendorId])
  @@index([supplierId])
  @@index([createdAt])
}

// Ù…ÙˆØ±Ø¯ÙŠÙ† Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
model OfflineSupplier {
  id              String   @id @default(cuid())
  vendorId        String
  name            String   // Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯
  phone           String?  // Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†
  address         String?  // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
  notes           String?  // Ù…Ù„Ø§Ø­Ø¸Ø§Øª
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  vendor          Vendor   @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  offlineProducts OfflineProduct[]
  payments        OfflineSupplierPayment[]
  
  @@map("offline_suppliers")
  @@index([vendorId])
}

// Ø¯ÙØ¹Ø§Øª Ù…ÙˆØ±Ø¯ÙŠÙ† Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
model OfflineSupplierPayment {
  id              String   @id @default(cuid())
  vendorId        String
  supplierId      String
  type            String   @default("RECEIPT") // RECEIPT = Ù‚Ø¨Ø¶ØŒ PAYMENT = ØµØ±Ù
  amount          Float    // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹
  paymentMethod   String   @default("CASH") // Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹
  notes           String?  // Ù…Ù„Ø§Ø­Ø¸Ø§Øª
  paidBy          String   // Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù„ÙŠ Ø¯ÙØ¹
  createdAt       DateTime @default(now())
  
  supplier        OfflineSupplier @relation(fields: [supplierId], references: [id], onDelete: Cascade)
  
  @@map("offline_supplier_payments")
  @@index([vendorId])
  @@index([supplierId])
  @@index([createdAt])
}

// Push Notifications - Device Subscriptions
model PushSubscription {
  id            String   @id @default(cuid())
  userId        String?  // optional - Ù„Ù„Ø²ÙˆØ§Ø± Ø§Ù„ØºÙŠØ± Ù…Ø³Ø¬Ù„ÙŠÙ†
  endpoint      String   @unique // The push service URL
  p256dh        String   // Public key for encryption
  auth          String   // Authentication secret
  userAgent     String?  // Browser/device info
  deviceType    String?  // mobile, desktop, tablet
  createdAt     DateTime @default(now())
  lastUsedAt    DateTime @default(now())
  
  user          User?    @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("push_subscriptions")
  @@index([userId])
  @@index([createdAt])
}

// Push Notifications - Sent Messages
model PushNotification {
  id              String   @id @default(cuid())
  title           String   // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  body            String   // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  icon            String?  // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  image           String?  // ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  badge           String?  // Badge icon
  url             String?  // Ø§Ù„Ø±Ø§Ø¨Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  tag             String?  // Tag to group notifications
  requireInteraction Boolean @default(false) // Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙŠØ¨Ù‚Ù‰ Ø¸Ø§Ù‡Ø± Ù„Ø­Ø¯ Ù…Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØªÙØ§Ø¹Ù„
  silent          Boolean  @default(false)
  vibrate         Json?    // Vibration pattern [200, 100, 200]
  actions         Json?    // Notification actions as JSON
  data            Json?    // Additional data
  sentBy          String   // ID Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù„ÙŠ Ø£Ø±Ø³Ù„
  sentToAll       Boolean  @default(false) // Ø¥Ø±Ø³Ø§Ù„ Ù„ÙƒÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
  recipientCount  Int      @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ†
  successCount    Int      @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù„ÙŠ ØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø¨Ù†Ø¬Ø§Ø­
  failedCount     Int      @default(0) // Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù„ÙŠ ÙØ´Ù„Øª
  createdAt       DateTime @default(now())
  
  @@map("push_notifications")
  @@index([sentBy])
  @@index([createdAt])
}

// FCM Device Tokens - Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
model FCMDeviceToken {
  id              String   @id @default(cuid())
  userId          String?  // Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  token           String   @unique // FCM registration token
  platform        String   // android Ø£Ùˆ ios
  deviceInfo      Json?    // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² (model, OS version, etc.)
  isActive        Boolean  @default(true) // Ø§Ù„Ù€ token Ù„Ø³Ù‡ Ø´ØºØ§Ù„
  createdAt       DateTime @default(now())
  lastUsedAt      DateTime @default(now())
  
  user            User?    @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("fcm_device_tokens")
  @@index([userId])
  @@index([token])
  @@index([isActive])
}

// User Activity Logs - ØªØªØ¨Ø¹ Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
model UserActivityLog {
  id            String   @id @default(cuid())
  userId        String
  action        String   // LOGIN, LOGOUT, ADD_PRODUCT, CREATE_ORDER, etc
  ip            String?
  userAgent     String?
  deviceType    String?  // MOBILE, DESKTOP, TABLET
  browser       String?
  os            String?
  deviceModel   String?
  location      String?  // Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ø¨Ù„Ø¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  metadata      Json?    // Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
  createdAt     DateTime @default(now())
  
  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("user_activity_logs")
  @@index([userId])
  @@index([action])
  @@index([createdAt(sort: Desc)])
}

// Shein Orders - Ø·Ù„Ø¨Ø§Øª Ø´ÙŠ Ø¥Ù† Ø§Ù„Ù…Ø®ØµØµØ©
model SheinOrder {
  id                String   @id @default(cuid())
  userId            String
  customerName      String
  customerPhone     String
  customerEmail     String?
  productLinks      Json     // Ù…ØµÙÙˆÙØ© Ù…Ù† Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
  productImages     Json?    // Ù…ØµÙÙˆÙØ© Ù…Ù† Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
  selectedColors    Json?    // Ù…ØµÙÙˆÙØ© Ù…Ù† Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
  notes             String?  // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„
  status            SheinOrderStatus @default(PENDING)
  estimatedTotal    Float?   // Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©
  advancePayment    Float?   // Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© (50%)
  finalPayment      Float?   // Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (50%)
  advancePaid       Boolean  @default(false) // ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ù‚Ø¯Ù…ØŸ
  finalPaid         Boolean  @default(false) // ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ
  adminNotes        String?  // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("shein_orders")
  @@index([userId])
  @@index([status])
  @@index([createdAt(sort: Desc)])
}

enum SheinOrderStatus {
  PENDING           // Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
  REVIEWING         // ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
  QUOTED            // ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø¹Ø±
  ADVANCE_PAID      // ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ù‚Ø¯Ù…
  ORDERING          // Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø´ÙŠ Ø¥Ù†
  SHIPPED           // ØªÙ… Ø§Ù„Ø´Ø­Ù†
  DELIVERED         // ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…
  COMPLETED         // Ù…ÙƒØªÙ…Ù„
  CANCELLED         // Ù…Ù„ØºÙŠ
}

