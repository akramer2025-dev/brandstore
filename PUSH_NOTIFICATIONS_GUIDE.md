# ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช Push - ุฏููู ุดุงูู

## โ ุงูููุฒุงุช ุงูููููููุฐุฉ

### 1. ุฅุดุนุงุฑุงุช ุชุธูุฑ ุญุชู ูู ุงูุชุทุจูู ููููู
โ **Web Push Notifications** ูุน Service Worker
โ ุชุธูุฑ ูู ูุธุงู ุฅุดุนุงุฑุงุช ุงูุฌูุงู/ุงููุงุจ ุชูุจ (ูุซู WhatsApp)
โ ุชุนูู ุญุชู ูู ุงููุชุตูุญ/ุงูุชุทุจูู ููููู

### 2. ุตูุช ูุณุชูุฑ ููุทูุจุงุช ุงูุฌุฏูุฏุฉ
โ ุตูุช ุทููู ูุชูุฑุฑ ูู ุซุงููุฉ
โ ุฑุณุงูุฉ ุชูุจูู ูุจูุฑุฉ ุชุบุทู ุงูุดุงุดุฉ
โ ุงูุตูุช ูุณุชูุฑ ุญุชู ูุถุบุท ุงูุดุฑูู "ุงุณุชูุจุงู ุงูุทูุจ"

### 3. ูุธุงู ุงุดุชุฑุงูุงุช ุงูุฅุดุนุงุฑุงุช
โ ูุงุนุฏุฉ ุจูุงูุงุช ูุญูุธ ุงุดุชุฑุงูุงุช ุงููุณุชุฎุฏููู
โ API ูุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช (subscribe/unsubscribe)
โ ุฅููุงููุฉ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูุฑุฏูุฉ ูุฌูุงุนูุฉ

## ๐ ููููุฉ ุงูุนูู

### ููุดุฑูู (Vendor):

#### 1. ูุชุญ Dashboard
- ุงูุฏุฎูู ุนูู `/vendor/dashboard`
- **ุชููุงุฆูุงู:**
  - ููุณุฌููู Service Worker
  - ููุทูุจ ุฅุฐู ุงูุฅุดุนุงุฑุงุช ูู ุงููุชุตูุญ
  - ูุจุฏุฃ ุงูุชุญูู ูู ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ูู 10 ุซูุงูู

#### 2. ุนูุฏ ูุตูู ุทูุจ ุฌุฏูุฏ:
**ุงูุณููุงุฑูู ุงููุงูู:**

**ุฃ) ุงูุชุทุจูู ููุชูุญ:**
1. ุฑุณุงูุฉ ุชูุจูู ุญูุฑุงุก ูุจูุฑุฉ ุชุบุทู ุงูุดุงุดุฉ ๐ด
2. ุตูุช "ุจููููุจ" ูุณุชูุฑ ูุชูุฑุฑ ูู ุซุงููุฉ ๐
3. ุฃููููุฉ ุฌุฑุณ ุชุชุญุฑู (animate-bounce)
4. ุฒุฑ "ุงุณุชูุจุงู ุงูุทูุจ" ูุงุถุญ

**ุงูุดุฑูู ูุถุบุท "ุงุณุชูุจุงู ุงูุทูุจ":**
- โ ูุชููู ุงูุตูุช ููุฑุงู
- โ ุชูุบูู ุฑุณุงูุฉ ุงูุชูุจูู
- โ ููููู ุฑุคูุฉ ุชูุงุตูู ุงูุทูุจ

**ุจ) ุงูุชุทุจูู ููููู ุฃู ูู ุงูุฎูููุฉ:**
1. **ุฅุดุนุงุฑ Desktop** ูุธูุฑ ูู ูุธุงู ุงูุฅุดุนุงุฑุงุช
2. **ุตูุช ุงููุธุงู** ุงูุงูุชุฑุงุถู (beep)
3. **ุงูุชุฒุงุฒ** (ุนูู ุงูููุจุงูู) ๐ณ
4. **requireInteraction: true** - ูุฌุจ ุนูู ุงููุณุชุฎุฏู ุงูุชูุงุนู ูุนู

**ุงูุดุฑูู ูุถุบุท ุนูู ุงูุฅุดุนุงุฑ:**
- โ ููุชุญ ุงูุชุทุจูู ุนูู `/vendor/dashboard`
- โ ูุฑูุฒ ุนูู ุงููุงูุฐุฉ ุฅุฐุง ูุงูุช ููุชูุญุฉ ุจุงููุนู

### ููุนููุงุก (Customers):

#### ุชููู ุฅุดุนุงุฑุงุช ุงูุน ุฑูุถ ูุงูููุชุฌุงุช ุงูุฌุฏูุฏุฉ:
1. **ุงูุงุดุชุฑุงู:** ุฒุฑ ูู ุงููููุน "๐ ุงุดุชุฑู ูู ุงูุฅุดุนุงุฑุงุช"
2. **ุงูุฅุฐู:** ุงููุชุตูุญ ูุทูุจ ุงูุฅุฐู
3. **ุงูุชุฃููุฏ:** ุฅุดุนุงุฑ ุชุฌุฑูุจู ูุตู ููุฑุงู
4. **ุงูุงุณุชูุจุงู:** ูู ุงูุนุฑูุถ ุงูุฌุฏูุฏุฉ ุชุตู ุชููุงุฆูุงู

## ๐ฑ ุงููููุงุช ุงูููุถุงูุฉ

### 1. Service Worker
**ุงูููู:** `/public/service-worker.js`

**ุงููุธุงุฆู:**
- ุงุณุชูุจุงู Push Events
- ุฅุธูุงุฑ ุงูุฅุดุนุงุฑุงุช
- ูุนุงูุฌุฉ ููุฑุงุช ุงููุณุชุฎุฏู
- ุฅุฑุณุงู ุฑุณุงุฆู ููููุงูุฐ ุงูููุชูุญุฉ

### 2. API Endpoints

#### `/api/push/subscribe` (POST)
**ุงูุงุดุชุฑุงู ูู ุงูุฅุดุนุงุฑุงุช:**
```json
{
  "action": "subscribe",
  "subscription": { 
    "endpoint": "...",
    "keys": { "p256dh": "...", "auth": "..." }
  }
}
```

**ุฅูุบุงุก ุงูุงุดุชุฑุงู:**
```json
{
  "action": "unsubscribe"
}
```

#### `/api/push/subscribe` (PUT)
**ุฅุฑุณุงู ุฅุดุนุงุฑ ููุณุชุฎุฏู ูุญุฏุฏ (Admin Only):**
```json
{
  "userId": "user_id",
  "title": "ุนุฑุถ ุฌุฏูุฏ!",
  "body": "ุฎุตู 50% ุนูู ุฌููุน ุงูููุชุฌุงุช",
  "data": { "url": "/products/123" }
}
```

### 3. Database Schema
**Model:** `PushSubscription`
```prisma
model PushSubscription {
  id           String   @id @default(cuid())
  userId       String   @unique
  subscription String   // JSON
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}
```

### 4. Vendor Dashboard
**ุงูุชุญุฏูุซุงุช:**
- โ ุงุณุชูุจุงู ุฅุดุนุงุฑุงุช ูู Service Worker
- โ ุตูุช ูุณุชูุฑ loop
- โ ุฑุณุงูุฉ ุชูุจูู fullscreen
- โ ุฒุฑ "ุงุณุชูุจุงู ุงูุทูุจ"
- โ ุฅููุงู ุงูุตูุช ุนูุฏ ุงูููุฑ

## ๐ VAPID Keys

**ุชู ุงูุชูููุฏ ุชููุงุฆูุงู:**
```env
NEXT_PUBLIC_VAPID_PUBLIC_KEY="BAFfxm1n3LekI2WupOuXkBoWhqEFtYfa-km64ZD8xC2oKggixZhBenlpfNcOjQiQysAb3FwrBsVRIodcYyuTiFU"
VAPID_PRIVATE_KEY="60tBaU4cC-hoax7ND3Rjud_q1UG-QwEIpDqtfll-NJI"
VAPID_SUBJECT="mailto:admin@remostore.com"
```

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุงูุตูุช ุงููุณุชูุฑ
1. ุงูุชุญ `/vendor/dashboard` ุนูู ุงูููุจุงูู
2. ุนูู ุงููุงุจุ ุงุทูุจ ููุชุฌ
3. **ูุฌุจ ุฃู ูุญุฏุซ:**
   - ุตูุช ูุณุชูุฑ ูุชูุฑุฑ
   - ุฑุณุงูุฉ ุญูุฑุงุก ูุจูุฑุฉ
   - ุฒุฑ "ุงุณุชูุจุงู ุงูุทูุจ"
4. ุงุถุบุท "ุงุณุชูุจุงู ุงูุทูุจ"
5. **ูุฌุจ:** ุงูุตูุช ูุชููู ููุฑุงู

### ุงุฎุชุจุงุฑ 2: ุฅุดุนุงุฑ ูุน ุงูุชุทุจูู ููููู
1. ุงูุชุญ `/vendor/dashboard`
2. ุงุณูุญ ุจุงูุฅุดุนุงุฑุงุช ุนูุฏูุง ููุทูุจ
3. **ุฃุบูู** ุงูุชุทุจูู/Tab
4. ุนูู ุฌูุงุฒ ุขุฎุฑุ ุงุทูุจ ููุชุฌ
5. ุงูุชุธุฑ 10 ุซูุงูู
6. **ูุฌุจ ุฃู ูุธูุฑ:** ุฅุดุนุงุฑ ูู ูุธุงู ุงูุฅุดุนุงุฑุงุช
7. ุงุถุบุท ุนูู ุงูุฅุดุนุงุฑ
8. **ูุฌุจ:** ููุชุญ ุงูุชุทุจูู ุชููุงุฆูุงู

### ุงุฎุชุจุงุฑ 3: ุฅุดุนุงุฑุงุช ููุนููุงุก (ูุฑูุจุงู)
- ุฅุถุงูุฉ ุฒุฑ "ุงุดุชุฑู ูู ุงูุฅุดุนุงุฑุงุช" ูู ุงููููุน
- ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุฌูุงุนูุฉ ุนู ุงูุนุฑูุถ

## ๐ง ุงููุชุทูุจุงุช

### ูููุชุตูุญ:
- โ Chrome/Edge (ุงูุฃูุถู)
- โ Firefox
- โ Safari (iOS 16.4+)

### ุงูุฃุฐููุงุช:
1. **Notifications Permission** - ููุทูุจ ุชููุงุฆูุงู
2. **Service Worker** - ููุณุฌููู ุชููุงุฆูุงู
3. **Background Sync** - ูุฏุนูู ูู ูุนุธู ุงููุชุตูุญุงุช

### HTTPS:
โ๏ธ **ููู:** Push Notifications ุชุนูู ููุท ุนูู HTTPS (ุฃู localhost)
- Development: `localhost` โ
- Production: ูุฌุจ HTTPS โ

## ๐ก ูุตุงุฆุญ

### ููุชุทููุฑ:
- ุงุณุชุฎุฏู Chrome DevTools โ Application โ Service Workers
- ุฑุงูุจ console.log ูู Service Worker
- ุฌุฑูุจ "Send notification" ูู DevTools

### ููุฅูุชุงุฌ:
- ุฑุงูุจ ุนุฏุฏ ุงูุงุดุชุฑุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงุญุฐู ุงูุงุดุชุฑุงูุงุช ุงููุฏููุฉ/Failed
- ุงุณุชุฎุฏู rate limiting ูููุน ุงูุฅุฒุนุงุฌ

## ๐ ุฅุญุตุงุฆูุงุช (ูุฑูุจุงู)

### ููุญุฉ ุชุญูู ุงูุฅุดุนุงุฑุงุช:
- ุนุฏุฏ ุงููุดุชุฑููู
- ูุนุฏู ูุชุญ ุงูุฅุดุนุงุฑุงุช
- ุฃูุถู ุฃููุงุช ุงูุฅุฑุณุงู
- ุชูุงุฑูุฑ ุชูุตูููุฉ

## ๐ ุงูุฎุทูุงุช ุงููุงุฏูุฉ

### ุงููุฑุญูุฉ 2:
- [ ] ุตูุญุฉ ุงุดุชุฑุงู ุงูุนููุงุก
- [ ] ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุฌูุงุนูุฉ
- [ ] ุฌุฏููุฉ ุงูุฅุดุนุงุฑุงุช
- [ ] ููุงูุจ ุฌุงูุฒุฉ ููุฅุดุนุงุฑุงุช

### ุงููุฑุญูุฉ 3:
- [ ] ุชุญูููุงุช ูุชูุฏูุฉ
- [ ] A/B testing ููุฅุดุนุงุฑุงุช
- [ ] ุชุฎุตูุต ุจูุงุกู ุนูู ุณููู ุงููุณุชุฎุฏู
- [ ] ุฏุนู ุงูุตูุฑ ูู ุงูุฅุดุนุงุฑุงุช

---

**ุชู ุงูุชูููุฐ:** 6 ูุจุฑุงูุฑ 2026
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุชุฌุฑุจุฉ
**ุงูุฏุนู:** Web Push API + Service Workers + VAPID
