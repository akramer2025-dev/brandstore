# ๐ฏ ูุธุงู ุงูุชูุณูุท ุงููุจุณูุท ูุน ุงููุฑุงุฌุนุฉ ุงูุฅุฏุงุฑูุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุชูุณูุท ูุญุณูู ูุชูุญ ููุนููุงุก ุฑูุน ูุณุชูุฏุงุชูู ุจุณูููุฉุ ุซู ูุฑุงุฌุนุชูุง ูู ูุจู ุงููุฏูุฑ ูุจู ุงูููุงููุฉ ุงูููุงุฆูุฉ.

---

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1๏ธโฃ **ุชุจุณูุท ุฑูุน ุงููุณุชูุฏุงุช ููุนููู**

#### ูุจู ุงูุชุญุณูู โ
- ุงูุนููู ูุฑูุน ุงููุณุชูุฏุงุช
- ููุงุฌู ุตุนูุจุงุช ุชูููุฉ (Cloudinaryุ timeoutุ etc.)
- ูุง ูุนุฑู ูุงุฐุง ุณูุญุฏุซ ุจุนุฏ ุฐูู

#### ุจุนุฏ ุงูุชุญุณูู โ
- ุงูุนููู ูุฑูุน ุงููุณุชูุฏุงุช โ **ูุจูู ููุฑู**
- ุฑุณุงูุฉ ูุงุถุญุฉ: "ุณูุชู ูุฑุงุฌุนุฉ ุทูุจู ูู ูุจู ุงูุฅุฏุงุฑุฉ"
- ุญุงูุฉ ุงูุทูุจ: `PENDING` (ุจุงูุชุธุงุฑ ุงููุฑุงุฌุนุฉ)
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ ุจุฏูู ุชุนููุฏุงุช

---

### 2๏ธโฃ **ูุธุงู ุฅุดุนุงุฑุงุช Real-time ูููุฏูุฑ**

#### ุงูููุฒุงุช:
- ๐ **ุฅุดุนุงุฑุงุช ููุฑูุฉ** ุนูุฏ ูู ุทูุจ ุฌุฏูุฏ
- ๐ **ุตูุช ุชูุจูู** ุชููุงุฆู
- ๐ **Badge ูุนุฑุถ ุนุฏุฏ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ**
- ๐ **ุชุญุฏูุซ ุชููุงุฆู ูู 30 ุซุงููุฉ**
- ๐ **ููุญุฉ ุฅุดุนุงุฑุงุช ููุจุซูุฉ** ุชุนุฑุถ ุชูุงุตูู ุงูุทูุจุงุช

#### ุงููููุงุช:
```
src/
โโโ components/
โ   โโโ AdminInstallmentNotifications.tsx  โ Component ุงูุฅุดุนุงุฑุงุช
โโโ app/
โ   โโโ admin/installments/
โ   โ   โโโ page.tsx                       โ ุตูุญุฉ ุงููุฏูุฑ ุงููุญุฏุซุฉ
โ   โโโ api/admin/installments/
โ       โโโ pending/route.ts               โ API ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ
```

---

### 3๏ธโฃ **ููุงููุฉ/ุฑูุถ ุณุฑูุน**

#### ูู ุตูุญุฉ ุงููุงุฆูุฉ ูุจุงุดุฑุฉ:
- โ **ุฒุฑ ูุจูู** ุฃุฎุถุฑ (ููุทูุจุงุช ุงูุฌุฏูุฏุฉ ููุท)
- โ **ุฒุฑ ุฑูุถ** ุฃุญูุฑ (ูุน ุฅููุงููุฉ ูุชุงุจุฉ ุณุจุจ)
- ูุง ุญุงุฌุฉ ููุชุญ ุตูุญุฉ ุงูุชูุงุตูู!

#### API Endpoints:
```
POST /api/admin/installments/[id]/approve  โ ููุงููุฉ ุณุฑูุนุฉ
POST /api/admin/installments/[id]/reject   โ ุฑูุถ ูุน ุณุจุจ
```

---

## ๐ ุณูุฑ ุงูุนูู ุงูุฌุฏูุฏ (Workflow)

### ูู ุฌูุฉ ุงูุนููู ๐ค

1. **ูุฎุชุงุฑ ุงูููุชุฌ** ุงูุฐู ูุฑูุฏ ุดุฑุงุคู ุจุงูุชูุณูุท
2. **ูุฑูุน ุงููุณุชูุฏุงุช**:
   - ุตูุฑุฉ ุงูุจุทุงูุฉ ุงูุดุฎุตูุฉ (ุงููุฌู)
   - ุตูุฑุฉ ุงูุจุทุงูุฉ (ุงูุธูุฑ)
   - ุตูุฑุฉ ุณูููู
   - ุฅูุตุงู ุงูุฏูุนุฉ ุงูุฃููู
   - ุงูุชูููุน
3. **ูุถุบุท "ุฅุฑุณุงู"** 
4. **ูุธูุฑ ูู**:
   ```
   โ ุชู ุงุณุชูุงู ุทูุจู ุจูุฌุงุญ!
   ๐ ุณูุชู ูุฑุงุฌุนุชู ูู ูุจู ุงูุฅุฏุงุฑุฉ ูุฑูุจุงู
   ```
5. **ููุชูู ูุตูุญุฉ ุงูุฏูุน** (Checkout)
6. **ููุชุธุฑ ููุงููุฉ ุงููุฏูุฑ** (ูุณุชูู ุฅุดุนุงุฑ ุนุจุฑ email/SMS)

---

### ูู ุฌูุฉ ุงููุฏูุฑ ๐จโ๐ผ

#### ุฃ) ุนุจุฑ ุงูุฅุดุนุงุฑุงุช Real-time

1. **ูุธูุฑ ุฅุดุนุงุฑ ููุจุซู** ๐:
   ```
   ุทูุจ ุชูุณูุท ุฌุฏูุฏ!
   ูู: ุฃุญูุฏ ูุญูุฏ
   ุงููุจูุบ: 5,000 ุฌ.ู
   ```

2. **ูุถุบุท ุนูู ุงูุฅุดุนุงุฑ** โ ููุชูู ูุตูุญุฉ ุงููุฑุงุฌุนุฉ

#### ุจ) ูู ุตูุญุฉ ุงููุงุฆูุฉ

1. **ูุฏุฎู** `/admin/installments`
2. **ูุฑู ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ** ุจูุถูุญ:
   - Badge: **"ูู ุงูุงูุชุธุงุฑ"** (ุฃุตูุฑ)
   - ุนุฏุฏ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ูู ุงูุฅุญุตุงุฆูุงุช
3. **ูุฎุชุงุฑ ุฃุญุฏ ุงูุฎูุงุฑุงุช**:

   **ุฎูุงุฑ 1: ููุงููุฉ ุณุฑูุนุฉ**
   ```
   - ูุถุบุท ุฒุฑ "โ ูุจูู"
   - ูุคูุฏ ุงูููุงููุฉ
   - ุงูุทูุจ ูุชุบูุฑ ุฅูู "ููุงูู ุนููู" โ
   - ุงูุนููู ูุณุชูู ุฅุดุนุงุฑ
   ```

   **ุฎูุงุฑ 2: ุฑูุถ ุณุฑูุน**
   ```
   - ูุถุบุท ุฒุฑ "โ ุฑูุถ"
   - ููุชุจ ุณุจุจ ุงูุฑูุถ (ุงุฎุชูุงุฑู)
   - ุงูุทูุจ ูุชุบูุฑ ุฅูู "ูุฑููุถ" โ
   - ุงูุนููู ูุณุชูู ุฅุดุนุงุฑ + ุงูุณุจุจ
   ```

   **ุฎูุงุฑ 3: ูุฑุงุฌุนุฉ ุชูุตูููุฉ**
   ```
   - ูุถุบุท "ุนุฑุถ ุงูุชูุงุตูู"
   - ููุชุญ ุตูุญุฉ ูุงููุฉ ุชุนุฑุถ:
     โข ุงููุณุชูุฏุงุช (ุงูุจุทุงูุฉุ ุงูุณููููุ ุงูุชูููุน)
     โข ุจูุงูุงุช ุงูุนููู
     โข ุชูุงุตูู ุงูุชูุณูุท
   - ููุงูู ุฃู ูุฑูุถ ูู ููุงู
   ```

---

## ๐ ุญุงูุงุช ุงูุทูุจ (Status)

| ุงูุญุงูุฉ | ุงููุตู | ุงูููู | ูู ูุณุชุทูุน ุชุบููุฑูุงุ |
|--------|------|------|---------------------|
| `PENDING` | ูู ุงูุชุธุงุฑ ูุฑุงุฌุนุฉ ุงููุฏูุฑ | ๐ก ุฃุตูุฑ | ุชููุงุฆู ุนูุฏ ุงูุฑูุน |
| `APPROVED` | ุชูุช ุงูููุงููุฉ โ | ๐ข ุฃุฎุถุฑ | ุงููุฏูุฑ ููุท |
| `REJECTED` | ูุฑููุถ โ | ๐ด ุฃุญูุฑ | ุงููุฏูุฑ ููุท |
| `UNDER_REVIEW` | ููุฏ ุงููุฑุงุฌุนุฉ (ุงุฎุชูุงุฑู) | ๐ต ุฃุฒุฑู | ุงููุฏูุฑ |
| `EXPIRED` | ุงูุชูู ุงูููุช | โซ ุฑูุงุฏู | ุชููุงุฆู ุจุนุฏ 30 ููู |

---

## ๐๏ธ ุงููููุงุช ุงููุนุฏููุฉ/ุงููุถุงูุฉ

### 1๏ธโฃ API Routes

#### โจ **ุฌุฏูุฏ**: `/api/admin/installments/pending/route.ts`
```typescript
// ุฌูุจ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ููุฐ ุขุฎุฑ ูุญุต
GET /api/admin/installments/pending?since=2026-02-17T10:00:00Z

Response:
{
  "success": true,
  "newRequests": [
    {
      "id": "clx123",
      "agreementNumber": "AGR-ABC-123",
      "fullName": "ุฃุญูุฏ ูุญูุฏ",
      "totalAmount": 5000,
      "createdAt": "2026-02-17T10:30:00Z"
    }
  ],
  "count": 1
}
```

#### โจ **ุฌุฏูุฏ**: `/api/admin/installments/[id]/approve/route.ts`
```typescript
// ููุงููุฉ ุณุฑูุนุฉ
POST /api/admin/installments/clx123/approve

Response:
{
  "success": true,
  "message": "ุชูุช ุงูููุงููุฉ ุนูู ุงูุทูุจ ุจูุฌุงุญ",
  "agreement": {
    "id": "clx123",
    "status": "APPROVED"
  }
}
```

#### โจ **ุฌุฏูุฏ**: `/api/admin/installments/[id]/reject/route.ts`
```typescript
// ุฑูุถ ูุน ุณุจุจ
POST /api/admin/installments/clx123/reject
Body: { "reason": "ูุณุชูุฏุงุช ุบูุฑ ูุงุถุญุฉ" }

Response:
{
  "success": true,
  "message": "ุชู ุฑูุถ ุงูุทูุจ",
  "agreement": {
    "id": "clx123",
    "status": "REJECTED",
    "rejectionReason": "ูุณุชูุฏุงุช ุบูุฑ ูุงุถุญุฉ"
  }
}
```

#### ๐ **ูุนุฏูู**: `/api/installment/agreement/route.ts`
```typescript
// ุชุบููุฑ ุงูุญุงูุฉ ูู DOCUMENTS_COMPLETE ุฅูู PENDING
status: 'PENDING'  // ุจุฏูุงู ูู 'DOCUMENTS_COMPLETE'

// ุฅุถุงูุฉ logs ูููุฏูุฑ
console.log('๐ [ADMIN NOTIFICATION] ุทูุจ ุชูุณูุท ุฌุฏูุฏ!');
```

---

### 2๏ธโฃ Frontend Components

#### โจ **ุฌุฏูุฏ**: `src/components/AdminInstallmentNotifications.tsx`
```typescript
// Component ุงูุฅุดุนุงุฑุงุช Real-time
- ููุญุต ูู 30 ุซุงููุฉ
- ูุนุฑุถ badge ุจุนุฏุฏ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ
- ูุดุบู ุตูุช ุนูุฏ ุทูุจ ุฌุฏูุฏ
- ููุญุฉ ููุจุซูุฉ ุชุนุฑุถ ุงูุชูุงุตูู
```

#### ๐ **ูุนุฏูู**: `src/app/admin/installments/page.tsx`
```typescript
// ุฅุถุงูุฉ:
1. ุงุณุชูุฑุงุฏ Component ุงูุฅุดุนุงุฑุงุช
2. ุฃุฒุฑุงุฑ "ูุจูู" ู "ุฑูุถ" ุณุฑูุนุฉ ูู ุงูุฌุฏูู
3. ุนุฑุถ ููุท ููุทูุจุงุช ุงูุฌุฏูุฏุฉ (PENDING)
4. <AdminInstallmentNotifications /> ูู ููุงูุฉ ุงูุตูุญุฉ
```

#### ๐ **ูุนุฏูู**: `src/app/installment-agreement/page.tsx`
```typescript
// ุชุญุณูู ุฑุณุงูุฉ ุงููุฌุงุญ:
toast.success(
  'โ ุชู ุงุณุชูุงู ุทูุจู ุจูุฌุงุญ!\n๐ ุณูุชู ูุฑุงุฌุนุชู ูู ูุจู ุงูุฅุฏุงุฑุฉ ูุฑูุจุงู',
  { duration: 5000 }
);
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุทูุฑ:

1. **ูุง ุญุงุฌุฉ ูุฃู ุชุซุจูุช ุฅุถุงูู** - ูู ุดูุก ุฌุงูุฒ!
2. **ุดุบูู ุงูุณูุฑูุฑ**:
   ```bash
   npm run dev
   ```
3. **ุฌุฑูุจ ุงููุธุงู**:
   - ุงูุชุญ ุตูุญุฉ ููุชุฌ: `/products/[id]`
   - ุงุถุบุท "ุดุฑุงุก ุจุงูุชูุณูุท"
   - ุงุฑูุน ุงููุณุชูุฏุงุช
   - ุดุงูุฏ ุงูุฑุณุงูุฉ ุงูุฌุฏูุฏุฉ

4. **ููุงุฎุชุจุงุฑ ููุฏูุฑ**:
   - ุณุฌู ุฏุฎูู ูู ADMIN
   - ุงุฐูุจ ุฅูู: `/admin/installments`
   - ุดุงูุฏ ุฒุฑ ุงูุฅุดุนุงุฑุงุช ูู ุงูุฃุณูู ูุณุงุฑ
   - ุฌุฑูุจ ุงูููุงููุฉ/ุงูุฑูุถ ุงูุณุฑูุน

---

### ูููุฏูุฑ:

1. **ุงูุชุญ ููุญุฉ ุงูุชุญูู**: `/admin/installments`
2. **ุฑุงูุจ ุงูุฅุดุนุงุฑุงุช** ูู ุงูุฒุงููุฉ ุงูุณููู ุงููุณุฑู
3. **ุนูุฏ ุทูุจ ุฌุฏูุฏ**:
   - ุณูุธูุฑ badge ุฃุญูุฑ ุจุงูุนุฏุฏ
   - ุณูุดุชุบู ุตูุช ุชูุจูู
   - toast notification ุชุธูุฑ
4. **ุงุถุบุท ุนูู ุงูุฅุดุนุงุฑ** ููุชุญ ุงูููุญุฉ
5. **ุฑุงุฌุน ุงูุทูุจ**:
   - **ุณุฑูุน**: ุงุถุบุท "โ ูุจูู" ุฃู "โ ุฑูุถ" ูู ุงูุฌุฏูู
   - **ุชูุตููู**: ุงุถุบุท "ุนุฑุถ ุงูุชูุงุตูู"

---

## ๐ฑ ุงูุฅุดุนุงุฑุงุช

### ููุน ุงูุฅุดุนุงุฑุงุช:

| ุงูููุน | ูุชู ูุธูุฑ | ุงูุตูุช | ุงููุฏุฉ |
|-------|---------|-------|------|
| **Toast** | ุทูุจ ุฌุฏูุฏ | โ | 10 ุซูุงูู |
| **Badge** | ุทูุจุงุช ูุนููุฉ | โ | ุฏุงุฆู |
| **Panel** | ุนูุฏ ุงูุถุบุท | โ | ุญุชู ุงูุฅุบูุงู |

### ุงูุตูุช:
```
ููู ุงูุตูุช: public/notification.mp3
ุญุฌู: ุตุบูุฑ (< 100 KB)
ุตูุบุฉ: MP3
ูุณุชูู ุงูุตูุช: 50%
```

๐ก **ููุงุญุธุฉ**: ุชุฃูุฏ ูู ุฅุถุงูุฉ ููู ุงูุตูุช ูู ูุฌูุฏ `public/`

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### โ ูุง ุชุธูุฑ ุงูุฅุดุนุงุฑุงุช

**ุงูุญู**:
1. ุชุฃูุฏ ุฃูู ูุณุฌู ุฏุฎูู ูู ADMIN
2. ุงูุชุญ DevTools โ Console
3. ุงุจุญุซ ุนู ุฃุฎุทุงุก ูู API call
4. ุชุฃูุฏ ูู ูุฌูุฏ ุทูุจุงุช ุฌุฏูุฏุฉ (status: PENDING)

### โ ุงูุตูุช ูุง ูุนูู

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ**:
1. ููู ุงูุตูุช ุบูุฑ ููุฌูุฏ ูู `public/notification.mp3`
2. ุงููุชุตูุญ ูููุน ุงูุตูุช ุงูุชููุงุฆู (ุจุนุถ ุงููุชุตูุญุงุช)
3. ุงูุตูุช ููุชูู ูู ุงููุธุงู

**ุงูุญู**:
- ุฃุถู ููู `notification.mp3` ูู `public/`
- ุฃู ุฃุฒู ุณุทุฑ `playNotificationSound()` ุฅุฐุง ูุง ุชุฑูุฏ ุตูุช

### โ ุฃุฒุฑุงุฑ ุงููุจูู/ุงูุฑูุถ ูุง ุชุธูุฑ

**ุงูุณุจุจ**: ุงูุทูุจ ููุณ ุจุญุงูุฉ `PENDING`

**ุงูุญู**:
- ุงูุฃุฒุฑุงุฑ ุชุธูุฑ ููุท ููุทูุจุงุช ุงูุฌุฏูุฏุฉ
- ุฅุฐุง ูุงูุช ุงูุญุงูุฉ `APPROVED` ุฃู `REJECTED` ูู ุชุธูุฑ ุงูุฃุฒุฑุงุฑ

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

| ุงููููุงุณ | ุงููููุฉ |
|---------|--------|
| ุฅุฌูุงูู ุงูุทูุจุงุช | ููุญุณุจ ุชููุงุฆูุงู |
| ูู ุงูุงูุชุธุงุฑ | `PENDING` |
| ููุฏ ุงููุฑุงุฌุนุฉ | `UNDER_REVIEW` |
| ุชูุช ุงูููุงููุฉ | `APPROVED` |
| ูุฑููุถ | `REJECTED` |

---

## ๐จ UI/UX ุงูุชุญุณููุงุช

### ุฃููุงู ุงูุญุงูุงุช:
```css
PENDING         โ ๐ก ุฃุตูุฑ (ูุญุชุงุฌ ุฅุฌุฑุงุก)
APPROVED        โ ๐ข ุฃุฎุถุฑ (ุชูุช ุงูููุงููุฉ)
REJECTED        โ ๐ด ุฃุญูุฑ (ูุฑููุถ)
UNDER_REVIEW    โ ๐ต ุฃุฒุฑู (ููุฏ ุงููุฑุงุฌุนุฉ)
EXPIRED         โ โซ ุฑูุงุฏู (ููุชูู)
```

### ุฃููููุงุช:
```
๐ ุฅุดุนุงุฑ ุฌุฏูุฏ
โ  ูุจูู
โ  ุฑูุถ
๐ค ุจูุงูุงุช ุงูุนููู
๐ฐ ุงููุจูุบ
๐ ุงูุชูุงุตูู
```

---

## ๐ ุงูุฃูุงู

### ุงูุชุญูู ูู ุงูุตูุงุญูุงุช:
```typescript
// ุฌููุน API endpoints ูููุฏูุฑ ูุญููุฉ
if (session.user.role !== 'ADMIN') {
  return NextResponse.json({ error: 'ุบูุฑ ูุตุฑุญ' }, { status: 403 });
}
```

### Logging:
```typescript
// ุฌููุน ุงูุนูููุงุช ูุณุฌูุฉ ูู Console
console.log('โ [APPROVED] ุทูุจ AGR-123 ุชูุช ุงูููุงููุฉ ุนููู');
console.log('โ [REJECTED] ุทูุจ AGR-456 ุชู ุฑูุถู');
```

---

## ๐ ููุฒุงุช ูุณุชูุจููุฉ (TODO)

- [ ] **ุฅุดุนุงุฑุงุช Email** ููุนููู ุนูุฏ ุงูููุงููุฉ/ุงูุฑูุถ
- [ ] **ุฅุดุนุงุฑุงุช SMS** ุนุจุฑ Twilio ุฃู Vonage
- [ ] **Web Push Notifications** (Browser)
- [ ] **Dashboard ููุนููู** ููุชุงุจุนุฉ ุญุงูุฉ ุงูุทูุจ
- [ ] **ุชูุงุฑูุฑ ุชูุตูููุฉ** ุนู ุงูุชูุณูุท
- [ ] **ุชุตุฏูุฑ Excel** ููุทูุจุงุช
- [ ] **ููุงุชุฑ ูุชูุฏูุฉ** (ุญุณุจ ุงูุชุงุฑูุฎุ ุงููุจูุบุ etc.)

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุชู ุฃู ูุดููุฉ:
1. **ุงูุชุญ DevTools โ Console**
2. **ุงุจุญุซ ุนู Errors**
3. **ุฑุงุฌุน ุงููููุงุช ุงููุนุฏูุฉ**
4. **ุชุฃูุฏ ูู ุงูู Database Schema**

---

## โ ุงูุฎูุงุตุฉ

ุงููุธุงู ุงูุขู:
- โ **ุณูู ููุนููู** โ ุฑูุน ุจุณูุท ูููุณุชูุฏุงุช
- โ **ููุธู ูููุฏูุฑ** โ ุฅุดุนุงุฑุงุช + ููุงููุฉ ุณุฑูุนุฉ  
- โ **ุดูุงู** โ ุญุงูุงุช ูุงุถุญุฉ ููู ุทูุจ
- โ **ุขูู** โ ุตูุงุญูุงุช ูุญููุฉ
- โ **ูุงุจู ููุชุทููุฑ** โ ุณูู ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ

---

**๐ ุชู ุจูุงุก ูุธุงู ุชูุณูุท ุงุญุชุฑุงูู ููุฑู!**

```
ุงูุนููู โ ูุฑูุน ุงููุณุชูุฏุงุช
    โ
 PENDING
    โ
ุงููุฏูุฑ โ ูุฑุงุฌุน ูููุฑุฑ
    โ
APPROVED โ  ุฃู  REJECTED โ
    โ
ุงูุนููู โ ูุณุชูู ุฅุดุนุงุฑ
```

---

**ุขุฎุฑ ุชุญุฏูุซ**: 17 ูุจุฑุงูุฑ 2026
